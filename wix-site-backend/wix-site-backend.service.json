{ "name": "wix-site-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "general-info.js" },
  "docs":
    { "summary": "The wix-site-backend module contains functionality for working with\n your site and its pages from backend code.\n\n To use the backend site API, import `wixSiteBackend` from the `wix-site-backend` module:\n\n   ```javascript\n   import wixSiteBackend from 'wix-site-backend';\n   ```",
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "invalidateCache",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the site cache invalidation request is accepted.\nRejected - An error message." },
        "locations":
          [ { "lineno": 1,
              "filename": "cacheInvalidate.js" } ],
        "docs":
          { "summary": "Invalidates the cache for a site.",
            "description":
              [ "Calling the `invalidateCache()` function submits a request to invalidate (clear) the site cache. ",
                " The function returns a Promise that resolves when the invalidation request is accepted (or rejected). Note that the ",
                " invalidation process normally takes a few seconds to propagate.",
                "",
                " Most Wix sites are cached by default to provide better performance. In cases where your site changes ",
                " without publishing, caching may adversely affect your site. For example, if your site fetches and displays data from",
                " a 3rd-party service, you might experience the following issues on a cached site: ",
                "",
                " +  Updated data is not displayed.",
                " +  Updated data is not exposed to bots, hurting SEO.",
                "",
                "",
                " You can prevent such issues by invalidating your site's cache following a data update." ],
            "links": [],
            "examples":
              [ { "title": "Invalidate a site's cache",
                  "body":
                    [ "import wixSiteBackend from 'wix-site-backend';",
                      "",
                      "export function invalidateCache() {",
                      "\treturn wixSiteBackend.invalidateCache();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Get data from a 3rd party service and invalidate the site's cache",
                  "body":
                    [ "/***************************************",
                      " * backend code - myModule.jsw *",
                      " ***************************************/",
                      "",
                      "import wixSiteBackend from 'wix-site-backend';",
                      "import {getJSON} from 'wix-fetch';",
                      "",
                      "export function invalidateCache() {",
                      "  return wixSiteBackend.invalidateCache();",
                      "}",
                      "",
                      "export function fetchData() {",
                      "  return getJSON(\"https://someapi.com/api/someendpoint\");",
                      "}",
                      "",
                      "let json = fetchData();",
                      "",
                      "// This function is triggered by a 3rd-party service ",
                      "// when data changes (for example, via webhook)",
                      "export function updateData() {",
                      "  json = fetchData();",
                      "  invalidateCache();",
                      "}",
                      "",
                      "export function getData() {",
                      "  return json;",
                      "}",
                      "",
                      "/********************",
                      "* client-side code *",
                      "********************/",
                      "",
                      "import {getData} from 'backend/myModule';",
                      "",
                      "$w.onReady(function () {",
                      "  return getData()",
                      "    .then( (json) => {",
                      "      $w('#myTextElement').text = json.someData[0].description;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.log(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages": [],
  "extra":
    {  } }