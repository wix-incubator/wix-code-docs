{ "name": "WixForms",
  "memberOf": "$w",
  "mixes":
    [ "$w.HiddenCollapsedMixin" ],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "form.js" },
  "docs":
    { "summary": "A `$w` element for enabling your site contacts and visitors to work with the Wix Forms app.",
      "description":
        [ "The [Wix Forms app](https://support.wix.com/en/article/about-wix-forms) lets site visitors enter values for fields in a Wix Form and then submit it. ",
          "",
          " The `WixForms` API contains all that you need to work with the [Wix Forms app](https://support.wix.com/en/article/corvid-working-with-forms)",
          " using Corvid APIs. You can customize how site visitors work with the Wix Form, while ",
          " taking advantage of the Wix Forms app's ease of design, automatic creation of submission collections, ",
          " payment receipt, automatic setup of email notifications, and more. ",
          " ",
          " You do not need to import `$w` or `wix-crm` to work with `WixForms` APIs.",
          "",
          " ### Working with the `WixForms` API",
          "",
          "",
          " To work with a `WixForms` `$w` element using the API:",
          "",
          "",
          " 1. [Add and set up](https://support.wix.com/en/article/adding-and-setting-up-a-form-on-your-site) the Wix Form app on your site. ",
          " 1. Depending on the form you choose, a [Wix app starter collection](https://support.wix.com/en/article/corvid-working-with-wix-app-collections-and-code#what-are-wix-app-starter-collections) is also added to your site. You can see it in the Site Structure sidebar under \"Database.\" Use this collection as a template.",
          " 1. When you add the [`WixForms`](wix-crm.html#$w-wixforms) `$w` element, a [`Form`]($w.html#form) `$w` element is also added. Think of the `Form` element as just a container for the input elements and buttons in the Wix Form. It works in conjunction with the [`WixForms`](wix-crm.html#$w-wixforms) element, meaning, if you hide or collapse either the `WixForms` or the `Form` element, the other element is also hidden/collapsed. All Wix Forms APIs apply to the `WixForms` element, not the `Form` element. ",
          " ",
          "",
          "",
          "",
          "",
          " The `WixForms` API does not use functionality provided by [`FormElement`]($w.html#FormElement), ",
          " but the user input elements wrapped within the corresponding [`Form`]($w.html#form) element can. For example, you cannot check if a Wix Form has changed ",
          " using [`onChange`]($w.formelement.html#onChange), but you can check if one of the Wix Form's `Form` fields changed.",
          "",
          "",
          " ",
          " > **Note:** Alternatively, you can use the Corvid API to create your own custom form without the Wix Forms app and connect ",
          " the form's fields to a collection. You can create a custom form with standard input elements ",
          " and a button for submission. When customizing your own form, you have ",
          " options that might not yet be available from the Wix Forms app. For example, you can add more ",
          " varied input elements not yet supported with the app. ",
          "",
          " ",
          " ### Event Handling Flow",
          "",
          " Use the following Wix Forms event handler functions to process forms and control their submission.",
          "",
          " + [`onWixFormSubmit`](#onWixFormSubmitted) sets events that fire when a site visitor submits a Wix Form but before it is sent to the server. This includes aborting the submission. This event handler runs on the front end.",
          " + [`onFormSubmit()`](wix-crm-backend/events/onFormSubmit) sets events that fire when a site visitor submits a form and it is successfully submitted to the server in the backend. ",
          " + [`onWixFormSubmitted`](#onWixFormSubmitted) sets events that fire when a site visitor submits a Wix Form yet before it is sent to the server. This event handler runs on the front end.",
          " + [`onWixFormSubmittedError`](#onWixFormSubmittedError) sets events that fire when a site visitor submits a Wix Form but the submission fails. This event handler runs on the front end.",
          "  ",
          " This diagram shows the order that Wix Forms events are handled:  ",
          " ",
          " ![Wix Forms Event Handling](images/wix_forms_events_flow.png \"Wix Forms Event Handling\")" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "onWixFormSubmit",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "eventHandler",
              "type": "$w.WixForms.WixFormSubmittedEventHandler",
              "doc": "The name of the function or\n the function expression to run when a Wix Form is submitted." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 61,
              "filename": "form.js" } ],
        "docs":
          { "summary": "Adds an event handler that fires when a site visitor starts to submit a Wix Form yet before the form is actually submitted and sent to the server.",
            "description":
              [ "When the site visitor submits a Wix Form, the `onWixFormSubmit()`",
                " callback is triggered for the [`WixForms`](wix-crm.html#$w-wixforms) element before the Wix Form",
                " is actually submitted and sent to the server. ",
                "",
                " This gives you the opportunity to manipulate the fields on the Wix Form before submitting the fields for server ",
                " processing. For example, the form might have a first name and a last name field, but the server might need to process",
                " full names only. You can manipulate the first and last name fields before sending the data to ",
                "",
                " You can also use `onWixFormSubmit()` to stop the submission process. Once an event fails the submission, ",
                " all other form submission events stop and the no submission occurs.",
                "",
                "",
                " The callback to run when the Wix Form is about to be submitted is either the name of the function",
                " or a function expression.",
                "",
                " The callback can contain synchronous operations only. If you include asynchronous operations, no error is issued ",
                " and the asynchronous operations are ignored.",
                "",
                " The received `WixFormSubmitEvent` object ",
                " contains information about the Wix Form that is about to be submitted. The `WixFormSubmitEvent` object is returned by the ",
                " callback asynchronously following verification that a submit was requested, before the server receives the request and before ",
                " the server starts to process the relevant actions.",
                "",
                "",
                " `onWixFormSubmit()` provides information and functionality available on the client side:",
                "",
                " + The function has access to the field names and field values on the form but does not have access to submission details that ",
                "   exist only on the server, such as the contact ID and the submission time.",
                " + The function performs operations only on the client side, such as changing field values before submission. ",
                "",
                "",
                "",
                " For other Wix Forms events, see: ",
                "",
                " + The [`onWixFormSubmitted`](#onWixFormSubmitted) function, which sets events that fire when a site visitor submits a Wix Form and it is successfully received by the server. ",
                " + The [`onFormSubmit()`](wix-crm-backend/events/onFormSubmit) function, which is called in the Backend section's code, to set events that fire on the backend when a site visitor submits a form." ],
            "links":
              [ "[WixFormSubmitEvent](#WixFormSubmitEvent)",
                "[onWixFormSubmitError](#onWixFormSubmitError)" ],
            "examples":
              [ { "title": "Trigger pre-submission processing for a Wix Form before submitting to server",
                  "body":
                    [ "// Switch the order of the names entered in the full name field",
                      "// before submitting to server.",
                      "$w(\"#myWixForm\").onWixFormSubmit( {fields} => {",
                      "  let fullName = fields[0].fieldValue;",
                      "  let fullNameArray = fullName.split(\" \");",
                      "  let firstName = fullNameArray[0];",
                      "  let lastName = fullNameArray[1];",
                      "  fields[0].fieldvalue = lastName + \", \" + firstName;",
                      "  let email = fields[1].fieldValue;",
                      "  $w('#myText').text = `Thank you, ${firstName} ${lastName}, for signing up.`;",
                      "});",
                      "",
                      "/* fields array of objects before onWixFormSubmit():",
                      " * ",
                      " * [",
                      " *    { ",
                      " *      \"id\" : \"inputName\",",
                      " *      \"fieldValue\" : \"Sam Jones\",",
                      " *      \"fieldName\" : \"Enter first name and then last name, with a space separator.\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputEmail\",",
                      " *      \"fieldValue\" : \"ms@theCompany\",",
                      " *      \"fieldName\" : \"Enter email\"",
                      " *    }",
                      " * ] ",
                      " * ",
                      " *  ",
                      " *  fullNameArray array:",
                      " * ",
                      " *  [ \"Sam\". ",
                      " ",
                      " *    { ",
                      " *      \"id\" : \"inputName\",",
                      " *      \"fieldValue\" : \"Jones, Sam\",",
                      " *      \"fieldName\" : \"Enter the last name and then the first name, separated by a space.\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputEmail\",",
                      " *      \"fieldValue\" : \"ms@theCompany\",",
                      " *      \"fieldName\" : \"Enter email\"",
                      " *    }",
                      " * ] ",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "Trigger a \"go/no-go\" decision determining if a Wix Form should be submitted",
                  "body":
                    [ "// Switch the order of the names entered in the full name field",
                      "// before submitting to server.",
                      "$w(\"#myWixForm\").onWixFormSubmit( {event} => {",
                      "  let fullName = fields[0].fieldValue;",
                      "  let fullNameArray = fullName.split(\" \");",
                      "  let firstName = fullNameArray[0];",
                      "  let lastName = fullNameArray[1];",
                      "  fields[0].fieldvalue = lastName + \", \" + firstName;",
                      "  let email = fields[1].fieldValue;",
                      "  $w('#myText').text = `Thank you, ${firstName} ${lastName}, for signing up.`;",
                      "});",
                      "",
                      "",
                      "",
                      "$w('#form’).onWixFormSubmit( (event) => {",
                      "  const {fields} = event",
                      "  const email = fields.findIndex(field => field.name === ‘email’)",
                      "        const isEmailField = email.value !== ‘’;",
                      "        return isEmailField;",
                      "} ) ;",
                      "",
                      "",
                      "",
                      "/* fields array of objects before onWixFormSubmit():",
                      " * ",
                      " * [",
                      " *    { ",
                      " *      \"id\" : \"inputName\",",
                      " *      \"fieldValue\" : \"Sam Jones\",",
                      " *      \"fieldName\" : \"Enter first name and then last name, with a space separator.\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputEmail\",",
                      " *      \"fieldValue\" : \"ms@theCompany\",",
                      " *      \"fieldName\" : \"Enter email\"",
                      " *    }",
                      " * ] ",
                      " * ",
                      " *  ",
                      " *  fullNameArray array:",
                      " * ",
                      " *  [ \"Sam\". ",
                      " ",
                      " *    { ",
                      " *      \"id\" : \"inputName\",",
                      " *      \"fieldValue\" : \"Jones, Sam\",",
                      " *      \"fieldName\" : \"Enter the last name and then the first name, separated by a space.\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputEmail\",",
                      " *      \"fieldValue\" : \"ms@theCompany\",",
                      " *      \"fieldName\" : \"Enter email\"",
                      " *    }",
                      " * ] ",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          { "eventType": "WixFormSubmitEvent" } },
      { "name": "onWixFormSubmitted",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "eventHandler",
              "type": "$w.WixForms.WixFormSubmittedEventHandler",
              "doc": "The name of the function or\n the function expression to run when a Wix Form is submitted." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 115,
              "filename": "form.js" } ],
        "docs":
          { "summary": "Adds an event handler that fires when a site visitor submits a Wix Form and it is successfully received by the server.",
            "description":
              [ "When the site visitor submits a Wix Form, the field values are cleared and the `onWixFormSubmitted()`",
                " callback is triggered for the [`WixForms`](wix-crm.html#$w-wixforms) element. ",
                "",
                " The callback to run when the Wix Form is submitted is either the name of the function",
                " or a function expression.",
                "",
                " The received `WixFormSubmittedEvent` object ",
                " contains information about the Wix Form that was submitted. The `WixFormSubmittedEvent` object is returned by the ",
                " callback asynchronously following verification of a successful submission, while the server starts to process the",
                " relevant actions.",
                "",
                "",
                " `onWixFormSubmitted()` provides information and functionality available on the client side:",
                "",
                " + The function has access to the field names and field values on the form but does not have access to submission details that exist only on the server, such as the contact ID and the submission time.",
                " + The function performs operations only on the client side, such as displaying a message after submission. ",
                "",
                "",
                " For other Wix Forms events, see: ",
                "",
                " + The [`onWixFormSubmit`](#onWixFormSubmit) function, which sets events that fire when a site visitor submits a Wix Form yet before it is sent to the server. ",
                " + The [`onFormSubmit()`](wix-crm-backend/events/onFormSubmit) function, which is called in the Backend section's code, to set events that fire on the backend when a site visitor submits a form." ],
            "links":
              [ "[WixFormSubmittedEvent](#WixFormSubmittedEvent)",
                "[onWixFormSubmittedError](#onWixFormSubmittedError)" ],
            "examples":
              [ { "title": "An event triggered on a WixForms element when the Wix Form is submitted",
                  "body":
                    [ "$w(\"#myWixForm\").onWixFormSubmitted( {fields} => {",
                      "  let firstName = fields[0].fieldValue;",
                      "  let lastName = fields[1].fieldValue;",
                      "  let donation = fields[2].fieldValue;",
                      "  let email = fields[3].fieldValue;",
                      "  $w('#myText').text = `Thank you, ${firstName} ${lastName}, for your generous donation of ${donation}.`;",
                      "});",
                      "",
                      "/* fields array of objects: ",
                      " * [",
                      " *    { ",
                      " *      \"id\" : \"inputFirstName\",",
                      " *      \"fieldValue\" : \"Maria\",",
                      " *      \"fieldName\" : \"Enter first name\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputLastName\",",
                      " *      \"fieldValue\" : \"Santora\",",
                      " *      \"fieldName\" : \"Enter last name\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputDonation\",",
                      " *      \"fieldValue\" : \"1000\",",
                      " *      \"fieldName\" : \"Enter donation amount\"",
                      " *    },",
                      " *    { ",
                      " *      \"id\" : \"inputEmail\",",
                      " *      \"fieldValue\" : \"ms@theCompany\",",
                      " *      \"fieldName\" : \"Enter email\"",
                      " *    }",
                      " * ] ",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          { "eventType": "WixFormSubmittedEvent" } },
      { "name": "onWixFormSubmittedError",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "eventHandler",
              "type": "$w.WixForms.WixFormSubmittedErrorEventHandler",
              "doc": "The name of the function or\n the function expression to run when a Wix Form is not submitted due to error." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 152,
              "filename": "form.js" } ],
        "docs":
          { "summary": "Adds an event handler that fires when a site visitor is not able to successfully submit a Wix Form to the server.",
            "description":
              [ "If a Wix Form has not been successfully submitted by the site visitor, the received",
                " [`WixFormSubmittedErrorEvent`](#WixFormSubmittedErrorEvent) object",
                " contains error information about why the Wix Form could not be submitted. ",
                "",
                " The `WixFormSubmittedErrorEvent` object is returned by the callback asynchronously right after ",
                " an unsuccessful submission.",
                "",
                " The `onWixFormSubmittedError` callback is triggered for the [`WixForms`](wix-crm.html#$w-wixforms) element. The callback to ",
                " run when a submission error occurs is either the name of the function or a function expression.",
                " ",
                "",
                " **Error Codes and Descriptions**",
                "",
                "",
                " * INVALID_FIELD. A field value was not entered correctly by the site visitor.",
                " * FILE\\_NOT\\_UPLOADED. A file or signature upload did not succeed.",
                " * INVALID_ARGUMENT. An internal server error occurred.",
                " * UNAUTHENTICATED. The site member's or visitor's identity was not authenticated.",
                " * PERMISSION_DENIED. The site visitor does not have permissions to submit the Wix Form. For example, a reCAPTCHA challenge was not verified.",
                " * RESOURCE_EXHAUSTED. The request to submit the Wix Form was denied by the server to prevent overload and improve overall performance.",
                " * UNAVAILABLE. The service is not available.",
                " * UNKNOWN_ERROR. An unknown error occurred." ],
            "links":
              [ "[WixFormSubmittedErrorEvent](#WixFormSubmittedErrorEvent)",
                "[onWixFormSubmitted](#onWixFormSubmitted)" ],
            "examples":
              [ { "title": "An event triggered on a WixForms element when the Wix Form is not submitted successfully",
                  "body":
                    [ "$w(\"#myWixForms\").onWixFormSubmittedError(     ",
                      "  (  {code, message}  ) => {",
                      "    $w(\"#errorCodeText\").text = code;",
                      "    $w(\"#errorMessageText\").text = message;",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          { "eventType": "WixFormSubmittedErrorEvent" } } ],
  "callbacks":
    [ { "name": "WixFormSubmitEventHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "$w.WixFormSubmitEvent",
              "doc": "The Wix Forms event that occurred." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 193,
              "filename": "form.js" } ],
        "docs":
          { "summary": "Handles events fired when the Wix Form is about to be submitted.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "WixFormSubmittedErrorEventHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "errorEvent",
              "type": "$w.WixFormSubmittedErrorEvent",
              "doc": "The Wix Forms error event that occurred." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 208,
              "filename": "form.js" } ],
        "docs":
          { "summary": "Handles events fired when the Wix Form is not submitted due to error.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "WixFormSubmittedEventHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "$w.WixFormSubmittedEvent",
              "doc": "The Wix Forms event that occurred." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 201,
              "filename": "form.js" } ],
        "docs":
          { "summary": "Handles events fired when the Wix Form is submitted.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "messages": [],
  "extra":
    {  } }