{ "name": "wix-http-functions",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "http-functions.js" },
  "docs":
    { "summary": "HTTP functions are used to expose an API of your site's functionality.",
      "description":
        [ "HTTP functions allow you to expose the functionality of your site",
          " as a service. That means other people can write code to consume the",
          " functionality you expose by calling the functions of the API that you define.",
          "",
          " **IMPORTANT:** This API is only intended for use in server-to-server communications.",
          " If you use this API to set a cookie on a site visitor's browser you may no longer",
          " be in compliance with applicable data privacy regulations.",
          "",
          " To add an HTTP function, add a file named **http-functions.js** to the **Backend**",
          " section of your site. The code for your HTTP functions is added to that",
          " file.",
          "",
          " HTTP functions are defined using the following pattern:",
          "",
          " ``` javascript",
          " export function <prefix>_<functionName>(request) { }",
          " ```",
          "",
          " Where `<prefix>` is one of `get`, `post`, `put`, `delete`, `options`, or `use` and",
          " `<functionName>` is the name users use to reach your function.",
          "",
          " These are not functions that you call in your code, rather they are functions",
          " that you define. They are called when your users make HTTP requests using",
          " the associated URLs as described below.",
          "",
          " For example, the following code creates a function that responds to",
          " GET requests by querying a collection to find items based on the path of the",
          " request. If matching items are found, an OK response is returned.",
          " If no matches are found, a Not Found response is returned.",
          "",
          " ```javascript",
          " import {ok, notFound, serverError} from 'wix-http-functions';",
          " import wixData from 'wix-data';",
          "",
          " // URL looks like:",
          " // https://www.mysite.com/_functions/myFunction/John/Doe",
          " // or:",
          " // https://user.wixsite.com/mysite/_functions/myFunction/John/Doe",
          " export function get_myFunction(request) {",
          "   let options = {",
          "     \"headers\": {",
          "       \"Content-Type\": \"application/json\"",
          "     }",
          "   };",
          "   // query a collection to find matching items",
          "   return wixData.query(\"myUsersCollection\")",
          "     .eq(\"firstName\", request.path[0])",
          "     .eq(\"lastName\", request.path[1])",
          "     .find()",
          "     .then( (results) => {",
          "       // matching items were found",
          "       if(results.items.length > 0) {",
          "         options.body = {",
          "           \"items\": results.items",
          "         };",
          "         return ok(options);",
          "       }",
          "       // no matching items found",
          "       options.body = {",
          "         \"error\": `${request.path[0]} ${request.path[1]} wasn't found`",
          "       };",
          "       return notFound(options);",
          "     } )",
          "     // something went wrong",
          "     .catch( (error) => {",
          "       options.body = {",
          "         \"error\": error",
          "       };",
          "       return serverError(options);",
          "     } );",
          " }",
          " ```",
          "",
          "",
          " Clients consume your HTTP functions by reaching endpoints with",
          " the following patterns.",
          "",
          " Premium sites:",
          "",
          " ```",
          " https://www.{user_domain}/_functions/<functionName>",
          " ```",
          "",
          " Free sites:",
          "",
          " ```",
          " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
          " ```",
          "",
          "",
          " You test your HTTP functions by reaching endpoints using the following",
          " patterns.",
          "",
          " Premium sites:",
          "",
          " ```",
          " https://www.{user_domain}/_functions-dev/<functionName>",
          " ```",
          "",
          " Free sites:",
          "",
          " ```",
          " https://{user_name}.wixsite.com/{site_name}/_functions-dev/<functionName>",
          " ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "badRequest",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 123,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response with status code 400 (Bad Request) and the information from the options parameter.",
            "description":
              [ "The `badRequest()` function creates a response with the status code 400 (Bad Request).",
                "",
                " Optionally, the `badRequest()` function can take a `WixHttpFunctionResponseOptions`",
                " object which is used to specify the response's body and headers. If the object",
                " contains a status it will be ignored.",
                "",
                " Use the `badRequest()` function to create a response to return from an HTTP",
                " function. A 400 (Bad Request) response is usually used to indicate the",
                " request was unsuccessful because of a client error, such as a request using",
                " the incorrect syntax." ],
            "links": [],
            "examples":
              [ { "title": "Create a 400 (Bad Request) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {badRequest} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return badRequest();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a 400 (Bad Request) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {badRequest} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    body: {",
                      "      \"error\": \"The request must contain the 'X' parameter.\"",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "",
                      "  return badRequest(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "created",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 51,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response with status code 201 (Created) and the information from the options parameter.",
            "description":
              [ "The `created()` function creates a response with the status code 201 (Created).",
                "",
                " Optionally, the `created()` function can take a `WixHttpFunctionResponseOptions`",
                " object which is used to specify the response's body and headers. If the object",
                " contains a status it will be ignored.",
                "",
                " Use the `created()` function to create a response to return from an HTTP",
                " function. A 201 (Created) response is usually used to indicate that the",
                " request was successful and a new resource has been created." ],
            "links": [],
            "examples":
              [ { "title": "Create a 201 (Created) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {created} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return created();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a 201 (Created) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {created} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    body: {",
                      "      \"key1\": \"value1\",",
                      "      \"key2\": \"value2\"",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "",
                      "  return created(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "delete",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "request",
              "type": "wix-http-functions.WixHttpFunctionRequest",
              "doc": "The request object." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 271,
              "filename": "http-functions.js" } ],
        "docs":
          { "summary": "A function that responds to requests made with the HTTP DELETE method.",
            "description":
              [ "The HTTP DELETE method is usually called by consumers to delete an existing resource.",
                " If defined in this way and the resource is deleted, the function should respond",
                " with a 200 (OK) status code.",
                "",
                " Respond to the request by returning a [`WixHttpFunctionResponse`](wix-http-functions.WixHttpFunctionResponse.html)",
                " object you create using one of the [`response()`](wix-http-functions.html#response), [`ok()`](wix-http-functions.html#ok),",
                " [`created()`](wix-http-functions.html#created), [`notFound()`](wix-http-functions.html#notFound),",
                " [`serverError()`](wix-http-functions.html#serverError), [`badRequest()`](wix-http-functions.html#badRequest),",
                " or [`forbidden()`](wix-http-functions.html#forbidden) functions.",
                "",
                " The `delete()` function is not a function that you call from your code. You define",
                " the function in a file named **http-functions.js** in your site's Backend section.",
                " The function is called when your users make HTTP requests using the associated",
                " URLs as described below.",
                "",
                " All DELETE requests with the following URL will be routed to this function:",
                "",
                " Premium sites:",
                "",
                " ```",
                " https://www.{user_domain}/_functions/<functionName>",
                " ```",
                "",
                " Free sites:",
                "",
                " ```",
                " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
                " ```" ],
            "links": [],
            "examples":
              [ { "title": "Create a DELETE HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok} from 'wix-http-functions';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/someId",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/someId",
                      "export function delete_myFunction(request) {",
                      "",
                      "  const toRemove = request.path[0];",
                      "",
                      "  // remove the resource",
                      "",
                      "  return ok();",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a DELETE HTTP function named myFunction." } },
                { "title": "Create a DELETE HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok, serverError} from 'wix-http-functions';",
                      "import wixData from 'wix-data';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/76bf-8bfa-714",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/76bf-8bfa-714",
                      "export function delete_myFunction(request) {",
                      "  let options = {",
                      "    \"headers\": {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "  // delete the item from a collection",
                      "  return wixData.remove(\"myCollection\", request.path[0])",
                      "    .then( (results) => {",
                      "      options.body = {",
                      "        \"deleted\": results",
                      "      };",
                      "      return ok(options);",
                      "    } )",
                      "    // something went wrong",
                      "    .catch( (error) => {",
                      "      options.body = {",
                      "        \"error\": error",
                      "      };",
                      "      return serverError(options);",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a DELETE HTTP function named myFunction that deletes\n an item from a collection named myCollection based on the path of the\n request. If the item is deleted successfully, an OK response is returned." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] } },
      { "name": "forbidden",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 148,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response with status code 403 (Forbidden) and the information from the options parameter.",
            "description":
              [ "The `forbidden()` function creates a response with the status code 403 (Forbidden).",
                "",
                " Optionally, the `forbidden()` function can take a `WixHttpFunctionResponseOptions`",
                " object which is used to specify the response's body and headers. If the object",
                " contains a status it will be ignored.",
                "",
                " Use the `forbidden()` function to create a response to return from an HTTP",
                " function. A 403 (Forbidden) response is used to indicate the request was valid but the",
                " server is refusing to process it, usually because the client does not have the",
                " necessary permissions for the requested resource." ],
            "links": [],
            "examples":
              [ { "title": "Create a 403 (Forbidden) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {forbidden} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return forbidden();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a 403 (Forbidden) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {forbidden} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    body: {",
                      "      \"error\": \"forbidden\",",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "",
                      "  return forbidden(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "get",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "request",
              "type": "wix-http-functions.WixHttpFunctionRequest",
              "doc": "The request object." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 118,
              "filename": "http-functions.js" } ],
        "docs":
          { "summary": "A function that responds to requests made with the HTTP GET method.",
            "description":
              [ "The HTTP GET method is usually called by consumers to retrieve a resource and should",
                " have no other effect. If used in this way and the resource is found, the function should",
                " respond with a 200 (OK) status code and the requested resource.",
                "",
                " Respond to the request by returning a [`WixHttpFunctionResponse`](wix-http-functions.WixHttpFunctionResponse.html)",
                " object you create using one of the [`response()`](wix-http-functions.html#response), [`ok()`](wix-http-functions.html#ok),",
                " [`created()`](wix-http-functions.html#created), [`notFound()`](wix-http-functions.html#notFound),",
                " [`serverError()`](wix-http-functions.html#serverError), [`badRequest()`](wix-http-functions.html#badRequest),",
                " or [`forbidden()`](wix-http-functions.html#forbidden) functions.",
                "",
                " The `get()` function is not a function that you call from your code. You define",
                " the function in a file named **http-functions.js** in your site's Backend section.",
                " The function is called when your users make HTTP requests using the associated",
                " URLs as described below.",
                "",
                " All GET requests with the following URL will be routed to this function:",
                "",
                " Premium sites:",
                "",
                " ```",
                " https://www.{user_domain}/_functions/<functionName>",
                " ```",
                "",
                " Free sites:",
                "",
                " ```",
                " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
                " ```" ],
            "links": [],
            "examples":
              [ { "title": "Create a GET HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok, notFound} from 'wix-http-functions';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/findMe",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/findMe",
                      "export function get_myFunction(request) {",
                      "  if(request.path[0] === \"findMe\") {",
                      "    const body = \"Found it!\";",
                      "    return ok({body: body});",
                      "  }",
                      "",
                      "  const body = \"Can't find it!\";",
                      "  return notFound({body: body});",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a GET HTTP function named myFunction." } },
                { "title": "Create a GET HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok, notFound, serverError} from 'wix-http-functions';",
                      "import wixData from 'wix-data';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/John/Doe",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/John/Doe",
                      "export function get_myFunction(request) {",
                      "  let options = {",
                      "    \"headers\": {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "  // query a collection to find matching items",
                      "  return wixData.query(\"myUsersCollection\")",
                      "    .eq(\"firstName\", request.path[0])",
                      "    .eq(\"lastName\", request.path[1])",
                      "    .find()",
                      "    .then( (results) => {",
                      "      // matching items were found",
                      "      if(results.items.length > 0) {",
                      "        options.body = {",
                      "          \"items\": results.items",
                      "        };",
                      "        return ok(options);",
                      "      }",
                      "      // no matching items found",
                      "      options.body = {",
                      "        \"error\": `'${request.path[0]} ${request.path[1]}' was not found`",
                      "      };",
                      "      return notFound(options);",
                      "    } )",
                      "    // something went wrong",
                      "    .catch( (error) => {",
                      "      options.body = {",
                      "        \"error\": error",
                      "      };",
                      "      return serverError(options);",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a GET HTTP function named myFunction that queries a\n collection named myCollection to find items based on the path of the\n request. If matching items are found, an OK response is returned.\n If no matches are found, a Not Found response is returned." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] } },
      { "name": "notFound",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 75,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response with status code 404 (Not Found) and the information from the options parameter.",
            "description":
              [ "The `notFound()` function creates a response with the status code 404 (Not Found).",
                "",
                " Optionally, the `notFound()` function can take a `WixHttpFunctionResponseOptions`",
                " object which is used to specify the response's body and headers. If the object",
                " contains a status it will be ignored.",
                "",
                " Use the `notFound()` function to create a response to return from an HTTP",
                " function. A 404 (Not Found) response is usually used to indicate that the",
                " requested was not found at the current time." ],
            "links": [],
            "examples":
              [ { "title": "Create a 404 (Not Found) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {notFound} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return notFound();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a 404 (Not Found) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {notFound} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    body: {",
                      "      \"error\": \"not found\"",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "",
                      "  return notFound(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "ok",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 28,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response with status code 200 (OK) and the information from the options parameter.",
            "description":
              [ "The `ok()` function creates a response with the status code 200 (OK).",
                "",
                " Optionally, the `ok()` function can take a `WixHttpFunctionResponseOptions`",
                " object which is used to specify the response's body and headers. If the object",
                " contains a status it will be ignored.",
                "",
                " Use the `response()` function to create a response to return from an HTTP",
                " function. A 200 (OK) response is usually used to indicate that a request was successful." ],
            "links": [],
            "examples":
              [ { "title": "Create a 200 (OK) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return ok();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a 200 (OK) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    body: {",
                      "      \"key1\": \"value1\",",
                      "      \"key2\": \"value2\"",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "",
                      "  return ok(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "options",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "request",
              "type": "wix-http-functions.WixHttpFunctionRequest",
              "doc": "The request object." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 321,
              "filename": "http-functions.js" } ],
        "docs":
          { "summary": "A function that responds to requests made with the HTTP OPTIONS method.",
            "description":
              [ "The HTTP OPTIONS method is usually called by consumers <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS#Identifying_allowed_request_methods\" target=\"_blank\"> attempting",
                " to identify the allowed request methods</a> or as part of a <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS#Preflighted_requests_in_CORS\" target=\"_blank\">CORS preflight request</a>.",
                " If defined in this way, the function should respond with a 204 (No Content) status code",
                " and header data that indicates which methods are allowed and from which origins.",
                "",
                " The value for the `\"Access-Control-Allow-Origin\"` response header determines whether the",
                " response can be shared with a given requesting origin. Its value can be one of `\"*\"`, a",
                " single specific origin URL, or `null` as described <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin\" target=\"_blank\">here</a>.",
                " Due to security concerns, it is recommended that you use a single specific origin URL",
                " whenever possible. If you need to allow more than one origin URL, you should validate",
                " that the requesting origin is allowed access and then echo it back in the response ",
                " header.",
                "",
                " Respond to the request by returning a [`WixHttpFunctionResponse`](wix-http-functions.WixHttpFunctionResponse.html)",
                " object you create using the [`response()`](wix-http-functions.html#response) function.",
                "",
                " The `options()` function is not a function that you call from your code. You define",
                " the function in a file named **http-functions.js** in your site's Backend section.",
                " The function is called when your users make HTTP requests using the associated",
                " URLs as described below.",
                "",
                " All OPTIONS requests with the following URL will be routed to this function:",
                "",
                " Premium sites:",
                "",
                " ```",
                " https://www.{user_domain}/_functions/<functionName>",
                " ```",
                "",
                " Free sites:",
                "",
                " ```",
                " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
                " ```" ],
            "links": [],
            "examples":
              [ { "title": "Create an OPTIONS HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {response} from 'wix-http-functions';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/",
                      "",
                      "export function options_myFunction(request) {",
                      "  let headers = {",
                      "      \"Access-Control-Allow-Origin\": \"https://www.example.com\",",
                      "      \"Access-Control-Allow-Methods\": \"POST, GET, OPTIONS\",",
                      "      \"Access-Control-Max-Age\": \"86400\"",
                      "  }",
                      "  return response({\"status\": 204, \"headers\": headers});",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates an OPTIONS HTTP function named myFunction." } },
                { "title": "Create an OPTIONS HTTP function that validates the origin",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {response} from 'wix-http-functions';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/",
                      "",
                      "export function options_myFunction(request) {",
                      "  let headers = {",
                      "      \"Access-Control-Allow-Methods\": \"POST, GET, OPTIONS\",",
                      "      \"Access-Control-Max-Age\": \"86400\"",
                      "  }",
                      "",
                      "  // send allowed origin header only if origin",
                      "  // is validated by some validation function",
                      "  if(validate(request.headers.origin)) {",
                      "    headers[\"Access-Control-Allow-Origin\"] = request.headers.origin;",
                      "  }",
                      "",
                      "  return response({\"status\": 204, \"headers\": headers});",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates an OPTIONS HTTP function named myFunction which validates\n the origin using a `validate()` function that you must define." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] } },
      { "name": "post",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "request",
              "type": "wix-http-functions.WixHttpFunctionRequest",
              "doc": "The request object." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 169,
              "filename": "http-functions.js" } ],
        "docs":
          { "summary": "A function that responds to requests made with the HTTP POST method.",
            "description":
              [ "The HTTP POST method is usually called by consumers to create a new resource.",
                " If defined in this way and the resource is created, the function should respond",
                " with a 201 (Created) status code and usually a reference to the new resource.",
                "",
                " Respond to the request by returning a [`WixHttpFunctionResponse`](wix-http-functions.WixHttpFunctionResponse.html)",
                " object you create using one of the [`response()`](wix-http-functions.html#response), [`ok()`](wix-http-functions.html#ok),",
                " [`created()`](wix-http-functions.html#created), [`notFound()`](wix-http-functions.html#notFound),",
                " [`serverError()`](wix-http-functions.html#serverError), [`badRequest()`](wix-http-functions.html#badRequest),",
                " or [`forbidden()`](wix-http-functions.html#forbidden) functions.",
                "",
                " The `post()` function is not a function that you call from your code. You define",
                " the function in a file named **http-functions.js** in your site's Backend section.",
                " The function is called when your users make HTTP requests using the associated",
                " URLs as described below.",
                "",
                " All POST requests with the following URL will be routed to this function:",
                "",
                " Premium sites:",
                "",
                " ```",
                " https://www.{user_domain}/_functions/<functionName>",
                " ```",
                "",
                " Free sites:",
                "",
                " ```",
                " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
                " ```" ],
            "links": [],
            "examples":
              [ { "title": "Create a POST HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {created} from 'wix-http-functions';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/",
                      "export function post_myFunction(request) {",
                      "",
                      "  return request.body.text()",
                      "    .then( (body) => {",
                      "",
                      "      // insert the info from the body somewhere",
                      "",
                      "      return created();",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a POST HTTP function named myFunction." } },
                { "title": "Create a POST HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {created, serverError} from 'wix-http-functions';",
                      "import wixData from 'wix-data';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/",
                      "export function post_myFunction(request) {",
                      "  let options = {",
                      "    \"headers\": {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "  // get the request body",
                      "  return request.body.json()",
                      "  .then( (body) => {",
                      "      // insert the item in a collection",
                      "      return wixData.insert(\"myCollection\", body);",
                      "    } )",
                      "    .then( (results) => {",
                      "      options.body = {",
                      "        \"inserted\": results",
                      "      };",
                      "      return created(options);",
                      "    } )",
                      "    // something went wrong",
                      "    .catch( (error) => {",
                      "      options.body = {",
                      "        \"error\": error",
                      "      };",
                      "      return serverError(options);",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a POST HTTP function named myFunction that inserts\n an item from the request's body into a collection named myCollection. If the\n item is inserted successfully, a Created response is returned." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] } },
      { "name": "put",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "request",
              "type": "wix-http-functions.WixHttpFunctionRequest",
              "doc": "The request object." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 219,
              "filename": "http-functions.js" } ],
        "docs":
          { "summary": "A function that responds to requests made with the HTTP PUT method.",
            "description":
              [ "The HTTP PUT method is usually called by consumers to update an existing resource.",
                "",
                " If defined in this way and the resource is updated, the function should respond with",
                " a 200 (OK) status code. If defined in this way and the resource is created",
                " because it did not exist, you should respond with a 201 (Created) status code.",
                "",
                " Respond to the request by returning a [`WixHttpFunctionResponse`](wix-http-functions.WixHttpFunctionResponse.html)",
                " object you create using one of the [`response()`](wix-http-functions.html#response), [`ok()`](wix-http-functions.html#ok),",
                " [`created()`](wix-http-functions.html#created), [`notFound()`](wix-http-functions.html#notFound),",
                " [`serverError()`](wix-http-functions.html#serverError), [`badRequest()`](wix-http-functions.html#badRequest),",
                " or [`forbidden()`](wix-http-functions.html#forbidden) functions.",
                "",
                " The `put()` function is not a function that you call from your code. You define",
                " the function in a file named **http-functions.js** in your site's Backend section.",
                " The function is called when your users make HTTP requests using the associated",
                " URLs as described below.",
                "",
                " All PUT requests with the following URL will be routed to this function:",
                "",
                " Premium sites:",
                "",
                " ```",
                " https://www.{user_domain}/_functions/<functionName>",
                " ```",
                "",
                " Free sites:",
                "",
                " ```",
                " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
                " ```" ],
            "links": [],
            "examples":
              [ { "title": "Create a PUT HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok} from 'wix-http-functions';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/",
                      "export function put_myFunction(request) {",
                      "",
                      "  return request.body.text()",
                      "    .then( (body) => {",
                      "",
                      "      // update the info from the body somewhere",
                      "      return ok();",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a PUT HTTP function named myFunction." } },
                { "title": "Create a PUT HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok, serverError} from 'wix-http-functions';",
                      "import wixData from 'wix-data';",
                      "",
                      "// URL looks like:",
                      "// https://www.mysite.com/_functions/myFunction/",
                      "// or:",
                      "// https://user.wixsite.com/mysite/_functions/myFunction/",
                      "export function put_myFunction(request) {",
                      "  let options = {",
                      "    \"headers\": {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "  // get the request body",
                      "  return request.body.json()",
                      "  .then( (body) => {",
                      "      // update the item in a collection",
                      "      return wixData.update(\"myCollection\", body);",
                      "    } )",
                      "    .then( (results) => {",
                      "      options.body = {",
                      "        \"inserted\": results",
                      "      };",
                      "      return ok(options);",
                      "    } )",
                      "    // something went wrong",
                      "    .catch( (error) => {",
                      "      options.body = {",
                      "        \"error\": error",
                      "      };",
                      "      return serverError(options);",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a PUT HTTP function named myFunction that updates\n an item from the request's body in a collection named myCollection. If the\n item is updated successfully, an OK response is returned." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] } },
      { "name": "response",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 9,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response populated with the information from the options parameter.\n The `response()` function creates a custom response built with the\n information passed to the `options` parameter in a `WixHttpFunctionResponseOptions`\n object.\n\n Use the `response()` function to create a response to return from an HTTP\n function.",
            "links": [],
            "examples":
              [ { "title": "Create a response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {response} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return response();",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {response} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    status: 418,",
                      "    body: {",
                      "      \"key1\": \"value1\",",
                      "      \"key2\": \"value2\"",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  };",
                      "",
                      "  return response(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "serverError",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-http-functions.WixHttpFunctionResponseOptions",
              "doc": "The response options." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 99,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "Returns a response with status code 500 (Internal Server Error) and the information from the options parameter.",
            "description":
              [ "The `serverError()` function creates a response with the status code 500 (Internal Server Error).",
                "",
                " Optionally, the `serverError()` function can take a `WixHttpFunctionResponseOptions`",
                " object which is used to specify the response's body and headers. If the object",
                " contains a status it will be ignored.",
                "",
                " Use the `serverError()` function to create a response to return from an HTTP",
                " function. A 500 (Internal Server Error) response is usually used to indicate",
                " the request was unsuccessful because of an unexpected error on the server." ],
            "links": [],
            "examples":
              [ { "title": "Create a 500 (Internal Server Error) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {serverError} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  return serverError(options);",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Create a 500 (Internal Server Error) response",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {serverError} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  let options = {",
                      "    body: {",
                      "      \"error\": \"internal server error\",",
                      "    },",
                      "    headers: {",
                      "      \"Content-Type\": \"application/json\"",
                      "    }",
                      "  }",
                      "",
                      "  return serverError(options);",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "use",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "request",
              "type": "wix-http-functions.WixHttpFunctionRequest",
              "doc": "The request object." } ],
        "ret":
          { "type": "wix-http-functions.WixHttpFunctionResponse" },
        "locations":
          [ { "lineno": 376,
              "filename": "http-functions.js" } ],
        "docs":
          { "summary": "A function that responds to requests made with any HTTP method.",
            "description":
              [ "Requests made with any of the GET, POST, PUT, DELETE, or OPTIONS HTTP methods will",
                " be routed to this function unless another function is defined specifically",
                " for the request's HTTP method.",
                "",
                " For example, if you create functions named `get_myFunction` and",
                " `use_myFunction`, GET calls to **myFunction** will be handled by",
                " `get_myFunction`, while POST, PUT, DELETE, and OPTIONS calls will be handled by",
                " `use_myFunction`.",
                "",
                " The `use()` function is not a function that you call from your code. You define",
                " the function in a file named **http-functions.js** in your site's Backend section.",
                " The function is called when your users make HTTP requests using the associated",
                " URLs as described below.",
                "",
                " All GET, POST, PUT, DELETE, and OPTIONS HTTP requests with the following URL will be routed to this function unless another function is defined specifically for the request's HTTP method:",
                "",
                " Premium sites:",
                "",
                " ```",
                " https://www.{user_domain}/_functions/<functionName>",
                " ```",
                "",
                " Free sites:",
                "",
                " ```",
                " https://{user_name}.wixsite.com/{site_name}/_functions/<functionName>",
                " ```",
                "",
                "",
                " Respond to the request by returning a [`WixHttpFunctionResponse`](wix-http-functions.WixHttpFunctionResponse.html)",
                " object you create using one of the [`response()`](wix-http-functions.html#response),",
                " [`ok()`](wix-http-functions.html#ok), [`created()`](wix-http-functions.html#created),",
                " [`notFound()`](wix-http-functions.html#notFound), [`serverError()`](wix-http-functions.html#serverError),",
                " [`badRequest()`](wix-http-functions.html#badRequest), or [`forbidden()`](wix-http-functions.html#forbidden)",
                " functions." ],
            "links": [],
            "examples":
              [ { "title": "Create a catchall HTTP function",
                  "body":
                    [ "// In http-functions.js",
                      "",
                      "import {ok} from 'wix-http-functions';",
                      "",
                      "export function use_myFunction(request) {",
                      "",
                      "  const method = request.method;",
                      "",
                      "  // ...",
                      "",
                      "  return ok();",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example creates a catchall HTTP function named myFunction." } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] } } ],
  "callbacks": [],
  "messages":
    [ { "name": "WixHttpFunctionResponseOptions",
        "locations":
          [ { "lineno": 1,
              "filename": "response-options.js" } ],
        "docs":
          { "summary": "An object used to customize a response to an HTTP function call.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "status",
              "type": "number",
              "doc": "The response's HTTP status code.",
              "optional": true },
            { "name": "body",
              "type":
                [ "string",
                  "Buffer" ],
              "doc": "The response's body.",
              "optional": true },
            { "name": "headers",
              "type": "Object",
              "doc": "The response's header fields. The `headers` property contains an object of `key:value` pairs where the `key` is the header field name and the `value` is the header field value.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    { "notes":
        [ "You must publish your site at least once before using both the testing and\n production endpoints. After that, you save your site for changes you make to\n testing endpoints to take effect and you publish your site for changes you\n make to the production endpoints to take effect." ] },
  "menuSections": "APIs",
  "relatedContent":
    [ { "icon": "article",
        "text": "Exposing a Site API with HTTP Functions",
        "url": "https://support.wix.com/en/article/wix-code-exposing-a-site-api-with-http-functions" },
      { "icon": "example",
        "text": "Expose and Access Site APIs",
        "url": "https://www.wix.com/code/home/forum/wix-tips-and-updates/example-myapi-and-myapiclient" } ],
  "FAQs":
    [ { "title": "How do I debug an HTTP function?",
        "markdown": "Each HTTP function you create has two endpoints, one for your users and one for you to use for testing. The testing endpoint is similar to the regular one, but the suffix `-dev` is added to the  `_functions` in the URL. You can send requests to your testing endpoint in whatever way is most convenient for you, such as using a third-party tool like [Postman](https://www.getpostman.com/). [Learn more](https://support.wix.com/en/article/wix-code-exposing-a-site-api-with-http-functions#debugging)." },
      { "title": "How do I bypass collection permissions so I can access my collections from an HTTP function?",
        "markdown": "You can pass the [`WixDataOptions`](https://www.wix.com/code/reference/wix-data.html#WixDataOptions) object when performing a data operation." },
      { "title": "What can I do with HTTP functions?",
        "markdown": "You might want to use HTTP functions to:\n\n*   Integrate your site with an automation tool, such as [Zapier](https://zapier.com/) or [IFTTT](https://ifttt.com/).\n*   Receive notifications and information from external webhooks. \n*   Share a backend between your site and a native mobile application." } ] }