{ "name": "Checkout",
  "memberOf": "wix-pricing-plans",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 106,
      "filename": "pricing-plans.js" },
  "docs":
    { "summary": "Contains functionality for ordering your site's pricing plans.",
      "description":
        [ "Use the Pricing Plans Checkout API to create online orders for your [pricing plans](https://support.wix.com/en/article/pricing-plans-an-overview) from page code. ",
          "",
          " > **Note:**",
          " > The Pricing Plans APIs replace the deprecated Paid Plans APIs.",
          " > The deprecated APIs will continue to work, but they will not receive updates.",
          " > To keep any existing code compatible with future changes, see the",
          " > migration instructions for each function.",
          "",
          " ### Setup pricing plans",
          "",
          " To use APIs for checking out orders, first set up your site to:",
          "",
          " + Accept payments as described in [About Accepting Payments](https://support.wix.com/en/article/about-accepting-payments).",
          " + Offer membership plans as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans). When setting up your site to accept pricing plans, ",
          "   define the plans you want to offer [using the Dashboard](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans) or",
          "   [using the Pricing Plan APIs](wix-pricing-plans-backend/createplan).",
          "",
          "",
          " ### Checking out pricing plans",
          "",
          " Use the Checkout APIs to create orders and facilitate payment.",
          "",
          " The Checkout API allows you to: ",
          " + Create online orders and facilitate their payment.",
          " + Create your own customized ordering process. ",
          "",
          " Updating the properties of a pricing plan does not affect any current orders of the plan by members. ",
          " The existing orders retain their existing terms and pricing. ",
          " ",
          " Members can order pricing plans in 2 ways:",
          "",
          " + **Online**. Members order and pay for their plans on your site without manual intervention. This can also be done",
          "   in [backend code](wix-pricing-plans-backend/checkout/createOnlineOrder).",
          " + **Offline**. Members place their order by phone, text, or email. This can only be done",
          "   in [backend code](wix-pricing-plans-backend/checkout/createOfflineOrder).",
          "",
          " ### Drafts",
          "",
          " Orders created online are considered drafts until they are paid for. Drafts are not listed in the Subscriptions ",
          " dashboard page and are not saved in the `Orders` collection.",
          "",
          " Offline orders are never considered drafts even if they are not yet paid for. Unlike online orders, ",
          " offline orders are immediately listed in the Subscriptions dashboard page and saved in the `Orders` collection.",
          "",
          "",
          " ### Orders and subscriptions",
          " ",
          " Actions related to basic pricing plan management are available from the [Pricing Plans](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fmembership%3FreferralInfo%3Dvelo-docs)",
          " page in the Dashboard. These actions correspond to the functions available in the [Pricing Plans APIs](wix-pricing-plans/introduction).",
          "",
          " Every pricing plan order corresponds to a Wix subscription, including orders for single payment plans. You can see all orders from your site's",
          " [Subscriptions](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fsubscriptions%3FreferralInfo%3Dvelo-docs)",
          " page in the Dashboard. Actions available on this page correspond to the functions available in the [Orders APIs](wix-pricing-plans/orders/introduction) and the [Checkout APIs](wix-pricing-plans/checkout/introduction).",
          "",
          " > **Notes**: ",
          " >",
          " > + Wix pricing plans are 1 type of Wix subscriptions available from the Subscriptions page. For example, the Subscriptions page also includes Wix Stores subscriptions and Wix invoice subscriptions.",
          " >",
          " > + Pricing plans can be 1 of 3 different pricing models: `singlePaymentForDuration`, `singlePaymentUnlimited`, and `subscription`. Orders for all pricing plan models are displayed ",
          "     on the Subscriptions page, not just `subscription` type models. See [Pricing Models](wix-pricing-plans-backend/introduction#pricing-models) to learn more.",
          "",
          " ### Roles and permissions",
          "",
          " You need \"Manage Pricing Plans\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) to perform pricing ",
          " plan checkout functions. ",
          "",
          "",
          " ### Importing the APIs",
          "",
          " To use the Checkout API, import `checkout` from the `wix-pricing-plans` module.",
          "",
          "   ```javascript",
          "   import {checkout} from 'wix-pricing-plans';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "createOnlineOrder",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "The plan ID." },
            { "name": "startDate",
              "type": "Date",
              "doc": "The date the plan should start on. As of this date, the plan is active for the buyer. Defaults to today's date.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Orders.Order" ] },
            "doc": "Fulfilled - The created order." },
        "locations":
          [ { "lineno": 453,
              "filename": "pricing-plans.js" } ],
        "docs":
          { "summary": "Orders a pricing plan.",
            "description":
              [ "The `createOnlineOrder()` function returns a Promise that resolves to an `Order`",
                " object. ",
                "",
                " To process pricing plans on your site, first set up your site to offer pricing plans",
                " as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans).",
                " When setting up your site to accept pricing plans, [define the plans you want to offer](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans).",
                "",
                " Ordering a plan places an order for the plan, without actually purchasing it. You can then continue the",
                " payment process with [Wix Pay](https://www.wix.com/velo/reference/wix-pay), which applies the plan to the buyer on completion of payment.",
                "",
                " To understand how `createOnlineOrder()` is used in a customized pricing plan lifecycle,",
                " see [Customized Pricing Plan Purchases](wix-pricing-plans/introduction#customized-pricing-plan-purchases).",
                "",
                "",
                " > **Notes:**",
                " > + The pricing plan `createOnlineOrder()` and `createOfflineOrder()` functions ",
                " >     replace the deprecated paid plans `orderPlan()` function.",
                " >     The deprecated function will continue to work, but will not receive updates.",
                " >     To keep any existing code compatible with future changes, see the",
                " >     [`orderPlan()` migration instructions](wix-paid-plans/orderplan#migration-instructions).",
                " >     ",
                " > + To work with the Pricing Plans API, you need to publish your site." ],
            "links": [],
            "examples":
              [ { "title": "Order a pricing plan by clicking a button",
                  "body":
                    [ "import { checkout } from 'wix-pricing-plans';",
                      "",
                      "let planId = // Get the plan ID",
                      "",
                      "$w('#myOrderButton').onClick((event) => {",
                      "  checkout.createOnlineOrder(planId)",
                      "    .then((myOrder) => {",
                      "        const myOrderId = myOrder._id;",
                      "        const myWixPayOrderId = myOrder.wixPayOrderId;",
                      "    })",
                      "    .catch((err) => {",
                      "      console.log('No order created.');",
                      "      console.error(err);",
                      "    });",
                      "  });",
                      "",
                      "/* An object containing the new order. To pay for the ",
                      " * order, use the wixPayOrderId. ",
                      " *",
                      " * {",
                      " *  \"_id\": \"825f735f-a372-4079-92a2-98a2c72660b1\",",
                      " *  \"planId\": \"38b3021a-8b43-4a31-98cc-4a05b522b7d3\",",
                      " *  \"subscriptionId\": \"c910ec72-74db-4430-bf25-610eb12851de\",",
                      " *  \"wixPayOrderId\": \"fe11b7df-25bf-4b08-b421-368dec439617\",",
                      " *  \"buyer\": {",
                      " *    \"memberId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\",",
                      " *    \"contactId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\"",
                      " *  },",
                      " *  \"priceDetails\": {",
                      " *    \"subtotal\": \"10\",",
                      " *    \"total\": \"10\",",
                      " *    \"planPrice\": \"10\",",
                      " *    \"currency\": \"USD\",",
                      " *    \"subscription\": {",
                      " *      \"cycleDuration\": {",
                      " *        \"count\": 1,",
                      " *        \"unit\": \"MONTH\"",
                      " *      },",
                      " *      \"cycleCount\": 12",
                      " *    }",
                      " *  },",
                      " *  \"type\": \"ONLINE\",",
                      " *  \"status\": \"DRAFT\",",
                      " *  \"autoRenewCanceled\": false,",
                      " *  \"lastPaymentStatus\": \"UNPAID\",",
                      " *  \"startDate\": \"2021-10-24T09:32:22.243Z\",",
                      " *  \"endDate\": \"2022-10-24T09:32:22.243Z\",",
                      " *  \"pausePeriods\": [],",
                      " *  \"planName\": \"Diabetic Cooking\",",
                      " *  \"planDescription\": \"Special recipes for those with diabetes.\",",
                      " *  \"_createdDate\": \"2021-10-24T09:32:22.243Z\",",
                      " *  \"_updatedDate\": \"2021-10-24T09:32:22.243Z\"",
                      " * }",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "A full order plan scenario",
                  "body":
                    [ "/****************************************",
                      " * Code on a plan viewer dynamic page   *",
                      " ****************************************/",
                      "",
                      "// For navigating to a dynamic page:",
                      "import wixLocation from 'wix-location';",
                      "",
                      "$w.onReady( function () {",
                      "  $w('#viewButton').onClick((event) => {",
                      "    let $item = $w.at(event.context);",
                      "    let clickedItem = $item('#planDataset').getCurrentItem();",
                      "    let slug = clickedItem.slug;",
                      "    wixLocation.to('/plans/' + slug);",
                      "  });",
                      "});",
                      "",
                      "/****************************************",
                      " * Lightbox code                        *",
                      " ****************************************/",
                      "",
                      "// For working with a lightbox:",
                      "import wixWindow from 'wix-window';",
                      "",
                      "$w.onReady(function () {",
                      "  const receivedData = wixWindow.lightbox.getContext();",
                      "  $w('#orderData').text = receivedData;",
                      "});",
                      "",
                      "// This code assumes that the closeButton_click",
                      "// event handler was added using the \"Properties",
                      "// & Events\" panel. Make sure to do the same if you ",
                      "// copy this code.",
                      "// ",
                      "// Note that the \"Close\" button was created ",
                      "// using standard elements. It was not added ",
                      "// using Lightbox Settings.",
                      "",
                      "export function closeButton_click(event) {",
                      "    wixWindow.lightbox.close();",
                      "};",
                      "",
                      "/****************************************",
                      " * Code on a single-plan dynamic page   *",
                      " ****************************************/",
                      "",
                      "// For working with a lightbox:",
                      "import wixWindow from 'wix-window';",
                      "",
                      "import { checkout } from 'wix-pricing-plans';",
                      "",
                      "$w.onReady(function () {",
                      "  $w('#dynamicDataset').onReady( () => {",
                      "    const currentPlanObject = $w('#dynamicDataset').getCurrentItem();",
                      "    const planId = currentPlanObject._id;",
                      "    $w('#planName').text = currentPlanObject.name;",
                      "    $w('#planDescription').text = currentPlanObject.description;",
                      "",
                      "    $w('orderPlanButton').onClick((event) => {",
                      "      const order = checkout.createOnlineOrder(planId)",
                      "      .then((order) => {",
                      "        const planWithOrder = {",
                      "          plan: currentPlanObject,",
                      "          order: order",
                      "        };",
                      "        wixWindow.openLightbox('orderCreated', planWithOrder);",
                      "      });",
                      "    });",
                      "  });",
                      "});" ],
                  "extra":
                    { "description": "This example demonstrates a customized pricing plans scenario for ordering plans (without purchasing).\n\n >**Note**: In the interest of simplicity the code does not deal with display considerations or validations\n > that would normally be required to make sure users perform the flow as\n > intended.\n\nThe customization includes:\n\n + 2 dynamic pages, connected to the Plans collection: \n    + A plan viewer page for viewing all plans.\n    + A single-plan page for viewing a selected plan.\n + 1 lightbox for confirming the order. \n\n The plan viewer page has the following elements:\n\n + planDataset: Connects the page to the Plans collection.\n + planRepeater: Displays fields for each plan.\n + viewButton: When clicked, displays the single-plan page for the selected plan.\n\nThe single-plan page has the following elements:\n\n + dynamicDataset: Connects the page to the Plans collection.\n + planName: Text element that displays the plan's name.\n + planDescription: Text element that displays the plan's tagline.\n + orderPlanButton: Performs a request to order the plan.\n\n The orderCreated customized lightbox has the following elements: \n\n + orderData: The details of the order and its corresponding plan.\n + closeButton: A customized button that, when clicked, closes the lightbox. \n\n > **Lightbox Tips**: \n > \n > For this example to work, make sure that: \n > + The \"Automatically display lightbox on pages\" toggle is off.\n > + All options for \"How does this lightbox close?\" are toggled off." } },
                { "title": "A full purchase plan scenario including purchase",
                  "body":
                    [ "/****************************************",
                      " * Code on a plan viewer dynamic page   *",
                      " ****************************************/",
                      "",
                      "// For navigating to a dynamic page:",
                      "import wixLocation from 'wix-location';",
                      "",
                      "//...",
                      "",
                      "// The viewButton is in a repeater.",
                      "$w('#viewButton').onClick((event) => {",
                      "  let $item = $w.at(event.context);",
                      "  let clickedItem = $item('#planDataset').getCurrentItem();",
                      "  let slug = clickedItem.slug;",
                      "  wixLocation.to('/plans/' + slug);",
                      "});",
                      "",
                      "/****************************************",
                      " * Lightbox code                        *",
                      " ****************************************/",
                      "",
                      "// For working with a lightbox:",
                      "import wixWindow from 'wix-window';",
                      "",
                      "$w.onReady(function () {",
                      "  const receivedData = wixWindow.lightbox.getContext();",
                      "  $w('#orderData').text = receivedData;",
                      "});",
                      "",
                      "// This code assumes that the closeButton_click",
                      "// and buyButton_click event handlers were added ",
                      "// using the \"Properties & Events\" panel. Make ",
                      "// sure to do the same if you ",
                      "// copy this code.",
                      "// ",
                      "// Note also that the \"Close\" button was created ",
                      "// using standard elements. It was not added ",
                      "// using Lightbox Settings.",
                      "",
                      "export function closeButton_click(event) {",
                      "  wixWindow.lightbox.close({",
                      "    buy: false",
                      "  });",
                      "};",
                      "",
                      "export function buyButton_click(event) {",
                      "  wixWindow.lightbox.close({",
                      "    buy: true",
                      "  });",
                      "};",
                      "",
                      "/****************************************",
                      " * Code on a single-plan dynamic page   *",
                      " ****************************************/",
                      "",
                      "// For working with a lightbox:",
                      "import wixWindow from 'wix-window';",
                      "",
                      "// For processing payments:",
                      "import wixPay from 'wix-pay';",
                      "",
                      "import { checkout } from 'wix-pricing-plans';",
                      "",
                      "$w.onReady(function () {",
                      "  $w('#dynamicDataset').onReady(() => {",
                      "    const currentPlan = $w('#dynamicDataset').getCurrentItem();",
                      "    const planId = currentPlan._id;",
                      "    $w('#planName').text = currentPlan.name;",
                      "    $w('#planDescription').text = currentPlan.description;",
                      "",
                      "    $w('orderPlanButton').onClick((event) => {",
                      "      const order = checkout.createOnlineOrder(planId)",
                      "        .then((order) => {",
                      "          const planWithOrder = {",
                      "            plan: currentPlan,",
                      "            order: order",
                      "          };",
                      "          const planPrice = planWithOrder.plan.price;",
                      "          if (planPrice == '0') {         // The plan is free, no purchase necessary",
                      "            wixWindow.openLightbox('freeOrderCreated', planWithOrder);",
                      "          } else { ",
                      "            wixWindow.openLightbox('orderCreated', planWithOrder)",
                      "              .then((wantsToBuy) => {",
                      "                if (wantsToBuy) {",
                      "                  wixPay.startPayment(planWithOrder.order.wixPayOrderId)",
                      "                    .then((payment) => {",
                      "                      console.log(payment);",
                      "                    });",
                      "              } else {",
                      "                  console.log('Not buying now. Another time perhaps.');",
                      "                }",
                      "              });",
                      "          };",
                      "        });",
                      "    });",
                      "  });",
                      "});" ],
                  "extra":
                    { "description": "This example demonstrates a customized pricing plans scenario for ordering and purchasing a plan.     \n\n >**Note**: In the interest of simplicity the code does not deal with display considerations or validations\n > that would normally be required to make sure users perform the flow as\n > intended.\n\nThe customization includes:\n\n * 2 dynamic pages, connected to the Plans collection: \n    * A plan viewer page for viewing all plans.\n    * A single-plan page for viewing a selected plan.\n * 2 lightboxes for confirming free orders and purchasing non-free plans. \n\n The plan viewer page has the following elements:\n\n + planDataset: Connects the page to the Plans collection.\n + planRepeater: Displays fields for each plan.\n + viewButton: When clicked, displays the single-plan page for the selected plan.\n\nThe single-plan page has the following elements:\n\n + dynamicDataset: Connects the page to the Plans collection.\n + planName: Text element that displays the plan's name.\n + planDescription: Text element that displays the plan's tagline.\n + orderPlanButton: Performs a request to order the plan.\n\n The freeOrderCreated customized lightbox has the following elements: \n\n + orderData: The details of the order and its corresponding plan.\n + closeButton: A customized button that, when clicked, closes the lightbox. \n\n The orderCreated customized lightbox has the following elements: \n\n + orderData: The details of the order and its corresponding plan.\n + buyButton: A customized button that, when clicked, starts payment processing. \n + closeButton: A customized button that, when clicked, closes the lightbox. \n\n > **Lightbox Tips**: \n >\n > For this example to work, make sure that: \n > + The \"Automatically display lightbox on pages\" toggle is off.\n > + All options for \"How does this lightbox close?\" are toggled off." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "startOnlinePurchase",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "The plan ID." },
            { "name": "startDate",
              "type": "Date",
              "doc": "The date the plan should start on. As of this date, the plan is active for the buyer. Defaults to today's date.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans.Checkout.Purchase" ] },
            "doc": "Fulfilled - Details about the purchased plan." },
        "locations":
          [ { "lineno": 414,
              "filename": "pricing-plans.js" } ],
        "docs":
          { "summary": "Orders and purchases a pricing plan.",
            "description":
              [ "The `startOnlinePurchase()` function returns a Promise that resolves to a `Purchase`",
                " object when the member completes the purchase process. Depending on whether the plan ",
                " is free, the `Purchase` object returns different properties.",
                "",
                " To process pricing plans on your site, first set up your site to offer pricing plans",
                " as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans).",
                " When setting up your site to accept pricing plans, [ define the plans you want to offer](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans),",
                " including the payment method.",
                "",
                " Purchasing a plan orders the plan and continues the",
                " payment process with the [Wix Pay](https://www.wix.com/velo/reference/wix-pay) API. After payment is complete, the plan",
                " is assigned to the member.",
                "",
                " To understand the lifecycle of how `startOnlinePurchase()` is used,",
                " see [Direct Purchase of a Pricing Plan](wix-pricing-plans/introduction#direct-purchase-of-a-pricing-plan).",
                "",
                " > **Notes:**",
                " > + The pricing plan `startOnlinePurchase()` function",
                " >     replaces the deprecated paid plans `purchasePlan()` function.",
                " >     The deprecated function will continue to work, but will not receive updates.",
                " >     To keep any existing code compatible with future changes, see the",
                " >     [`purchasePlan()` migration instructions](wix-paid-plans/purchaseplan#migration-instructions).",
                " >     ",
                " > + To work with the Pricing Plans API, you need to publish your site." ],
            "links": [],
            "examples":
              [ { "title": "Purchase a non-free plan on button click",
                  "body":
                    [ "import { checkout } from 'wix-pricing-plans';",
                      "",
                      "let planId = // Get the ID for a non-free plan",
                      "",
                      "$w('#buyPlanButton').onClick((event) => {",
                      "  checkout.startOnlinePurchase(planId)",
                      "      .then((purchase) => {",
                      "          const myOrderId = purchase.order._id;",
                      "          const myWixPayOrderId = purchase.order.wixPayOrderId;",
                      "          const myWixPayStatus = purchase.wixPayStatus;",
                      "      });",
                      "});",
                      "",
                      "/* myPurchase object after payment processed",
                      " * {",
                      " *  \"order\": {",
                      " *    \"_id\": \"cab339d2-b021-40ac-ab0f-2b44c3f6dc60\",",
                      " *    \"planId\": \"fc7bca6b-c220-4679-9913-b93f2527bf3a\",",
                      " *    \"subscriptionId\": \"eef0fd26-b6cf-4116-ae56-b59e98dd0cce\",",
                      " *    \"wixPayOrderId\": \"d4008c3e-a8ee-472e-8917-b67ad3276183\",",
                      " *    \"buyer\": {",
                      " *      \"memberId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\",",
                      " *      \"contactId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\"",
                      " *    },",
                      " *    \"priceDetails\": {",
                      " *      \"subtotal\": \"0.1\",",
                      " *      \"total\": \"0.1\",",
                      " *      \"planPrice\": \"0.1\",",
                      " *      \"currency\": \"USD\",",
                      " *      \"subscription\": {",
                      " *        \"cycleDuration\": {",
                      " *          \"count\": 1,",
                      " *          \"unit\": \"MONTH\"",
                      " *        },",
                      " *        \"cycleCount\": 12",
                      " *      },",
                      " *      \"freeTrialDays\": 50",
                      " *    },",
                      " *    \"type\": \"ONLINE\",",
                      " *    \"status\": \"ACTIVE\",",
                      " *    \"autoRenewCanceled\": false,",
                      " *    \"lastPaymentStatus\": \"PAID\",",
                      " *    \"startDate\": \"2021-10-26T10:09:30.287Z\",",
                      " *    \"endDate\": \"2022-12-15T10:09:30.287Z\",",
                      " *    \"pausePeriods\": [],",
                      " *    \"planName\": \"Mexican Cooking\",",
                      " *    \"planDescription\": \"Mild and spicy recipes!\",",
                      " *    \"_createdDate\": \"2021-10-26T10:09:30.287Z\",",
                      " *    \"_updatedDate\": \"2021-10-26T10:09:30.287Z\"",
                      " *  },",
                      " *  \"wixPayStatus\": \"Successful\"",
                      " * }",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "Purchase a free plan that will start at a later date",
                  "body":
                    [ "import wixPricingPlans from 'wix-pricing-plans';",
                      "",
                      "let planId = // Get the ID for a free plan",
                      "let planStartDate = new Date('2022, 01, 14');",
                      "",
                      "$w('#buyPlanButton').onClick((event) => {",
                      "  wixPricingPlans.checkout.startOnlinePurchase(planId, planStartDate)",
                      "      .then((purchase) => {",
                      "          const myOrderId = purchase.order._id; ",
                      "      });",
                      "});",
                      "",
                      "/* myPurchase object returns immediately,",
                      " * and without wixPay properties,",
                      " * because no payment necessary.",
                      " * ",
                      " * {",
                      " *  \"_id\": \"545221b3-eb21-4a2a-a2e6-c4276afe3fbf\",",
                      " *  \"planId\": \"7251b9e9-3852-4e9f-958e-af630f039802\",",
                      " *  \"subscriptionId\": \"66c29482-ccf2-4069-b02a-fa3ca5f95502\",",
                      " *  \"buyer\": {",
                      " *    \"memberId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\",",
                      " *    \"contactId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\"",
                      " *  },",
                      " *  \"priceDetails\": {",
                      " *    \"subtotal\": \"0\",",
                      " *    \"total\": \"0\",",
                      " *    \"planPrice\": \"0\",",
                      " *    \"currency\": \"USD\",",
                      " *    \"singlePaymentUnlimited\": true",
                      " *  },",
                      " *  \"type\": \"ONLINE\",",
                      " *  \"status\": \"ACTIVE\",",
                      " *  \"lastPaymentStatus\": \"NOT_APPLICABLE\",",
                      " *  \"startDate\": \"2022-01-14T22:00:00.000Z\",",
                      " *  \"pausePeriods\": [],",
                      " *  \"planName\": \"Family Cooking\",",
                      " *  \"planDescription\": \"Weekly delivery of home cooking recipes and time-saving tips\",",
                      " *  \"_createdDate\": \"2021-10-26T10:29:12.199Z\",",
                      " *  \"_updatedDate\": \"2021-10-26T10:29:12.199Z\"",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Period",
        "locations":
          [ { "lineno": 396,
              "filename": "pricing-plans.js" } ],
        "docs":
          { "summary": "An object representing the period for which a plan is valid.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       title: 'Free plan purchased',",
                      "       data: event.order",
                      "     };",
                      "     wixData.insert('planEvents', orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       title: 'Regular plan purchased',",
                      "       data: event.order",
                      "     };",
                      "     wixData.insert('planEvents', orderData); ",
                      "  }",
                      "}",
                      "",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      "*",
                      "*   When the purchase is free, the `wixPayOrderId` is blank,",
                      "*   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"THB\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Platinum Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":false,",
                      "*         \"period\":{  ",
                      "*            \"amount\":1,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "*  }",
                      "*",
                      "*",
                      "*  Event object for a purchase that is valid until the user cancels:",
                      "*",
                      "*   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      "*   `validFor.forever.period.amount` is 0.",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"USD\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Gold Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":true,",
                      "*         \"period\":{  ",
                      "*            \"amount\":0,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "* }",
                      "*",
                      "*/" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "amount",
              "type": "number",
              "doc": "The number of units until the plan expires." },
            { "name": "unit",
              "type": "string",
              "doc": "Time period for billing the plan, such as `\"MONTH\"`." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Price",
        "locations":
          [ { "lineno": 359,
              "filename": "pricing-plans.js" } ],
        "docs":
          { "summary": "An object representing the price of a purchased plan.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       title: 'Free plan purchased',",
                      "       data: event.order",
                      "     };",
                      "     wixData.insert('planEvents', orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       title: 'Regular plan purchased',",
                      "       data: event.order",
                      "     };",
                      "     wixData.insert('planEvents', orderData); ",
                      "  }",
                      "}",
                      "",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      "*",
                      "*   When the purchase is free, the `wixPayOrderId` is blank,",
                      "*   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"THB\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Platinum Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":false,",
                      "*         \"period\":{  ",
                      "*            \"amount\":1,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "*  }",
                      "*",
                      "*",
                      "*  Event object for a purchase that is valid until the user cancels:",
                      "*",
                      "*   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      "*   `validFor.forever.period.amount` is 0.",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"USD\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Gold Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":true,",
                      "*         \"period\":{  ",
                      "*            \"amount\":0,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "* }",
                      "*",
                      "*/" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "currency",
              "type": "string",
              "doc": "Payment currency. A three-letter\n [ISO-4217](https://en.wikipedia.org/wiki/ISO_4217) currency code." },
            { "name": "amount",
              "type": "number",
              "doc": "The cost of the plan." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Purchase",
        "locations":
          [ { "lineno": 286,
              "filename": "pricing-plans.js" } ],
        "docs":
          { "summary": "An object representing a purchase for a non-free plan.",
            "links":
              [ "[startOnlinePurchase( )](wix-pricing-plans/checkout/startOnlinePurchase)" ],
            "examples":
              [ { "title": "Purchase a non-free plan on button click",
                  "body":
                    [ "import { checkout } from 'wix-pricing-plans';",
                      "",
                      "let planId = // Get the ID for a non-free plan",
                      "",
                      "$w('#buyPlanButton').onClick((event) => {",
                      "  checkout.startOnlinePurchase(planId)",
                      "      .then((purchase) => {",
                      "          const myOrderId = purchase.order._id;",
                      "          const myWixPayOrderId = purchase.order.wixPayOrderId;",
                      "          const myWixPayStatus = purchase.wixPayStatus;",
                      "      });",
                      "});",
                      "",
                      "/* myPurchase object after payment processed",
                      " * {",
                      " *  \"order\": {",
                      " *    \"_id\": \"cab339d2-b021-40ac-ab0f-2b44c3f6dc60\",",
                      " *    \"planId\": \"fc7bca6b-c220-4679-9913-b93f2527bf3a\",",
                      " *    \"subscriptionId\": \"eef0fd26-b6cf-4116-ae56-b59e98dd0cce\",",
                      " *    \"wixPayOrderId\": \"d4008c3e-a8ee-472e-8917-b67ad3276183\",",
                      " *    \"buyer\": {",
                      " *      \"memberId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\",",
                      " *      \"contactId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\"",
                      " *    },",
                      " *    \"priceDetails\": {",
                      " *      \"subtotal\": \"0.1\",",
                      " *      \"total\": \"0.1\",",
                      " *      \"planPrice\": \"0.1\",",
                      " *      \"currency\": \"USD\",",
                      " *      \"subscription\": {",
                      " *        \"cycleDuration\": {",
                      " *          \"count\": 1,",
                      " *          \"unit\": \"MONTH\"",
                      " *        },",
                      " *        \"cycleCount\": 12",
                      " *      },",
                      " *      \"freeTrialDays\": 50",
                      " *    },",
                      " *    \"type\": \"ONLINE\",",
                      " *    \"status\": \"ACTIVE\",",
                      " *    \"autoRenewCanceled\": false,",
                      " *    \"lastPaymentStatus\": \"PAID\",",
                      " *    \"startDate\": \"2021-10-26T10:09:30.287Z\",",
                      " *    \"endDate\": \"2022-12-15T10:09:30.287Z\",",
                      " *    \"pausePeriods\": [],",
                      " *    \"planName\": \"Mexican Cooking\",",
                      " *    \"planDescription\": \"Mild and spicy recipes!\",",
                      " *    \"_createdDate\": \"2021-10-26T10:09:30.287Z\",",
                      " *    \"_updatedDate\": \"2021-10-26T10:09:30.287Z\"",
                      " *  },",
                      " *  \"wixPayStatus\": \"Successful\"",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "order",
              "type": "wix-pricing-plans-backend.Orders.Order",
              "doc": "The order being purchased." },
            { "name": "wixPayStatus",
              "type": "string",
              "doc": "Payment status in [Wix Pay](https://www.wix.com/velo/reference/wix-pay). Omitted for free plans. \n One of:\n + `\"Successful\"`: Payment was successfully received.\n + `\"Pending\"`: Payment is pending payment provider approval.\n + `\"Failed\"`: Payment has failed.\n + `\"Chargeback\"`: Payment is chargeback.\n + `\"Refunded\"`: Payment was fully refunded.\n + `\"Offline\"`: Payment will be executed offline.\n + `\"PartiallyRefunded\"`: Payment was partially refunded.\n + `\"Cancelled\"`: Payment was cancelled and was not processed.\n + `\"Undefined\"`: Payment status is pending payment provider input.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ValidFor",
        "locations":
          [ { "lineno": 378,
              "filename": "pricing-plans.js" } ],
        "docs":
          { "summary": "An object representing how long a plan is valid.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       title: 'Free plan purchased',",
                      "       data: event.order",
                      "     };",
                      "     wixData.insert('planEvents', orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       title: 'Regular plan purchased',",
                      "       data: event.order",
                      "     };",
                      "     wixData.insert('planEvents', orderData); ",
                      "  }",
                      "}",
                      "",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      "*",
                      "*   When the purchase is free, the `wixPayOrderId` is blank,",
                      "*   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"THB\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Platinum Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":false,",
                      "*         \"period\":{  ",
                      "*            \"amount\":1,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "*  }",
                      "*",
                      "*",
                      "*  Event object for a purchase that is valid until the user cancels:",
                      "*",
                      "*   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      "*   `validFor.forever.period.amount` is 0.",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"USD\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Gold Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":true,",
                      "*         \"period\":{  ",
                      "*            \"amount\":0,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "* }",
                      "*",
                      "*/" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "forever",
              "type": "boolean",
              "doc": "If true, the plan does not expire." },
            { "name": "period",
              "type": "wix-pricing-plans.Checkout.Period",
              "doc": "Object containing the period for which the plan is valid." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }