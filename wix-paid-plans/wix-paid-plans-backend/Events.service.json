{ "name": "Events",
  "memberOf": "wix-paid-plans-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 9,
      "filename": "events.js" },
  "docs":
    { "summary": "**Deprecated.** \n The Wix paid plan events will continue to work, but a newer version is available at [wix-pricing-plans-backend](https://www.wix.com/velo/reference/wix-pricing-plans-backend/events).",
      "description":
        [ "> The Paid Plans Events APIs have been deprecated. They will continue to work, but we recommend that you migrate to the new Pricing Plans event APIs.",
          " >",
          " > Deprecated Paid Plans API functions trigger their original Paid Plans events. These events receive different event objects than the ones received when new Pricing Plans events are triggered. Make sure to accommodate for this in your code. Be aware of which events are being called and anticipate which event objects will be returned.",
          "",
          " Wix pricing plan events are fired on your site's backend when certain events occur related to site pricing plans.",
          " You can write event handlers that react to these events. Event handler functions",
          " receive data that corresponds to the event that fired. Use event handlers",
          " to create custom responses to pricing plan events.",
          "",
          " Note that backend events don't work when previewing your site.",
          "",
          " To add an event handler for pricing plan events, add an **events.js** file to the **Backend** section",
          " of your site if one does not already exist. All event handler functions for your",
          " site are defined in this file.",
          "",
          " Event handler functions are defined using the following pattern:",
          "",
          " ```javascript",
          " export function <wixAppName>_<eventName>(event) { }",
          " ```",
          "",
          " For example, an event handler that handles pricing plan purchases looks",
          " like this:",
          "",
          " ```javascript",
          " export function wixPaidPlans_onPlanPurchased(event) { }",
          " ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "onPlanPurchased",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-paid-plans-backend.Events.PlanPurchasedEvent",
              "doc": "The purchase data." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 45,
              "filename": "events.js" } ],
        "docs":
          { "summary": "**Deprecated.** \n This event will continue to work, but a newer version is available at [`wix-pricing-plans-backend.events.onPlanPurchased()`](wix-pricing-plans-backend/events/onplanpurchased).",
            "description":
              [ "> This event handler has been deprecated. See the [migration instructions](wix-paid-plans-backend/onPlanPurchased#migration-instructions) below to use the [`wix-pricing-plans-backend.events.onPlanPurchased()`](wix-pricing-plans-backend/events/onPlanPurchased) function instead.",
                " > ",
                " >",
                " > #### Migration Instructions",
                " >",
                " > If this function is already in your code, it will continue to work.",
                " > To stay compatible with future changes, migrate to",
                " > [`wix-pricing-plans-backend.events.onPlanPurchased()`](wix-pricing-plans-backend/events/onplanpurchased).",
                " >",
                " > To migrate to the new function:",
                " >",
                " > 1. Add the new import statement:",
                " >",
                " >    ```javascript",
                " >    import { events } from 'wix-pricing-plans-backend'",
                " >    ```",
                " >",
                " > 2. If you plan to migrate all functions that use `wixPaidPlans`,",
                " >    remove the original `import wixPaidPlans` statement.",
                " >",
                " > 3. Look for any code that uses `wixPaidPlansBackend.onPlanPurchased()`,",
                " >    and replace it with `events.onPlanPurchased()`.",
                " >    Update your code to work with the new `events.onPlanPurchased()`",
                " >    event and response properties.",
                " >",
                " > 4. Test your changes to make sure your code behaves as expected.",
                "",
                "",
                " The deprecated `onPlanPurchased()` event handler runs when a user purchases a pricing plan.",
                " The received `PlanPurchasedEvent` object contains order information about the plan, such as order ID, ",
                " and until when the order is valid, and so on.",
                " > **Note:** Backend events don't work when previewing your site." ],
            "links": [],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      " *",
                      " *   When the purchase is free, the `wixPayOrderId` is blank,",
                      " *   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"THB\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Platinum Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":false,",
                      " *         \"period\":{  ",
                      " *            \"amount\":1,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " *  }",
                      " *",
                      " *",
                      " *  Event object for a purchase that is valid until the user cancels:",
                      " *",
                      " *   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      " *   `validFor.forever.period.amount` is 0.",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"USD\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Gold Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":true,",
                      " *         \"period\":{  ",
                      " *            \"amount\":0,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>\n\n This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Order",
        "locations":
          [ { "lineno": 114,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing a new pricing plan order (subscription).",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      " *",
                      " *   When the purchase is free, the `wixPayOrderId` is blank,",
                      " *   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"THB\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Platinum Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":false,",
                      " *         \"period\":{  ",
                      " *            \"amount\":1,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " *  }",
                      " *",
                      " *",
                      " *  Event object for a purchase that is valid until the user cancels:",
                      " *",
                      " *   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      " *   `validFor.forever.period.amount` is 0.",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"USD\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Gold Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":true,",
                      " *         \"period\":{  ",
                      " *            \"amount\":0,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Order ID of the purchase of the plan, auto-generated when an order is created." },
            { "name": "paymentStatus",
              "type": "string",
              "doc": "Status of the payment for the plan. Can be `PAID`, `REFUNDED`, `FAILED`, `UNPAID`, and `PAYMENT_STATUS_UNDEFINED`." },
            { "name": "validUntil",
              "type": "Date",
              "doc": "Date and time until which the plan is valid." },
            { "name": "price",
              "type": "wix-paid-plans-backend.Events.Price",
              "doc": "Object containing the price of the plan." },
            { "name": "cancellationReason",
              "type": "string",
              "doc": "If the plan is cancelled, the reason why. One of: \n\n + `OWNER_CANCELED`: The owner cancelled.\n + `PAYMENT_PROVIDER_CANCELED`: The payment provider cancelled.\n + `PAYMENT_FAILED`: The payment failed.\n + `UOU_CANCELED`: The site member cancelled.\n + `CANCELLATION_REASON_UNDEFINED`: The reason is undefined." },
            { "name": "cancellationInitiator",
              "type": "string",
              "doc": "If the plan is cancelled, the cause of the cancellation. One of:\n\n + `\"UNDEFINED\"`: Cancellation initiator undefined.\n + `\"OWNER\"`: Order (subscription) was canceled by site owner. \n + `\"MEMBER\"`: Order (subscription) was canceled by member.\n + `\"PAYMENT_FAILURE\"`: Subscription was canceled because of payment failure.\n + `\"SETUP_FAILURE\"`: Subscription was canceled because of payment setup failure." },
            { "name": "validFrom",
              "type": "Date",
              "doc": "Date and time from which the plan is valid." },
            { "name": "planName",
              "type": "string",
              "doc": "Name of the plan." },
            { "name": "wixPayOrderId",
              "type": "string",
              "doc": "ID of the plan for Wix Pay. If plan is free, this ID is blank." },
            { "name": "recurring",
              "type": "boolean",
              "doc": "If the plan is recurring. If true, the price is deducted weekly, monthly, or yearly." },
            { "name": "dateCreated",
              "type": "Date",
              "doc": "Date and time the order was created." },
            { "name": "status",
              "type": "string",
              "doc": "Status of the order. Can be `ACTIVE`, `PENDING`, `CANCELED`, `EXPIRED`, `PENDING_CANCELLATION`, and `ORDER_STATUS_UNDEFINED`." },
            { "name": "roleID",
              "type": "string",
              "doc": "Role assigned after purchasing the plan." },
            { "name": "planDescription",
              "type": "string",
              "doc": "Description of the plan." },
            { "name": "memberId",
              "type": "string",
              "doc": "ID for the member who purchased the plan." },
            { "name": "orderType",
              "type": "string",
              "doc": "How the plan was purchased, either `ONLINE` pr `OFFLINE`." },
            { "name": "planId",
              "type": "string",
              "doc": "ID of the plan." },
            { "name": "validFor",
              "type": "wix-paid-plans-backend.Events.ValidFor",
              "doc": "Object containing properties about how long the plan is valid." },
            { "name": "freeTrialDays",
              "type": "number",
              "doc": "How many trial days were given to the subscriber of the plan. Available only for orders whose plans are recurring, meaning plans whose pricing model is `subscription`.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Period",
        "locations":
          [ { "lineno": 198,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing the period for which a plan is valid.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      " *",
                      " *   When the purchase is free, the `wixPayOrderId` is blank,",
                      " *   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"THB\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Platinum Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":false,",
                      " *         \"period\":{  ",
                      " *            \"amount\":1,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " *  }",
                      " *",
                      " *",
                      " *  Event object for a purchase that is valid until the user cancels:",
                      " *",
                      " *   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      " *   `validFor.forever.period.amount` is 0.",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"USD\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Gold Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":true,",
                      " *         \"period\":{  ",
                      " *            \"amount\":0,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "amount",
              "type": "number",
              "doc": "The number of units until the plan expires." },
            { "name": "unit",
              "type": "string",
              "doc": "Time period for billing the plan, such as `MONTH`." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PlanPurchasedEvent",
        "locations":
          [ { "lineno": 99,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing a new pricing plan purchase.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      " *",
                      " *   When the purchase is free, the `wixPayOrderId` is blank,",
                      " *   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"THB\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Platinum Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":false,",
                      " *         \"period\":{  ",
                      " *            \"amount\":1,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " *  }",
                      " *",
                      " *",
                      " *  Event object for a purchase that is valid until the user cancels:",
                      " *",
                      " *   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      " *   `validFor.forever.period.amount` is 0.",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"USD\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Gold Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":true,",
                      " *         \"period\":{  ",
                      " *            \"amount\":0,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "order",
              "type": "wix-paid-plans-backend.Events.Order",
              "doc": "Object containing the details about the plan's order." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Price",
        "locations":
          [ { "lineno": 161,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing the price of a purchased plan.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      " *",
                      " *   When the purchase is free, the `wixPayOrderId` is blank,",
                      " *   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"THB\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Platinum Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":false,",
                      " *         \"period\":{  ",
                      " *            \"amount\":1,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " *  }",
                      " *",
                      " *",
                      " *  Event object for a purchase that is valid until the user cancels:",
                      " *",
                      " *   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      " *   `validFor.forever.period.amount` is 0.",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"USD\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Gold Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":true,",
                      " *         \"period\":{  ",
                      " *            \"amount\":0,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "currency",
              "type": "string",
              "doc": "Payment currency. A three-letter\n [ISO-4217](https://en.wikipedia.org/wiki/ISO_4217) currency code." },
            { "name": "amount",
              "type": "number",
              "doc": "The cost of the plan." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ValidFor",
        "locations":
          [ { "lineno": 180,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing how long a plan is valid.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      " *",
                      " *   When the purchase is free, the `wixPayOrderId` is blank,",
                      " *   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"THB\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Platinum Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":false,",
                      " *         \"period\":{  ",
                      " *            \"amount\":1,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " *  }",
                      " *",
                      " *",
                      " *  Event object for a purchase that is valid until the user cancels:",
                      " *",
                      " *   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      " *   `validFor.forever.period.amount` is 0.",
                      " *",
                      " *   {  ",
                      " *    \"order\":{  ",
                      " *      \"paymentStatus\":\"PAID\",",
                      " *      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      " *      \"price\":{  ",
                      " *         \"currency\":\"USD\",",
                      " *         \"amount\":0",
                      " *      },",
                      " *      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      " *      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"planName\":\"valid 1 week\",",
                      " *      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"recurring\":false,",
                      " *      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      " *      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      " *      \"status\":\"ACTIVE\",",
                      " *      \"roleId\":\"\",",
                      " *      \"planDescription\":\"Gold Plan\",",
                      " *      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      " *      \"orderType\":\"ONLINE\",",
                      " *      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      " *      \"validFor\":{  ",
                      " *         \"forever\":true,",
                      " *         \"period\":{  ",
                      " *            \"amount\":0,",
                      " *            \"unit\":\"MONTH\"",
                      " *         }",
                      " *      }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "forever",
              "type": "boolean",
              "doc": "If true, the plan does not expire." },
            { "name": "period",
              "type": "wix-paid-plans-backend.Events.Period",
              "doc": "Object containing the period for which the plan is valid." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }