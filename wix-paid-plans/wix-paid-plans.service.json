{ "name": "wix-paid-plans",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "paid-plans.js" },
  "docs":
    { "summary": "**Deprecated.** \n The wix-paid-plans module will continue to work, but a newer version is available at [wix-pricing-plans](https://www.wix.com/velo/reference/wix-pricing-plans).",
      "description":
        [ "> The Paid Plans APIs have been deprecated. They will continue to work, but we recommend that you migrate to the new [Pricing Plans frontend](wix-pricing-plans.html) and [Pricing Plans backend](wix-pricing-plans-backend.html) APIs.",
          " > See each Paid Plans API function for migration instructions: ",
          " > ",
          " > | Deprecated Functions | New Functions |",
          " > | ---------------------------------------------- | ------------- |",
          " > | [`purchasePlan()`](wix-paid-plans/purchasePlan#migration-instructions) | [`wix-pricing-plans.startOnlinePurchase()`](wix-pricing-plans/checkout/startOnlinePurchase) |",
          " > | [`orderPlan()`](wix-paid-plans/orderPlan#migration-instructions) | [`wix-pricing-plans.checkout.createOnlineOrder()`](wix-pricing-plans/checkout/createonlineorder) and [`wix-pricing-plans-backend.checkout.createOfflineOrder()`](wix-pricing-plans-backend/checkout/createofflineorder) |",
          " > | [`getCurrentMemberOrders()`](wix-paid-plans/getCurrentMemberOrders#migration-instructions) | [`wix-pricing-plans.orders.listCurrentMemberOrders()`](wix-pricing-plans/orders/listCurrentMemberOrders) |",
          " > | [`cancelOrder()`](wix-paid-plans/cancelOrder#migration-instructions) | [`wix-pricing-plans.orders.requestCurrentMemberOrderCancellation()`](wix-pricing-plans/orders/requestCurrentMemberOrderCancellation) and [`wix-pricing-plans-backend.orders.cancelOrder()`](wix-pricing-plans-backend/orders/cancelorder) |",
          " > ",
          " > Deprecated Paid Plans API functions trigger their original Paid Plans events. These events receive different event objects than the ones received when new Pricing Plans events are triggered. Make sure to accommodate for this in your code. Be aware of which events are being called and anticipate which event objects will be returned.",
          "",
          " ",
          " ## Description",
          "",
          " The `wix-paid-plans` module contains functionality for working with",
          " pricing plans from client-side code.",
          "",
          " Using the Paid Plans API, you can build a customized membership plan experience.",
          "",
          " ### Setup",
          " ",
          " The Paid Plans API corresponds to the Pricing Plans app that you add to your site. The ",
          " app uses the term \"pricing plan\" while some of the Paid Plans API parameters and properties ",
          " are based on the term \"paidPlan.\"",
          "",
          " First, set up your site to:",
          "",
          " + Accept payments as described in [About Accepting Payments](https://support.wix.com/en/article/about-accepting-payments).",
          "",
          " + Offer membership plans as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans). ",
          "   When setting up your site to accept pricing plans, define the plans you want to offer either ",
          "   [with the Pricing Plans app](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans) or with the ",
          "   [Pricing Plans](wix-pricing-plans-backend.html) APIs.",
          "",
          "",
          " When plans are set up, you can use the API to:",
          " + Get information about pricing plans.",
          " + Let site members purchase a plan directly, as if they were using the Pricing Plans app.",
          " + Let site members purchase a plan using your own customized process.",
          " + Let site members cancel plan subscriptions (orders) that they have purchased.",
          "",
          "",
          "",
          "",
          "There are two flows for setting up pricing plans: Direct purchases and customized purchases.",
          "",
          "",
          "",
          " ### Direct Purchase of a Pricing Plan",
          "",
          " Direct purchasing is the same as when purchasing a plan with the Pricing Plans app. Everything is",
          " handled, from requesting the plan, through paying for the plan. If you need",
          " standard pricing plan processing, call the [`purchasePlan()`](wix-paid-plans.html#purchasePlan) function.",
          "",
          "",
          "",
          " The following outlines the steps in a direct-purchase lifecycle:",
          "",
          " 1. Get a list of membership plans from one of:",
          "    + A dataset connected to the Plans collection.",
          "    + A query on the Plans collection.",
          " 1. A *logged-in* site member selects a membership plan by clicking the plan or a button. (If the member is not logged-in, the",
          "    sign up page is displayed.)",
          " 1. The corresponding event handler calls a function to handle all stages of buying the plan (ordering, purchasing, and payment):",
          "    + If the plan is free, the plan is immediately ordered and is considered purchased (transaction status is \"Paid\").",
          "    + If the plan is not free, the plan is ordered but not yet purchased (transaction status is \"Pending\"). The site member fills in contact",
          "      details and selects a payment method (transaction status is now \"Paid\").",
          " 1. Handle additional updates when a plan is successfully purchased using the",
          "    [`onPlanPurchased()`](wix-pricing-plans-backend.Events.html#onPlanPurchased) event.",
          "",
          "",
          "",
          "",
          " ### Customized Pricing Plan Purchases",
          "",
          " Let site members order a plan for future purchase (such as after a member enters payment information).",
          " You customize the entire process of selecting, requesting, and",
          " paying for a plan. You can add elements, such as confirmation lightboxes and forms, to customize the member experience.",
          "",
          "",
          " To let the member request a plan, call the [`orderPlan()`](wix-paid-plans.html#orderPlan) function.",
          "",
          "",
          " The following outlines the steps for customizing the pricing plan purchase:",
          "",
          " 1. Get a list of membership plans from one of:",
          "    + A dataset connected to the Plans collection.",
          "    + A query on the Plans collection.",
          " 1. A *logged-in* site member selects a membership plan by clicking the plan or a button.  (If the member is not logged-in, the",
          "    sign up page is displayed.)",
          " 1. The corresponding event handler calls the [`orderPlan()`](wix-paid-plans.html#orderPlan) function to handle the initial order of the plan.",
          " 1. The site member uses a series of customized elements, such as lightboxes, and forms.",
          " 1. The site member uses the Wix Pay payment method to complete the purchase.",
          " 1. Handle additional updates when a plan is successfully purchased using the",
          "    [`onPlanPurchased()`](wix-pricing-plans-backend.Events.html#onPlanPurchased) event.",
          "",
          "",
          "",
          " For purchasing and ordering pricing plans, import `wixPaidPlans` from the `wix-paid-plans` module.",
          " For managing pricing plans, import `wixPricingPlansBackend` from the `wix-pricing-plans-backend` module.",
          "",
          "",
          "",
          "   ```javascript",
          "   import wixPaidPlans from 'wix-paid-plans';",
          "   import wixPricingPlansBackend from 'wix-pricing-plans-backend';",
          "   ```",
          "",
          "> **Note:** To work with the Paid Plans API, you need to publish your site." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "cancelOrder",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "orderId",
              "type": "string",
              "doc": "The plan subscription's order ID." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the subscription is cancelled.\nRejected - Error message." },
        "locations":
          [ { "lineno": 410,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "**Deprecated.** \n This function will continue to work, but a newer version is available at [`wix-pricing-plans.orders.requestCurrentMemberOrderCancellation()`](https://www.wix.com/velo/reference/wix-pricing-plans/orders/requestcurrentmemberordercancellation) and [`wix-pricing-plans-backend.orders.cancelOrder()`](wix-pricing-plans-backend/orders/cancelorder).",
            "description":
              [ "> This function has been deprecated. See the [migration instructions](wix-paid-plans/cancelOrder#migration-instructions) below to use the [`wix-pricing-plans.orders.requestCurrentMemberOrderCancellation()`](wix-pricing-plans/orders/requestCurrentMemberOrderCancellation) function instead.",
                " > ",
                " >",
                " > #### Migration Instructions",
                " >",
                " > If this function is already in your code, it will continue to work.",
                " > To stay compatible with future changes, migrate to",
                " > [`wix-pricing-plans.orders.requestCurrentMemberOrderCancellation()`](wix-pricing-plans/orders/requestCurrentMemberOrderCancellation).",
                " >",
                " > To migrate to the new function:",
                " >",
                " > 1. Add the new import statement:",
                " >",
                " >    ```javascript",
                " >    import { orders } from 'wix-pricing-plans'",
                " >    ```",
                " >",
                " > 2. If you plan to migrate all functions that use `wixPaidPlans`,",
                " >    remove the original `import wixPaidPlans` statement.",
                " >",
                " > 3. Look for any code that uses `wixPaidPlans.cancelOrder()`,",
                " >    and replace it with `orders.requestCurrentMemberOrderCancellation()`.",
                " >    Update your code to work with the new `orders.requestCurrentMemberOrderCancellation()`",
                " >    call and response properties.",
                " >",
                " > 4. Test your changes to make sure your code behaves as expected.",
                "",
                "  ",
                "",
                " The deprecated `cancelOrder()` function cancels an order (subscription) of a plan, after verifying that the site member is logged in.",
                "",
                " Keep in mind that a site member can order several subscriptions of the same plan. This API does not",
                " cancel the plan and remove all corresponding subscriptions. This API removes only the one order (subscription) of the plan.",
                " ",
                " If a plan's [Allow Plan Cancellation](https://support.wix.com/en/article/pricing-plans-allowing-clients-to-cancel-plans) ",
                " setting is disabled and the currently-logged in site member tries to cancel an order for the plan using the `cancelOrder()` function,",
                " an error is thrown. ",
                "",
                "> **Note:** To work with the Paid Plans API, you need to publish your site." ],
            "links": [],
            "examples":
              [ { "title": "Cancel an order (subscription) on button click",
                  "body":
                    [ "import wixPaidPlans from 'wix-paid-plans'; ",
                      "import wixWindow from 'wix-window';        ",
                      "",
                      "const orderId = // Get the order ID of the subscription to cancel",
                      "",
                      "// Call cancelOrder() when user clicks button",
                      "export function cancelButton_click(event) {  ",
                      "",
                      "  wixPaidPlans.cancelOrder(orderId) ",
                      "",
                      "    // Additional processing based on cancellation results",
                      "    .then(() => {",
                      "       wixWindow.openLightbox(\"orderCanceled\")",
                      "      })",
                      "     .catch((err) => {",
                      "       wixWindow.openLightbox(\"cancelFailed\")",
                      "     });",
                      "  } " ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>" } },
                { "title": "A full cancel order (subscription) scenario",
                  "body":
                    [ "import wixPaidPlans from 'wix-paid-plans';  ",
                      "import wixData from 'wix-data';             ",
                      "import wixUsers from 'wix-users';           ",
                      "import wixWindow from 'wix-window';         ",
                      "",
                      "$w.onReady(function () {",
                      "  $w(\"#subscriptionDataset\").onReady(() => {",
                      "",
                      "     // Get the order ID for the subscription to cancel",
                      "     const subscription = $w(\"#subscriptionDataset\").getCurrentItem();   ",
                      "     const orderId = subscription.orderId; ",
                      "",
                      "     $w(\"cancelButton\").onClick((event) => {",
                      "",
                      "       // Cancel the specific subscription of the plan ",
                      "       wixPaidPlans.cancelOrder(orderId)",
                      "        .then(() => {",
                      "",
                      "        // Let user know that cancellation succeeded",
                      "        wixWindow.openLightbox(\"orderCanceled\");",
                      "",
                      "        // Get details for updating status of existing subscription",
                      "        const user = wixUsers.currentUser;   ",
                      "        const toUpdate = {",
                      "           \"_id\":         subscription._id,",
                      "           \"planName\":    subscription.planName,",
                      "           \"planId\":      subscription.planId,",
                      "           \"orderId\":     subscription.orderId,",
                      "          \"memberId\":    user.id,",
                      "          \"dateCreated\": subscription.dateCreated,",
                      "          \"canceled\":    true,            // Set cancellation to true",
                      "          \"dateUpdated\": Date().toString()\t\t",
                      "        };",
                      "    ",
                      "          // Update subscription in collection to show the subscription is canceled",
                      "          wixData.update(\"Subscriptions\", toUpdate)",
                      "",
                      "       // Let user know if cancellation failed",
                      "         .catch((err) => {",
                      "          wixWindow.openLightbox(\"cancelFailed\");",
                      "        });",
                      "     })",
                      "    })",
                      "  })",
                      "})" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>\n\n\n This example demonstrates a full scenario for cancelling a pricing plan order (subscription).\n\n In the interest of simplicity the code does not deal with display considerations or validations\n that would normally be required to make sure users perform the flow as\n intended.\n\n Customized elements include:\n\n + A Subscriptions collection. This collection contains all plan orders (subscriptions) purchased by the site member and each subscription's status.\n + A cancelButton button that the site member clicks to cancel an order (subscription) of a plan.\n + A subscriptionDataset dataset that connects the page to the Subscriptions collection.\n + Two lightboxes, orderCanceled and cancelFailed, that notify the site member if a subscription is cancelled." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "getCurrentMemberOrders",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "offset",
              "type": "number",
              "doc": "The number of orders to skip before retrieving orders. If not set, `offset` is `0`.",
              "optional": true },
            { "name": "limit",
              "type": "number",
              "doc": "The maximum number of orders the function returns. If not set, `limit` is `50`, which is the maximum.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ { "name": "Array",
                      "typeParams":
                        [ "wix-paid-plans.Order" ] } ] },
            "doc": "Fulfilled - An array of order objects for the currently-logged in member.\nRejected - Error message." },
        "locations":
          [ { "lineno": 487,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "**Deprecated.** \n This function will continue to work, but a newer version is available at [`wix-pricing-plans.orders.listCurrentMemberOrders()`](https://www.wix.com/velo/reference/wix-pricing-plans/orders/listcurrentmemberorders).",
            "description":
              [ "> This function has been deprecated. See the [migration instructions](wix-paid-plans/getCurrentMemberOrders#migration-instructions) below to use the [`wix-pricing-plans.orders.listCurrentMemberOrders()`](wix-pricing-plans/orders/listCurrentMemberOrders) function instead.",
                " >",
                " > #### Migration Instructions",
                " >",
                " > If this function is already in your code, it will continue to work.",
                " > To stay compatible with future changes, migrate to",
                " > [`wix-pricing-plans.orders.listCurrentMemberOrders()`](wix-pricing-plans/orders/listCurrentMemberOrders).",
                " >",
                " > To migrate to the new function:",
                " >",
                " > 1. Add the new import statement:",
                " >",
                " >    ```javascript",
                " >    import { orders } from 'wix-pricing-plans'",
                " >    ```",
                " >",
                " > 2. If you plan to migrate all functions that use `wixPaidPlans`,",
                " >    remove the original `import wixPaidPlans` statement.",
                " >",
                " > 3. Look for any code that uses `wixPaidPlans.getCurrentMemberOrders()`,",
                " >    and replace it with `orders.listCurrentMemberOrders()`.",
                " >    Update your code to work with the new `orders.listCurrentMemberOrders()`",
                " >    call and response properties.",
                " >",
                " > 4. Test your changes to make sure your code behaves as expected.",
                "",
                "  ",
                "",
                " The deprecated `getCurrentMemberOrders()` function returns a Promise that resolves to an array of the orders (plan subscriptions) for the currently-logged in member.",
                "",
                "> **Note:** To work with the Paid Plans API, you need to publish your site." ],
            "links": [],
            "examples":
              [ { "title": "Get the orders (subscriptions) of the current member on button click",
                  "body":
                    [ "import wixPaidPlans from 'wix-paid-plans'; ",
                      "",
                      "// Call getCurrentMemberOrders() when user clicks button",
                      "export function getOrdersButton_click(event) {  ",
                      "",
                      "  wixPaidPlans.getCurrentMemberOrders() ",
                      "",
                      "    // Display orders in a table",
                      "    .then ((orders) => {",
                      "       $w(\"#orderTable\").rows = orders;",
                      "      })",
                      "     .catch((err) => {",
                      "       console.log(err);",
                      "     });",
                      "  } ",
                      "",
                      "/* In this case, an orders array of two order items:",
                      " * [",
                      " *   {",
                      " *     \"id\":\"d3e95-a4a1-1d33-fea1-6ec0\",",
                      " *     \"planId\":\"8050a0-b2c1-4d69-abc2-ac9ab3\",",
                      " *     \"memberId\":\"4333a-d1c3-13a3-d11a-0374ba\",",
                      " *     \"roleId\":\"8050a-d858-29a1-444a-c9ab31\",",
                      " *     \"orderType\":\"ONLINE\",",
                      " *     \"status\":\"ACTIVE\",",
                      " *     \"wixPayOrderId\":\"88265-1ea3-29f1-13a1-e159\",",
                      " *     \"paymentStatus\":\"PAID\",",
                      " *     \"price\":{",
                      " *       \"amount\":32,",
                      " *       \"currency\":\"USD\"",
                      " *     },",
                      " *     \"planName\":\"Premium\",",
                      " *     \"planDescription\":\"Our most exclusive plan.\",",
                      " *     \"recurring\":true,",
                      " *     \"validFor\": {",
                      " *       \"forever\":false,",
                      " *       \"period\": {",
                      " *         \"amount\":6,",
                      " *         \"unit\":\"MONTH\"",
                      " *        }",
                      " *     },",
                      " *     \"validFrom\":\"2020-02-17T12:00:58.735Z\",",
                      " *     \"validUntil\":\"2020-08-17T12:00:58.735Z\",",
                      " *     \"dateCreated\":\"2020-02-17T12:00:58.735Z\",",
                      " *     \"cancellationInitiator\":\"UNDEFINED\"",
                      " *   },",
                      " *   {",
                      " *     \"id\":\"7861d30c-1ea3-29f1-13a1-ad05de8\",",
                      " *     \"planId\":\"8050a0-b2c1-4d69-abc2-ac9ab3\",",
                      " *     \"memberId\":\"4333a-a3c1-13a3-d11a-0374ba\",",
                      " *     \"roleId\":\"8050a-1a43-321a-40c2-47ac9ab3\",",
                      " *     \"orderType\":\"ONLINE\",",
                      " *     \"status\":\"ACTIVE\",",
                      " *     \"wixPayOrderId\":\"9215ac1-1a43-428f-21c3-733c4668\",",
                      " *     \"paymentStatus\":\"PAID\",",
                      " *     \"price\":{",
                      " *       \"amount\":32,",
                      " *       \"currency\":\"USD\"",
                      " *     },",
                      " *     \"planName\":\"Basic\",",
                      " *     \"planDescription\":\"Our most basic plan\",",
                      " *     \"recurring\":true,",
                      " *     \"validFor\": {",
                      " *       \"forever\":false,",
                      " *        \"period\": {",
                      " *           \"amount\":6,",
                      " *           \"unit\":\"MONTH\"",
                      " *       }",
                      " *     },",
                      " *     \"validFrom\":\"2020-02-17T12:00:36.875Z\",",
                      " *     \"validUntil\":\"2020-08-17T12:00:36.875Z\",",
                      " *     \"dateCreated\":\"2020-02-17T12:00:36.875Z\",",
                      " *     \"cancellationInitiator\":\"UNDEFINED\"",
                      " *   }",
                      " * ]",
                      " */" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>" } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "orderPlan",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "The plan ID." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-paid-plans.OrderResult" ] },
            "doc": "Fulfilled - The created order.\nRejected - Error message." },
        "locations":
          [ { "lineno": 293,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "**Deprecated**. \n This function will continue to work, but newer versions are available \n at [`wix-pricing-plans.checkout.createOnlineOrder()`](https://www.wix.com/velo/reference/wix-pricing-plans/checkout/createonlineorder)\n and \n at [`wix-pricing-plans-backend.checkout.createOfflineOrder()`](https://www.wix.com/velo/reference/wix-pricing-plans-backend/checkout/createofflineorder).",
            "description":
              [ "> This function has been deprecated. See the [migration instructions](wix-paid-plans/orderPlan#migration-instructions) below to use the [`wix-pricing-plans.checkout.createOnlineOrder()`](wix-pricing-plans/checkout/createonlineorder)",
                " > and [`wix-pricing-plans-backend.checkout.createOfflineOrder()`](wix-pricing-plans-backend/checkout/createofflineorder) functions instead.",
                " > ",
                " > ",
                " > #### Migration Instructions",
                " >",
                " > If this function is already in your code, it will continue to work.",
                " > To stay compatible with future changes, migrate to",
                " > [`wix-pricing-plans.checkout.createOnlineOrder()`](wix-pricing-plans/checkout/createOnlineOrder)",
                " > or [`wix-pricing-plans-backend.checkout.createOfflineOrder()`](wix-pricing-plans-backend/checkout/createOfflineOrder).",
                " >",
                " > To migrate to the new `createOnlineOrder()` or `createOfflineOrder()` function:",
                " >",
                " > 1. Add the new import statement:",
                " >    ",
                " >    ```javascript",
                " >    import { checkout } from 'wix-pricing-plans'",
                " >    ```",
                " >    or ",
                " >    ```javascript",
                " >    import { checkout } from 'wix-pricing-plans-backend'",
                " >    ```",
                " >    (The `createOfflineOrder()` function is only available in the backend.)",
                " >    ",
                " > 2. If you plan to migrate all functions that use `wixPaidPlans`,",
                " >    remove the original `import wixPaidPlans` statement.",
                " >    ",
                " > 3. Look for any code that uses `wixPaidPlans.orderPlan()`,",
                " >    and replace it with either `checkout.createOnlineOrder()` ",
                " >    or `checkout.createOfflineOrder()`.",
                " >    Update your code to work with the new function's",
                " >    call and response properties.",
                " >    ",
                " > 4. Test your changes to make sure your code behaves as expected.",
                "",
                " ",
                "",
                " The deprecated `orderPlan()` function returns a Promise that resolves to an `OrderResult`",
                " object when the member completes the order process. Use this result only for display purposes.",
                "",
                "",
                " #### Setup ",
                "",
                " To process pricing plans on your site, first set up your site to offer pricing plans",
                " as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans).",
                " When setting up your site to accept pricing plans, [define the plans you want to offer](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans).",
                "",
                " #### About Ordering Plans ",
                "",
                " Ordering a plan places an order for the plan, without actually purchasing it. You can then continue the",
                " payment process with the Wix Pay payment method, which applies the plan to the member on completion of payment.",
                "",
                " To understand how `orderPlan()` is used in a customized pricing plan lifecycle,",
                " see [Customized Pricing Plan Purchases](wix-paid-plans/introduction#customized-pricing-plan-purchases).",
                "",
                "> **Note:** To work with the Paid Plans API, you need to publish your site." ],
            "links": [],
            "examples":
              [ { "title": "Order a pricing plan",
                  "body":
                    [ "import wixPaidPlans from 'wix-paid-plans';",
                      "",
                      "let planId = // Get the plan ID",
                      "",
                      "export function myOrderButton_click(event) {",
                      "  wixPaidPlans.orderPlan(planId)",
                      "    .then((myOrder) => {",
                      "        let myOrderId = myOrder.orderId;",
                      "        let myWixPayOrderId = myOrder.wixPayOrderId;",
                      "    });",
                      "  }",
                      "",
                      "/* myOrder:",
                      " * {",
                      " *  \"orderId\": \"b3fb3a4d-c223-4040-8bc3-8dfdefb1bafc\",",
                      " *  \"wixPayOrderId\": \"06af8fd6-6c82-4b51-bc08-0b556aad6f4f\"",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>" } },
                { "title": "A full order plan scenario",
                  "body":
                    [ "/****************************************",
                      " * Code on a plan viewer page           *",
                      " ****************************************/",
                      "",
                      "// For navigating to a dynamic page:",
                      "import wixLocation from 'wix-location';",
                      "",
                      "// If the site visitor clicks a plan's button,",
                      "// the browser relocates to that plan's dynamic page,",
                      "// with more details.",
                      "",
                      "$w.onReady(function () {",
                      "   $w('#viewButton').onClick((event) => {",
                      "      let slug = $w('#planDataset').getCurrentItem().slug;",
                      "",
                      "      // We customized the URL to the plan's dynamic",
                      "      // page when we created it. ",
                      "      wixLocation.to('/plans/'+ slug)",
                      "  })",
                      "});",
                      "",
                      "/****************************************",
                      "* Code on a plan ordering dynamic page",
                      "*****************************************/",
                      "// For a lightbox:",
                      "import wixWindow from 'wix-window';",
                      "// For Wix Pay, but any payment method is OK:",
                      "import wixPay from 'wix-pay';",
                      "// For pricing plans",
                      "import paidPlans from 'wix-paid-plans';",
                      "",
                      "",
                      "$w.onReady(function () {",
                      "",
                      "  // When the collection is accessible...",
                      "  $w('#dynamicDataset').onReady(() => {",
                      "",
                      "  // Assign the currently-selected plan to currentPlanObject",
                      "  const currentPlanObject = $w('#dynamicDataset').getCurrentItem();",
                      "",
                      "  // Display details about the current plan",
                      "  $w('#planName').text = currentPlanObject.name;",
                      "  $w('#planDescription').text = currentPlanObject.description;",
                      "",
                      "  // Assign the currently-selected plan's ID to planId. This",
                      "  // unique identifier will be used for ordering the plan.",
                      "  const planId = currentPlanObject._id;",
                      "",
                      "    // Order the plan by button click",
                      "    $w('orderPlanButton').onClick((event) => {",
                      "",
                      "    // Provide the plan's ID to the",
                      "    // orderPlan() function. The function returns",
                      "    // an object containing the plan's properties.",
                      "      const order = paidPlans.orderPlan(planId)",
                      "        .then((newOrder) => {",
                      "",
                      "          const planWithOrder = {",
                      "            plan: currentPlanObject,",
                      "            order: newOrder",
                      "          };",
                      "",
                      "          // Use a customized lightbox to continue processing the order.",
                      "          wixWindow.openLightbox('orderCreated', planWithOrder)",
                      "            .then((data) => {",
                      "              const receivedData = data;",
                      "            });",
                      "        });",
                      "    });",
                      "  });",
                      "});" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>\n\n\n This example demonstrates a customized pricing plans scenario. The customized elements include:\n\n\n + An intermediary page that displays all plans before ordering\n + A lightbox\n\n\n In the interest of simplicity the code does not deal with display considerations or validations\n that would normally be required to make sure users perform the flow as\n intended.\n\n The code assumes 2 pages:\n\n + The plan viewer page lists the plans and lets the member pick one.\n\n + A dynamic page shows one plan's details and lets the member order the plan.\n\n\n The plan viewer page has the following elements:\n\n + planDataset: Connects the page to the Plans collection.\n + planRepeater: Displays fields for each plan.\n + viewButton: Displays the ordering page for the selected plan.\n\n\n\nThe dynamic page has the following elements:\n\n + dynamicDataset: Connects the page to the Plans collection.\n + planName: Text element that displays the plan's name.\n + planDescription: Text element that displays the plan's tagline.\n + orderPlanButton: Performs a request to order the plan.\n + orderCreated: A customized lightbox. The lightbox could, for example,\n   display plan details and ask for additional confirmation." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "purchasePlan",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "The plan ID." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-paid-plans.PurchaseResult" ] },
            "doc": "Fulfilled - The created purchase." },
        "locations":
          [ { "lineno": 222,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "**Deprecated.** \n This function will continue to work, but a newer version is available \n at [`wix-pricing-plans.startOnlinePurchase()`](https://www.wix.com/velo/reference/wix-pricing-plans/checkout/startonlinepurchase).",
            "description":
              [ "> This function has been deprecated. See the [migration instructions](wix-paid-plans/purchasePlan#migration-instructions) below to ",
                " > use the [`wix-pricing-plans.startOnlinePurchase()`](wix-pricing-plans/checkout/startOnlinePurchase) function instead.",
                " >",
                " > #### Migration Instructions",
                " >",
                " > If this function is already in your code, it will continue to work.",
                " > To stay compatible with future changes, migrate to",
                " > [`wix-pricing-plans.checkout.startOnlinePurchase()`](wix-pricing-plans/checkout/startOnlinePurchase).",
                " >",
                " > To migrate to the new function:",
                " >",
                " > 1. Add the new import statement:",
                " >",
                " >    ```javascript",
                " >    import { checkout } from 'wix-pricing-plans'",
                " >    ```",
                " >",
                " > 2. If you plan to migrate all functions that use `wixPaidPlans`,",
                " >    remove the original `import wixPaidPlans` statement.",
                " >",
                " > 3. Look for any code that uses `wixPaidPlans.purchasePlan()`,",
                " >    and replace it with `checkout.startOnlinePurchase()`.",
                " >    Update your code to work with the new `checkout.startOnlinePurchase()`",
                " >    call and response properties.",
                " >",
                " > 4. Test your changes to make sure your code behaves as expected.",
                "",
                "  ",
                "",
                " The deprecated `purchasePlan()` function returns a Promise that resolves to either a `PurchaseResult`",
                " object when the member completes the purchase process for a non-free plan, or a `PurchaseResultFree`",
                " object when the member completes the purchase process for a free plan. Use this result only for display purposes.",
                "",
                " #### Setup ",
                "",
                " To process pricing plans on your site, first set up your site to offer pricing plans",
                " as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans).",
                " When setting up your site to accept pricing plans, [ define the plans you want to offer](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans),",
                " including the payment method.",
                "",
                " #### About Purchasing Plans ",
                "",
                " Purchasing a plan orders the plan, and continues the",
                " payment process with the Wix Pay API. After payment is complete, the plan",
                " is assigned to the member.",
                "",
                " To understand the lifecycle of how `purchasePlan()` is used,",
                " see [Direct Purchase of a Pricing Plan](wix-paid-plans/introduction#direct-purchase-of-a-pricing-plan).",
                "",
                "> **Note:** To work with the Paid Plans API, you need to publish your site." ],
            "links": [],
            "examples":
              [ { "title": "Purchase a non-free plan on button click",
                  "body":
                    [ "import wixPaidPlans from 'wix-paid-plans';",
                      "import wixPay from 'wix-pay';",
                      "",
                      "let planId = // Get the plan ID for a non-free plan",
                      "",
                      "export function myPurchaseButton_click(event) {",
                      "  wixPaidPlans.purchasePlan(planId)",
                      "    .then((myPurchase) => {",
                      "        let myOrderId = myPurchase.orderId;",
                      "        let myWixPayOrderId = myPurchase.wixPayOrderId;",
                      "        let myWixPayStatus = myPurchase.wixPayStatus;",
                      "    });",
                      "  }",
                      "",
                      "/* myPurchase:",
                      " * {",
                      " *  \"orderId\": \\\"b3fb3a4d-c223-4040-8bc3-8dfdefb1bafc\\\",",
                      " *  \"wixPayOrderId\": \\\"06af8fd6-6c82-4b51-bc08-0b556aad6f4f\\\",",
                      " *  \"wixPayStatus\": \\\"Successful\"",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>" } },
                { "title": "Purchase a free plan on button click",
                  "body":
                    [ "import wixPaidPlans from 'wix-paid-plans';",
                      "",
                      "let planId = // Get the plan ID for a free plan",
                      "",
                      "export function myPurchaseButton_click(event) {",
                      "  wixPaidPlans.purchasePlan(planId)",
                      "    .then((myPurchase) => {",
                      "        let myOrderId = myPurchase.orderId;",
                      "    });",
                      "  }",
                      "",
                      "",
                      "/* myPurchase:",
                      " * {",
                      " *  \"_id\": \"545221b3-eb21-4a2a-a2e6-c4276afe3fbf\",",
                      " *  \"planId\": \"7251b9e9-3852-4e9f-958e-af630f039802\",",
                      " *  \"subscriptionId\": \"66c29482-ccf2-4069-b02a-fa3ca5f95502\",",
                      " *  \"buyer\": {",
                      " *    \"memberId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\",",
                      " *    \"contactId\": \"4c47c608-cfa8-4037-93ac-738f09560ed3\"",
                      " *  },",
                      " *  \"priceDetails\": {",
                      " *    \"subtotal\": \"0\",",
                      " *    \"total\": \"0\",",
                      " *    \"planPrice\": \"0\",",
                      " *    \"currency\": \"USD\",",
                      " *    \"singlePaymentUnlimited\": true",
                      " *  },",
                      " *  \"type\": \"ONLINE\",",
                      " *  \"status\": \"ACTIVE\",",
                      " *  \"lastPaymentStatus\": \"NOT_APPLICABLE\",",
                      " *  \"startDate\": \"2022-01-14T22:00:00.000Z\",",
                      " *  \"pausePeriods\": [],",
                      " *  \"planName\": \"Family Cooking\",",
                      " *  \"planDescription\": \"Weekly delivery of home cooking recipes and time-saving tips\",",
                      " *  \"createdDate\": \"2021-10-26T10:29:12.199Z\",",
                      " *  \"updatedDate\": \"2021-10-26T10:29:12.199Z\"",
                      " * }",
                      " */" ],
                  "extra":
                    { "description": "<span style=\"color:#FF5252;\">This example uses a deprecated function.</span>" } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Order",
        "locations":
          [ { "lineno": 159,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing a pricing plan order (subscription).",
            "links":
              [ "[getCurrentMemberOrders( )](#getCurrentMemberOrders)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Order ID of the purchase of the plan, auto-generated when an order is created." },
            { "name": "paymentStatus",
              "type": "string",
              "doc": "Status of the payment for the plan. Can be `PAID`, `FAILED`, `UNPAID`, and `PAYMENT_STATUS_UNDEFINED`." },
            { "name": "validUntil",
              "type": "Date",
              "doc": "Date and time until which the plan is valid." },
            { "name": "price",
              "type": "wix-paid-plans.Price",
              "doc": "Object containing the price of the plan." },
            { "name": "cancellationInitiator",
              "type": "string",
              "doc": "If the plan is cancelled, the cause of the cancellation. One of:\n\n + `\"UNDEFINED\"`: Cancellation initiator unknown.\n + `\"OWNER\"`: Order (subscription) was canceled by site owner. \n + `\"MEMBER\"`: Order (subscription) was canceled by member.\n + `\"PAYMENT_FAILURE\"`: Subscription was canceled because of payment failure.\n + `\"SETUP_FAILURE\"`: Subscription was canceled because of payment setup failure." },
            { "name": "validFrom",
              "type": "Date",
              "doc": "Date and time from which the plan is valid." },
            { "name": "planName",
              "type": "string",
              "doc": "Name of the plan." },
            { "name": "wixPayOrderId",
              "type": "string",
              "doc": "ID of the plan for Wix Pay. If plan is free, this ID is blank." },
            { "name": "recurring",
              "type": "boolean",
              "doc": "If the plan is recurring. If true, the price is deducted weekly, monthly, or yearly." },
            { "name": "dateCreated",
              "type": "Date",
              "doc": "Date and time the order was created." },
            { "name": "status",
              "type": "string",
              "doc": "Status of the order. Can be `ACTIVE`, `PENDING`, `CANCELED`, `EXPIRED`, `PENDING_CANCELLATION`, and `ORDER_STATUS_UNDEFINED`." },
            { "name": "roleID",
              "type": "string",
              "doc": "Role assigned after purchasing the plan." },
            { "name": "planDescription",
              "type": "string",
              "doc": "Description of the plan." },
            { "name": "memberId",
              "type": "string",
              "doc": "ID for the member who purchased the plan." },
            { "name": "orderType",
              "type": "string",
              "doc": "How the plan was purchased, either `ONLINE` or `OFFLINE`." },
            { "name": "planId",
              "type": "string",
              "doc": "ID of the plan." },
            { "name": "validFor",
              "type": "wix-paid-plans.ValidFor",
              "doc": "Object containing properties about how long the plan is valid." },
            { "name": "freeTrialDays",
              "type": "number",
              "doc": "How many trial days were given to the subscriber of the plan.  Available only for orders whose plans are recurring, meaning plans whose pricing model is `subscription`.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "OrderResult",
        "locations":
          [ { "lineno": 149,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing an order result.",
            "links":
              [ "[orderPlan( )](wix-paid-plans.html#orderPlan)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "orderId",
              "type": "string",
              "doc": "ID of the order." },
            { "name": "wixPayOrderId",
              "type": "string",
              "doc": "Wix Pay ID of the order being purchased." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Period",
        "locations":
          [ { "lineno": 212,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing the period for which a plan is valid.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "amount",
              "type": "number",
              "doc": "The number of units until the plan expires." },
            { "name": "unit",
              "type": "string",
              "doc": "Time period for billing the plan, such as `MONTH`." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Price",
        "locations":
          [ { "lineno": 191,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing the price of a purchased plan.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "currency",
              "type": "string",
              "doc": "Payment currency. A three-letter\n [ISO-4217](https://en.wikipedia.org/wiki/ISO_4217) currency code." },
            { "name": "amount",
              "type": "number",
              "doc": "The cost of the plan." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PurchaseResult",
        "locations":
          [ { "lineno": 121,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing a purchase result for a non-free plan.",
            "links":
              [ "[purchasePlan( )](wix-paid-plans.html#purchasePlan)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "orderId",
              "type": "string",
              "doc": "ID of the order being purchased." },
            { "name": "wixPayStatus",
              "type": "string",
              "doc": "Payment status in Wix Pay. One of:\n\n + \"`Successful`\": Payment was successfully received.\n + \"`Pending`\": Payment is pending payment provider approval.\n + \"`Failed`\": Payment has failed.\n + \"`Chargeback`\": Payment is a chargeback.\n + \"`Refunded`\": Payment was fully refunded.\n + \"`Offline`\": Payment will be executed offline.\n + \"`PartiallyRefunded`\": Payment was partially refunded.\n + \"`Cancelled`\": Payment was cancelled and was not processed.\n + \"`Undefined`\": Payment status is pending payment provider input." },
            { "name": "wixPayOrderId",
              "type": "string",
              "doc": "Wix Pay ID of the order being purchased. Returned for non-free plans." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PurchaseResultFree",
        "locations":
          [ { "lineno": 141,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing a purchase result for a free plan.",
            "links":
              [ "[purchasePlan( )](wix-paid-plans.html#purchasePlan)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "orderId",
              "type": "string",
              "doc": "ID of the order being purchased." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ValidFor",
        "locations":
          [ { "lineno": 202,
              "filename": "paid-plans.js" } ],
        "docs":
          { "summary": "An object representing how long a plan is valid.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "forever",
              "type": "boolean",
              "doc": "If true, the plan does not expire." },
            { "name": "period",
              "type": "wix-paid-plans.Period",
              "doc": "Object containing the period for which the plan is valid." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    { "scopes":
        [ "frontend" ] } }