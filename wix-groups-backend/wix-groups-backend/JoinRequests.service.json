{ "name": "JoinRequests",
  "memberOf": "wix-groups-backend",
  "mixes": [],
  "labels": [],
  "location":
    { "lineno": 1,
      "filename": "joinRequests.js" },
  "docs":
    { "summary": "The JoinRequests API provides functionality for managing requests to join a group.",
      "description":
        [ "The JoinRequests API provides functionality for managing requests to join a group.",
          "",
          "> **Notes:** ",
          "+ This module is only relevant for private groups. ",
          "+ When a group's `privacyStatus` is updated from `PRIVATE` to `PUBLIC`, all pending join requests for that group are automatically approved.",
          "+ When a group's `privacyStatus` is updated from `PRIVATE` to `SECRET`, all pending join requests for that group are automatically rejected. ",
          "+ A site member can only join a group if they have a [public profile](\"https://support.wix.com/en/article/wix-groups-member-privacy-settings-for-groups\").",
          "  ",
          "### Settings for Typical Use Case",
          "+ Group members with group admin permissions determine who can join their group by setting their group [privacy level](https://support.wix.com/en/article/wix-groups-about-groups#your-groups-privacy-permissions).",
          "+ If a group's privacy level is set to `PRIVATE`, a site member can request to join the group on your site's Groups List page.",
          "+ Only site admins or group admins can approve or reject site member requests to join the group, unless the group setting `membersCanApprove` is set to `true`. ",
          "+ **Note:** If the `suppressAuth` option is set to `true`, all permissions are overwritten, and all site members (including non-group members) can approve or reject site member requests to join a group. ",
          "+ When a site member's request to join the group is approved, the member is added to the group. ",
          "+ If a group's privacy level is set to `PUBLIC`, a site member can join the group (no request necessary). ",
          "+ If a group's privacy level is set to `SECRET`, only site members added by an existing group member can join the group (no request necessary). ",
          " ",
          "The JoinRequests API provides functionality allowing you to:  ",
          " + [Approve](wix-groups-backend.joinRequests/approvejoinrequests) requests to join a group. ",
          " + [List](wix-groups-backend.joinRequests/listjoinrequests) requests to join a group. ",
          " + [Query](wix-groups-backend.joinRequests/queryjoinrequests) requests to join a group.",
          " + [Reject](wix-groups-backend.joinRequests/rejectjoinrequests) requests to join a group. ",
          "",
          "### Permissions Information",
          ">**Note:** You can override the permissions below by setting the `suppressAuth` option to `true`. ",
          "",
          "|Functions|Permissions",
          "|--|---|",
          "| `approveJoinRequests()`, `listJoinRequests()`, <br/> `queryJoinRequests()`, `rejectJoinRequests()`|Site admin, group admin",
          "",
          "",
          "To use the JoinRequests API, import `joinRequests` from the `wix-groups-backend` module:",
          "",
          "```javascript",
          "import { joinRequests } from \"wix-groups-backend\";",
          "```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "approveJoinRequests",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "identifiers",
              "type": "wix-groups-backend.JoinRequests.Identifiers",
              "doc": "Group ID and member IDs." },
            { "name": "options",
              "type": "wix-groups-backend.Options",
              "doc": "Authorization options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ { "name": "Array",
                      "typeParams":
                        [ "wix-groups-backend.JoinRequests.JoinRequest" ] } ] },
            "doc": "" },
        "locations":
          [ { "lineno": 70,
              "filename": "joinRequests.js" } ],
        "docs":
          { "summary": "Approves requests to join a group.",
            "description":
              [ "<br/> ",
                "",
                "> **Note: This function is only relevant for private groups.** ",
                "",
                "The `approveJoinRequests()` function returns a Promise that resolves when a site member's request to join a group is approved. ",
                "Only site admins and group admins can approve site member requests to join a group, unless the group setting, `membersCanApprove` is set to `true`. ",
                "",
                "> **Note:** If the `suppressAuth` option is set to `true`, all permissions are overwritten, and all site members (including non-group members) can approve site member requests to join a group." ],
            "links": [],
            "examples":
              [ { "title": "Approve a request to join a group",
                  "body":
                    [ "import { joinRequests } from 'wix-groups-backend';",
                      "",
                      "// Sample identifiers value:",
                      "// {",
                      "//   groupId: '77490611-53bb-4b47-a7cc-ca9a1335133b',",
                      "//   memberIds: ['124cd3db-e9be-4980-93c1-a6d767a11099', '2f48e9e1-d050-4c86-9684-e7f231600f29', '772cd3db-e9be-560-93c1-a6d767a11670']",
                      "// }",
                      "//",
                      "// Sample options value:",
                      "// {",
                      "//   suppressAuth: true",
                      "// }",
                      "",
                      "export function myApproveJoinRequestsFunction(identifiers, options) {",
                      "  return joinRequests.approveJoinRequests(identifiers, options)",
                      "    .then((approvedJoinRequests) => {",
                      "      return approvedJoinRequests;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "/* Promise resolves to:",
                      " * [",
                      " *  { ",
                      " *    \"memberId\": \"124cd3db-e9be-4980-93c1-a6d767a11099\"",
                      " *    \"_createdDate\": \"Fri Oct 24 2021 22:45:50 GMT+0300\"",
                      " *    \"status\": \"APPROVED\"",
                      " *  },",
                      " *  { ",
                      " *    \"memberId\": \"2f48e9e1-d050-4c86-9684-e7f231600f29\"",
                      " *    \"_createdDate\": \"Wed May 14 2021 10:05:20 GMT+0300\"",
                      " *    \"status\": \"APPROVED\"",
                      " *  },",
                      " *  {",
                      " *    \"memberId\": \"772cd3db-e9be-560-93c1-a6d767a11670\"",
                      " *    \"_createdDate\": \"Sun July 11 2020 03:25:30 GMT+0300\"",
                      " *    \"status\": \"APPROVED\"",
                      " *  }",
                      " * ]",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "listJoinRequests",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "groupId",
              "type": "string",
              "doc": "ID of the group requested to join." },
            { "name": "paging",
              "type": "wix-groups-backend.JoinRequests.Paging",
              "doc": "Paging options.",
              "optional": true },
            { "name": "options",
              "type": "wix-groups-backend.Options",
              "doc": "Authorization options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-groups-backend.JoinRequests.ListJoinRequests" ] },
            "doc": "" },
        "locations":
          [ { "lineno": 104,
              "filename": "joinRequests.js" } ],
        "docs":
          { "summary": "Lists requests to join a group.",
            "description":
              [ "<br/> ",
                "",
                "> **Note: This function is only relevant for private groups.** ",
                "",
                "The `listJoinRequests()` function returns a Promise that resolves to a list of up to 100 requests to join a group. Sorts by default to `_createdDate` in descending order.",
                "Only site admins and group admins can see requests to join their group. Site members can access their own join requests in their site.",
                "",
                "> **Notes:** ",
                "> + If the `suppressAuth` option is set to `true`, all permissions are overwritten, and all site members (including non-group members) can see requests to join a group. ",
                "> + This function's parameters are positional, and must be specified in the sequence shown in the syntax below. When specifying a parameter, use `null` as a placeholder for any unspecified parameters. For example, to specify `limit` only, call `listJoinRequests(groupId, paging, null)`. To specify `supressAuth` only, call `listJoinRequests(groupId, null, options)`." ],
            "links": [],
            "examples":
              [ { "title": "List all requests to join a group",
                  "body":
                    [ "import { joinRequests } from 'wix-groups-backend';",
                      "",
                      "// Sample groupId value:",
                      "// 'fc3df3c1-36b2-4279-8be1-8e72a05a88c8'",
                      "",
                      "export function myListJoinRequestsFunction(groupId) {",
                      "  return joinRequests.listJoinRequests(groupId)",
                      "    .then((joinRequestsResults) => {",
                      "      const joinRequestStatus = joinRequestsResults.joinRequests[0].status;",
                      "      return joinRequestsResults;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "/* Promise resolves to:",
                      " * joinRequests: [",
                      " *  { ",
                      " *    \"memberId\": \"937cd3db-e9be-4980-93c1-a6d767a11050\"",
                      " *    \"_createdDate\": \"Wed May 14 2021 10:05:20 GMT+0300\"",
                      " *    \"status\": \"REJECTED\"",
                      " *    \"rejectionReason\": \"Wrong group.\"",
                      " *  },",
                      " *  {",
                      " *    \"memberId\": \"7fe8e9e1-d050-4c86-9684-e7f231600a34\"",
                      " *    \"_createdDate\": \"Sun July 11 2020 03:25:30 GMT+0300\"",
                      " *    \"status\": \"PENDING\"",
                      " *  }",
                      " * ],",
                      " * metadata: ",
                      " *  {",
                      " *   \"length\": 2",
                      " *   \"tooManyToCount\": false",
                      " *   \"totalCount\": 5",
                      " *  }",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "List all requests to join a group using options",
                  "body":
                    [ "import { joinRequests } from 'wix-groups-backend';",
                      "",
                      "// Sample groupId value:",
                      "// 'fc3df3c1-36b2-4279-8be1-8e72a05a88c8'",
                      "//",
                      "// Sample paging value:",
                      "// {",
                      "//   limit: 2,",
                      "//   skip: 1",
                      "// }",
                      "//",
                      "// Sample options value:",
                      "// {",
                      "//   suppressAuth: true",
                      "// }",
                      "",
                      "export function myListJoinRequestsFunction(groupId, paging, options) {",
                      "  return joinRequests.listJoinRequests(groupId, paging, options)",
                      "    .then((joinRequestsResults) => {",
                      "      const joinRequestStatus = joinRequestsResults.joinRequests[0].status;",
                      "      return joinRequestsResults;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "/* Promise resolves to:",
                      " * joinRequests: [",
                      " *  { ",
                      " *    \"memberId\": \"937cd3db-e9be-4980-93c1-a6d767a11050\"",
                      " *    \"_createdDate\": \"Wed May 14 2021 10:05:20 GMT+0300\"",
                      " *    \"status\": \"REJECTED\"",
                      " *    \"rejectionReason\": \"Wrong group.\"",
                      " *  },",
                      " *  {",
                      " *    \"memberId\": \"7fe8e9e1-d050-4c86-9684-e7f231600a34\"",
                      " *    \"_createdDate\": \"Sun July 11 2020 03:25:30 GMT+0300\"",
                      " *    \"status\": \"PENDING\"",
                      " *  }",
                      " * ],",
                      " * metadata: ",
                      " *  {",
                      " *   \"length\": 2",
                      " *   \"tooManyToCount\": false",
                      " *   \"totalCount\": 5",
                      " *  }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "queryJoinRequests",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "wix-groups-backend.JoinRequests.JoinRequestsQueryBuilder",
            "doc": "A `JoinRequestsQueryBuilder` object that contains the refined query." },
        "locations":
          [ { "lineno": 156,
              "filename": "joinRequests.js" } ],
        "docs":
          { "summary": "Creates a query to retrieve a list of join requests.",
            "description":
              [ "<br/> ",
                "",
                "> **Notes:** ",
                "+ This function is only relevant for private groups.",
                "+ For `SECRET` groups, only site admins and group admins can query requests to join their group. However, if the `suppressAuth` option is set to `true`, all permissions are overwritten, and all site members (including non-group members) can query requests to join a group. ",
                "",
                "The `queryJoinRequests()` function builds a query to retrieve a list of all requests to join a group, and returns a [JoinRequestsQueryBuilder](wix-groups-backend/joinrequests/joinrequestsquerybuilder) object.",
                "",
                "The returned object contains the query definition which is typically used to run the query using the [`find()`](wix-groups-backend/joinrequests/joinrequestsquerybuilder/find) function. ",
                "",
                "You can refine the query by chaining `JoinRequestsQueryBuilder` functions onto the query. `JoinRequestsQueryBuilder` functions enable you to sort, filter, and control the results that `queryJoinRequests()` returns.",
                "",
                "The results of the `queryJoinRequests()` function are sorted by `_createdDate` in descending order.   ",
                "",
                "`queryJoinRequests()` runs with this `JoinRequestsQueryBuilder` default, which you can override:",
                "+ [`limit(100)`](wix-groups-backend/joinrequests/joinrequestsquerybuilder/limit)",
                "",
                "The following `JoinRequestsQueryBuilder` functions are supported for `queryJoinRequests()`. For a full description of the JoinRequests object, see the object returned for the [`items`](wix-groups-backend/joinrequests/joinrequestsqueryresult/items) property in [`JoinRequestsQueryResult`](wix-groups-backend/joinrequests/joinrequestsqueryresult).",
                "",
                "| Property                    | Supported Filters & Sorting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |",
                "| --------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |",
                "| `status`                    | [`eq()`](wix-groups-backend/joinrequests/joinrequestsquerybuilder/eq), [`ne()`](wix-groups-backend/joinrequests/joinrequestsquerybuilder/ne), [`hasSome()`](wix-groups-backend/joinrequests/joinrequestsquerybuilder/hasSome), [`or()`](wix-groups-backend/joinrequests/joinrequestsquerybuilder/or)                                |" ],
            "links": [],
            "examples":
              [ { "title": "Query requests to join a group",
                  "body":
                    [ "import { joinRequests } from 'wix-groups-backend';",
                      "",
                      "export function myQueryJoinRequestsFunction() {",
                      "  return joinRequests.queryJoinRequests()",
                      "    .find()",
                      "    .then((queryResults) => {",
                      "      const items = results.items;",
                      "      const firstItem = items[0];",
                      "      const pageSize = results.pageSize;",
                      "      const totalPages = results.totalPages;",
                      "      const totalCount = results.totalCount;",
                      "      const currentPage = results.currentPage();",
                      "      const next = results.next();",
                      "      const previous = results.prev();",
                      "      const hasNext = results.hasNext();",
                      "      const hasPrev = results.hasPrev();",
                      "      const length = results.length;",
                      "",
                      "      return items;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "/* Returns items:",
                      " * [",
                      " *  { ",
                      " *    \"memberId\": \"937cd3db-e9be-4980-93c1-a6d767a11050\"",
                      " *    \"_createdDate\": \"Wed May 14 2021 10:05:20 GMT+0300\"",
                      " *    \"status\": \"REJECTED\"",
                      " *    \"rejectionReason\": \"Wrong group.\"",
                      " *  },",
                      " *  {",
                      " *    \"memberId\": \"7fe8e9e1-d050-4c86-9684-e7f231600a34\"",
                      " *    \"_createdDate\": \"Sun July 11 2020 03:25:30 GMT+0300\"",
                      " *    \"status\": \"PENDING\"",
                      " *  }",
                      " * ]",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "rejectJoinRequests",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "groupId",
              "type": "string",
              "doc": "ID of the group requested to join." },
            { "name": "rejections",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "wix-groups-backend.JoinRequests.Rejection" ] },
              "doc": "Rejection data." },
            { "name": "options",
              "type": "wix-groups-backend.Options",
              "doc": "Authorization options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ { "name": "Array",
                      "typeParams":
                        [ "wix-groups-backend.JoinRequests.JoinRequest" ] } ] },
            "doc": "" },
        "locations":
          [ { "lineno": 135,
              "filename": "joinRequests.js" } ],
        "docs":
          { "summary": "Rejects requests to join a group.",
            "description":
              [ "<br/> ",
                "",
                "> **Note: This function is only relevant for private groups.** ",
                "",
                "The `rejectJoinRequests()` function returns a Promise that resolves when the site member's request to join a group is rejected. ",
                "Only site admins or group admins can reject site member requests to join the group, unless the group setting, `membersCanApprove` is set to `true`.",
                "",
                "> **Note:** If the `suppressAuth` option is set to `true`, all permissions are overwritten, and all site members (including non-group members) can reject site member requests to join a group." ],
            "links": [],
            "examples":
              [ { "title": "Reject a request to join a group",
                  "body":
                    [ "import { joinRequests } from 'wix-groups-backend';",
                      "",
                      "// Sample groupId value:",
                      "// \"6z2334b13bb4b44569a7cdf292j227\"",
                      "//",
                      "// Sample rejections value:",
                      "// [",
                      "//  {",
                      "//    memberId: '77490611-53bb-4b47-a7cc-ca9a1335133b',",
                      "//    reason: 'This group is for college students only.'",
                      "//  }",
                      "// ]",
                      "",
                      "export function myRejectJoinRequestsFunction(groupId, rejections) {",
                      "  return joinRequests.rejectJoinRequests(groupId, rejections)",
                      "    .then((rejectedJoinRequests) => {",
                      "      console.log('Rejected ', rejectedJoinRequests);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "/* Promise resolves to:",
                      " * [",
                      " *  { ",
                      " *    \"memberId\": \"77490611-53bb-4b47-a7cc-ca9a1335133b\"",
                      " *    \"_createdDate\": \"Mon July 12 2020 13:15:10 GMT+0300\"",
                      " *    \"status\": \"REJECTED\"",
                      " *    \"rejectionReason\": \"This group is for college students only.\"",
                      " *  }",
                      " * ]",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Identifiers",
        "locations":
          [ { "lineno": 63,
              "filename": "joinRequests.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "groupId",
              "type": "string",
              "doc": "ID of the group requested to join." },
            { "name": "memberIds",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "IDs of the site members to approve." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "JoinRequest",
        "locations":
          [ { "lineno": 50,
              "filename": "joinRequests.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "memberId",
              "type": "string",
              "doc": "Site member ID of the requester." },
            { "name": "_createdDate",
              "type": "Date",
              "doc": "Date the site member requested to join the group." },
            { "name": "status",
              "type": "string",
              "doc": "Status of the request to join a group.\nOne of:\n- `\"PENDING\"` \n- `\"APPROVED\"` \n- `\"REJECTED\"`" },
            { "name": "rejectionReason",
              "type": "string",
              "doc": "Reason the request to join a group was rejected.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "ListJoinRequests",
        "locations":
          [ { "lineno": 90,
              "filename": "joinRequests.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "joinRequests",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "wix-groups-backend.JoinRequests.JoinRequest" ] },
              "doc": "Requests to join a group." },
            { "name": "metadata",
              "type": "wix-groups-backend.Metadata",
              "doc": "Paging information." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Paging",
        "locations":
          [ { "lineno": 97,
              "filename": "joinRequests.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "limit",
              "type": "number",
              "doc": "Maximum number of join requests to retrieve. Defaults to 100.",
              "optional": true },
            { "name": "skip",
              "type": "number",
              "doc": "Number of join requests to skip in the list.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Rejection",
        "locations":
          [ { "lineno": 128,
              "filename": "joinRequests.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "memberId",
              "type": "string",
              "doc": "ID of the site member to reject." },
            { "name": "reason",
              "type": "string",
              "doc": "Reason the request to join a group was rejected. Text written by the request reviewer that is displayed when the group is rejected (max 1,000 characters)." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }