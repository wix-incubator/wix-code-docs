{ "name": "wix-users-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "users.js" },
  "docs":
    { "summary": "The wix-users-backend module contains functionality for working with your\n site's users from backend code.",
      "description":
        [ "There are three types of users:",
          "",
          " + Visitor: A user who is not logged into your site.",
          " + Member: A user who is logged into your site.",
          " + Admin: The owner of the site.",
          "",
          "",
          " To use the Users API, import `wixUsersBackend` from the `wix-users-backend` module:",
          "",
          "   ```javascript",
          "   import wixUsersBackend from 'wix-users-backend';",
          "   ```",
          "",
          "> **Note:** The APIs in `wix-users-backend` are only partially functional when previewing your site. View a published version of your site to see their complete functionality." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties":
    [ { "name": "badges",
        "labels": [],
        "get": true,
        "set": false,
        "type": "wix-users-backend.Badges",
        "locations":
          [ { "lineno": 12,
              "filename": "badges.js" } ],
        "docs":
          { "summary": "The Badges API contains functionality for working with [member badges](https://support.wix.com/en/article/about-member-badges) from backend code.",
            "description":
              [ "To use the Badges API, import `{badges}` from the `wix-users-backend` module:",
                "",
                "   ```javascript",
                "   import {badges} from 'wix-users-backend';",
                "   ```" ],
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "currentUser",
        "labels":
          [ "changed" ],
        "get": true,
        "set": true,
        "type": "wix-users-backend.User",
        "locations":
          [ { "lineno": 274,
              "filename": "user-class.js" },
            { "lineno": 461,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis object will continue to work, but a newer version is available at\n[wix-members-backend.currentMember.getMember()](https://www.wix.com/velo/reference/wix-members-backend/currentmember-obj/getmember).",
            "description":
              [ "Gets the current user viewing the site.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this object is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.currentMember.getMember()`](wix-members-backend/currentmember-obj/getMember).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { currentMember } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.currentUser`,",
                ">    and replace it with `currentMember.getMember()`.",
                ">    Update your code to work with the new `getMember()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " Gets a [`User`](wix-users-backend.User.html) object containing information about",
                " the user currently viewing the site." ],
            "links": [],
            "examples":
              [ { "title": "Get the current member's information",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.currentMember.getMember()",
                      "//       function, which replaces wix-users-backend.currentUser.",
                      "//       See the currentUser description for more information, and",
                      "//       line 30 for the deprecated example.",
                      "",
                      "import { currentMember } from 'wix-members-backend';",
                      "",
                      "export async function myGetCurrentMemberFunction() {",
                      "  const member = await currentMember.getMember('FULL');",
                      "",
                      "  // Replaces currentUser.id",
                      "  const id = member._id;",
                      "",
                      "  // Replaces currentUser.loggedIn",
                      "  const loggedIn = member ? true : false;",
                      "",
                      "  // Replaces currentUser.getEmail()",
                      "  const loginEmail = member.loginEmail;",
                      "  const contactEmails = member.contactDetails.emails;",
                      "",
                      "  // Replaces currentUser.role and currentUser.getRoles()",
                      "  const roles = await currentMember.getRoles();",
                      "",
                      "  // Returns undefined if the member is not logged in",
                      "  return member;",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.currentUser object.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "// ...",
                      "",
                      "let user = wixUsersBackend.currentUser;",
                      "",
                      "let userId = user.id;           // \"r5cme-6fem-485j-djre-4844c49\"",
                      "let isLoggedIn = user.loggedIn; // true",
                      "",
                      "user.getEmail()",
                      "  .then( (email) => {",
                      "    let userEmail = email;      // \"user@something.com\"",
                      "  } );",
                      "",
                      "user.getRoles()",
                      "  .then( (roles) => {",
                      "    let firstRole = roles[0];",
                      "    let roleName = firstRole.name;                // \"Role Name\"",
                      "    let roleDescription = firstRole.description;  // \"Role Description\"",
                      "  } );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "roles",
        "labels": [],
        "get": true,
        "set": false,
        "type": "wix-users-backend.Roles",
        "locations":
          [ { "lineno": 20,
              "filename": "roles.js" } ],
        "docs":
          { "summary": "The Roles API contains functionality for working with member roles from backend code.",
            "description":
              [ "To use the Roles API, import `{roles}` from the `wix-users-backend` module:",
                "",
                "   ```javascript",
                "   import {roles} from 'wix-users-backend';",
                "   ```" ],
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "operations":
    [ { "name": "approveByEmail",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Email address of the user to approve." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "string" ] },
            "doc": "Fulfilled - A session token for logging in the approved user in client-side code.\nRejected - Error message." },
        "locations":
          [ { "lineno": 219,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.authentication.approveByEmail()](https://www.wix.com/velo/reference/wix-members-backend/authentication-obj/approvebyemail).",
            "description":
              [ "Approve a member whose status is `\"Pending\"` using an email address.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.authentication.approveByEmail()`](wix-members-backend/authentication-obj/approveByEmail).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { authentication } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all contact functions that use `wixUsers`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.approveByEmail()`,",
                ">    and replace it with `authentication.approveByEmail()`.",
                ">    Update your code to work with the new `approveByEmail()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `approveByEmail()` function returns a Promise that resolves to a",
                " session token when the specified user is approved.",
                "",
                " A member's status is `\"Pending\"` after you've called the [`register()`](#register)",
                " function when the site's membership policy is set to manual approval. To learn",
                " more about setting your site's membership approval policy, see",
                " [Editing Your Member Signup Settings](https://support.wix.com/en/article/editing-your-member-signup-settings).",
                "",
                " Pass the member's email address in the `email` parameter." ],
            "links": [],
            "examples":
              [ { "title": "Approve a pending member using an email address",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.authentication.approveByEmail()",
                      "//       function, which replaces wix-users-backend.approveByEmail().",
                      "//       See the function description for more information, and",
                      "//       line 27 for the deprecated example.",
                      "",
                      "import { authentication } from 'wix-members-backend';",
                      "",
                      "export function myApproveByEmailFunction(email) {",
                      "",
                      "  return authentication.approveByEmail(email)",
                      "    .then((sessionToken) => {",
                      "      return {",
                      "        sessionToken: sessionToken,",
                      "        approved: true",
                      "      };",
                      "    })",
                      "    .catch((error) => {",
                      "      return {",
                      "        approved: false,",
                      "        reason: error",
                      "      };",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.approveByEmail() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function myBackendFunction(email) {",
                      "  return wixUsersBackend.approveByEmail(email)",
                      "    .then( (sessionToken) => {",
                      "      return {sessionToken, 'approved': true};",
                      "    } )",
                      "    .catch( (error) => {",
                      "      return {'approved': false, 'reason': error};",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example contains a backend function which approves a pending user using\n an email address and returns a session token to be used in client-side\n code to log in the user who was just approved." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "approveByToken",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "token",
              "type": "string",
              "doc": "Approval token returned by the `register()` function." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "string" ] },
            "doc": "Fulfilled - A session token for logging in the approved user in client-side code.\nRejected - Error message." },
        "locations":
          [ { "lineno": 163,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.authentication.approveByToken()](https://www.wix.com/velo/reference/wix-members-backend/authentication-obj/approvebytoken).",
            "description":
              [ "Approve a member whose status is `\"Pending\"` using an approval token.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.authentication.approveByToken()`](wix-members-backend/authentication-obj/approveByToken).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { authentication } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all contact functions that use `wixUsers`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.approveByToken()`,",
                ">    and replace it with `authentication.approveByToken()`.",
                ">    Update your code to work with the new `approveByToken()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `approveByToken()` function returns a Promise that resolves to a",
                " session token when the specified user is approved. Tokens must be approved",
                " within 30 hours of token creation.",
                "",
                " A member's status is `\"Pending\"` after you've called the [`register()`](#register)",
                " function when the site's membership policy is set to manual approval. To learn",
                " more about setting your site's membership approval policy, see",
                " [Editing Your Member Signup Settings](https://support.wix.com/en/article/editing-your-member-signup-settings).",
                "",
                " Use the `approvalToken` parameter of the `RegistrationResult`",
                " object returned from the [`register()`](#register) function when calling",
                " `approveByToken()`." ],
            "links": [],
            "examples":
              [ { "title": "Approve a pending member using an approval token",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.authentication.approveByToken()",
                      "//       function, which replaces wix-users-backend.approveByToken().",
                      "//       See the function description for more information, and",
                      "//       line 30 for the deprecated example.",
                      "",
                      "import { authentication } from 'wix-members-backend';",
                      "",
                      "// Sample token value:",
                      "// 'JWS.eyJraWQiOiJSc012MmV3MiIsImFsZyI6IkhTMjU2In0.eyJkYXRhIjoie1wiaWRcIjpcImEyMWE1MmU4LWViMzUtNDExYS04OTNkLWFlNTgxM2I1YjY2Y1wiLFwiY29sbGVjdGlvbklkXCI6XCI5YmVjNThlNi02NDExLTQ5OTEtOGU1ZC0wYWRhOTE4MmI5NWVcIn0iLCJpYXQiOjE2Mjc3NzkyNjYsImV4cCI6MTYyNzg4NzI2Nn0.53pZSaPInXrAvWpTOxsZxqxBHQIof1j6Gbkqg92l82o'",
                      "",
                      "export function myApproveByTokenFunction(token) {",
                      "",
                      "  return authentication.approveByToken(token)",
                      "    .then((sessionToken) => {",
                      "      return {",
                      "        sessionToken: sessionToken,",
                      "        approved: true",
                      "      };",
                      "    })",
                      "    .catch( (error) => {",
                      "      return {",
                      "        approved: false,",
                      "        reason: error",
                      "      };",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.approveByToken() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function myBackendFunction(token) {",
                      "  return wixUsersBackend.approveByToken(token)",
                      "    .then( (sessionToken) => {",
                      "      return {sessionToken: sessionToken, approved: true};",
                      "    } )",
                      "    .catch( (error) => {",
                      "      return {approved: false, reason: error};",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example contains a backend function which approves a pending user using\n an approval token and returns a session token to be used in client-side\n code to log in the user who was just approved." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "blockByEmail",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Email address of the user to approve." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When specified member is blocked.\nRejected - Error message." },
        "locations":
          [ { "lineno": 272,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.authentication.blockByEmail()](https://www.wix.com/velo/reference/wix-members-backend/authentication-obj/blockbyemail).",
            "description":
              [ "Blocks a member from logging into the site.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.authentication.blockByEmail()`](wix-members-backend/authentication-obj/blockByEmail).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { authentication } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all contact functions that use `wixUsers`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.blockByEmail()`,",
                ">    and replace it with `authentication.blockByEmail()`.",
                ">    Update your code to work with the new `blockByEmail()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `blockByEmail()` function returns a Promise that resolves when the",
                " specified user has been blocked.",
                "",
                " Pass the member's email address in the `email` parameter." ],
            "links": [],
            "examples":
              [ { "title": "Block a member using an email address",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.authentication.blockByEmail()",
                      "//       function, which replaces wix-users-backend.blockByEmail().",
                      "//       See the function description for more information, and",
                      "//       line 20 for the deprecated example.",
                      "",
                      "import { authentication } from 'wix-members-backend';",
                      "",
                      "export function myBlockByEmailFunction(email) {",
                      "  return authentication.blockByEmail(email)",
                      "    .then(() => {",
                      "      console.log('Email blocked from site membership');",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.blockByEmail() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function myBackendFunction(email) {",
                      "  wixUsersBackend.blockByEmail(email)",
                      "    .then( () => {",
                      "      // user has been blocked",
                      "    } );",
                      "  }" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "deleteUser",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "userId",
              "type": "string",
              "doc": "ID of the user to delete." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the user is deleted.\nRejected - Error message." },
        "locations":
          [ { "lineno": 592,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.members.deleteMember()](https://www.wix.com/velo/reference/wix-members-backend/members-obj/deletemember).",
            "description":
              [ "Deletes an existing user.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.members.deleteMember()`](wix-members-backend/members-obj/deleteMember).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { members } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.deleteUser()`,",
                ">    and replace it with `members.deleteMember()`.",
                ">    Update your code to work with the new `deleteMember()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `deleteUser()` function returns a Promise that resolves when the",
                " user with the given ID is deleted." ],
            "links": [],
            "examples":
              [ { "title": "Delete a user by ID",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.deleteMember()",
                      "//       function, which replaces wixUsersBackend.deleteUser().",
                      "//       See the function description for more information, and",
                      "//       line 24 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// 'efab296e-2687-4751-9956-ee73200dd4bb'",
                      "",
                      "export function myDeleteMemberFunction(id) {",
                      "",
                      "  return members.deleteMember(id)",
                      "    .then(() => {",
                      "      console.log('Member deleted');",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.deleteUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function deleteUser(userId) {",
                      "  wixUsersBackend.deleteUser(userId)",
                      "    .then( () => {",
                      "      // user has been deleted",
                      "    })",
                      "    .catch( (err) => {",
                      "      // there was an error deleting the user",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "emailUser",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "emailId",
              "type": "string",
              "doc": "The Email ID of the Triggered Email to send." },
            { "name": "toUser",
              "type": "string",
              "doc": "The User ID of the email recipient." },
            { "name": "options",
              "type": "wix-users.TriggeredEmailOptions",
              "doc": "Variable values to insert into the email.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the email is sent.\nRejected - Error message." },
        "locations":
          [ { "lineno": 375,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-crm-backend.triggeredEmails.emailMember()](https://www.wix.com/velo/reference/wix-crm-backend/triggeredemails-obj/emailmember).",
            "description":
              [ "Sends a Triggered Email to the specified site member.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-crm-backend.triggeredEmails.emailMember()`](wix-crm-backend/triggeredemails-obj/emailMember).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { triggeredEmails } from 'wix-crm-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.emailUser()`,",
                ">    and replace it with `triggeredEmails.emailMember()`.",
                ">    Update your code to work with the new `emailMember()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " To learn more about Triggered Emails, see:",
                "",
                " + [About Triggered Emails](https://support.wix.com/en/article/about-triggered-emails)",
                " + [Creating a Triggered Email](https://support.wix.com/en/article/creating-a-triggered-email)",
                " + [How to Send a Triggered Email to Members with Code](https://support.wix.com/en/article/how-to-send-a-triggered-email-to-members-with-code)",
                "",
                "",
                " Before using the `emailUser()` function, you need to set up at least one",
                " Triggered Email.",
                "",
                " Specify which email to send by passing the email's ID in the `emailId` parameter.",
                "",
                " Specify which member the email is sent to by passing the member's user ID in the `toUser`",
                " parameter.",
                "",
                " If the specified Triggered Email contains",
                " [variables](https://support.wix.com/en/article/using-variables-to-add-personalized-text),",
                " you can pass values for those variables using the optional `options` parameter.",
                " You pass a `TriggeredEmailOptions` object",
                " which contains the values to be inserted into your email in place of the variables",
                " defined in that email. The values passed must be strings. If the object you",
                " pass to the `options` parameter does not contain a `key:value` pair for a",
                " variable in your Triggered Email, the fallback value defined when creating",
                " your Triggered Email is inserted in place of the variable.",
                "",
                " Note that Triggered Emails generates a code snippet for each of your email",
                " templates. The generated code includes the email's ID and keys for all the",
                " email's variable names. You can copy and paste the snippet into your code.",
                " Then, you need to define values for the `toUser` property and for each",
                " variable key. To learn how to use the generated snippet in your code, see",
                " [How to Send a Triggered Email with Code](https://support.wix.com/en/article/how-to-send-a-triggered-email-with-code)." ],
            "links": [],
            "examples":
              [ { "title": "Send a Triggered Email to a site member",
                  "body":
                    [ "// NOTE: This example uses the new wix-crm-backend.triggeredEmails.emailMember()",
                      "//       function, which replaces wixUsersBackend.emailUser().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { triggeredEmails } from 'wix-crm-backend';",
                      "",
                      "export function myEmailMemberFunction() {",
                      "  const emailId = \"thanks_for_joining\";",
                      "  const memberId = \"78ad23e2-fd34-5a14-9807-d8c2485d1f36\";",
                      "  const options = {",
                      "    variables: {",
                      "      firstName: \"Jane\",",
                      "      lastName: \"Member\"",
                      "    }",
                      "  }",
                      "",
                      "  return triggeredEmails.emailMember(emailId, memberId, options)",
                      "    .then(() => {",
                      "      console.log(\"Email was sent to member\");",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.emailUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function myBackendFunction() {",
                      "  let userId = // get user ID",
                      "",
                      "  wixUsersBackend.emailUser(\"emailID\", userId)",
                      "    .then( () => {",
                      "      // email has been sent",
                      "    } )",
                      "    .catch( (err) => {",
                      "      // there was an error sending the email",
                      "  } );",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Register a user sending an email for confirmation",
                  "body":
                    [ "/*******************************",
                      " * Backend code - register.jsw *",
                      " *******************************/",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function doRegistration(email, password, firstName, lastName) {",
                      "  // register the user",
                      "  return wixUsersBackend.register(email, password, {",
                      "    \"contactInfo\": {",
                      "      \"firstName\": firstName,",
                      "      \"lastName\": lastName",
                      "    }",
                      "  })",
                      "    .then((results) => {",
                      "      // user is now registered and pending approval",
                      "      // send a registration verification email",
                      "      wixUsersBackend.emailUser('verifyRegistration', results.user.id, {",
                      "        \"variables\": {",
                      "          \"name\": firstName,",
                      "          \"verifyLink\": `http://yourdomain.com/post-register?token=${results.approvalToken}`",
                      "        }",
                      "      });",
                      "    });",
                      "}",
                      "",
                      "export function doApproval(token) {",
                      "  // approve the user",
                      "  return wixUsersBackend.approveByToken(token)",
                      "    // user is now active, but not logged in",
                      "    // return the session token to log in the user client-side",
                      "    .then((sessionToken) => {",
                      "      return { sessionToken, \"approved\": true };",
                      "    })",
                      "    .catch((error) => {",
                      "      return { \"approved\": false, \"reason\": error };",
                      "    });",
                      "}",
                      "",
                      "/*********************************",
                      " * Client-side registration code *",
                      " *********************************/",
                      "import { doRegistration } from 'backend/register';",
                      "",
                      "export function button_click(event) {",
                      "  let email = // the user's email address",
                      "    let password = // the user's password",
                      "      let firstName = // the user's first name",
                      "      let lastName = // the user's last name",
                      "",
                      "      doRegistration(email, password, firstName, lastName)",
                      "        .then(() => {",
                      "          console.log(\"Confirmation email sent.\");",
                      "        });",
                      "}",
                      "",
                      "/**************************************",
                      " * Client-side post-registration code *",
                      " **************************************/",
                      "import wixLocation from 'wix-location';",
                      "import wixUsersBackend from 'wix-users';",
                      "import { doApproval } from 'backend/register';",
                      "",
                      "$w.onReady(() => {",
                      "  // get the token from the URL",
                      "  let token = wixLocation.query.token;",
                      "",
                      "  doApproval(token)",
                      "    .then((result) => {",
                      "      if (result.approved) {",
                      "        // log the user in",
                      "        wixUsersBackend.applySessionToken(result.sessionToken);",
                      "        console.log(\"Approved\");",
                      "      }",
                      "      else {",
                      "        console.log(\"Not approved!\");",
                      "      }",
                      "    });",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates a common email verification flow. A user is initially\n registered but not yet approved. At registration, a verification email is\n sent with a link to a verification page. When a user goes to the verification\n page, the approval is granted and the user is logged into the site.\n\n The code is split between three locations:\n\n + A backend web module named **register.jsw**.\n + The page code for the page where users register.\n + The page code for the page where users confirm their registration." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "generateSessionToken",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Email address of the user to approve." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "string" ] },
            "doc": "Fulfilled - A session token for logging in the approved user in client-side code.\nRejected - Error message." },
        "locations":
          [ { "lineno": 317,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.authentication.generateSessionToken()](https://www.wix.com/velo/reference/wix-members-backend/authentication-obj/generatesessiontoken).",
            "description":
              [ "Creates a session token for a member authenticated by a 3rd party.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.authentication.generateSessionToken()`](wix-members-backend/authentication-obj/generateSessionToken).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { authentication } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.generateSessionToken()`,",
                ">    and replace it with `authentication.generateSessionToken()`.",
                ">    Update your code to work with the new `generateSessionToken()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `generateSessionToken()` function returns a Promise that resolves to a",
                " session token used to log a user into your site.",
                "",
                " Use `generateSessionToken()` to bypass Wix member authentication when using a",
                " 3rd party service to authenticate your users. Meaning, you can provide Single",
                " Sign-On (SSO) for users where they are authenticated by a non-Wix entity to",
                " login to your Wix site.",
                "",
                " If the specified email address corresponds to an existing member, a session",
                " token for logging in that member is generated.",
                "",
                " If there is no existing member with the specified email address, a new member",
                " is created and a session token for logging in that member is generated. The",
                " member is created with a random password." ],
            "links": [],
            "examples":
              [ { "title": "Log a user in after 3rd party authentication",
                  "body":
                    [ "// NOTE: This example uses the new authentication.generateSessionToken()",
                      "//       function, which replaces wixUsersBackend.generateSessionToken().",
                      "//       See the function description for more information, and",
                      "//       line 57 for the deprecated example.",
                      "",
                      "/****************************",
                      " * Backend code - login.jsw *",
                      " ***************************/",
                      "",
                      " import authentication from 'wix-members-backend';",
                      " import { authBy3rdParty } from 'backend/authentications';",
                      "",
                      " export function getLoginToken(email, password) {",
                      "",
                      "   return authBy3rdParty(email, password)",
                      "     .then((isAuthenticated) => {",
                      "",
                      "       // If authenticated, generate and return the session token",
                      "       if (isAuthenticated) {",
                      "         return authentication.generateSessionToken(email)",
                      "           .then((sessionToken) => {",
                      "             return {",
                      "               sessionToken: sessionToken,",
                      "               approved: true",
                      "            };",
                      "           });",
                      "       }",
                      "",
                      "       // If not authenticated, return non-approval",
                      "       return { approved: false };",
                      "     });",
                      " }",
                      "",
                      " /*************",
                      "  * Page code *",
                      "  ************/",
                      " import { getLoginToken } from 'backend/login';",
                      " import authentication from 'wix-members';",
                      "",
                      " export async function button_onClick(event) {",
                      "",
                      "  // Call the backend function to get the session token",
                      "   getLoginToken($w(\"#email\").value, $w(\"#password\").value)",
                      "     .then((loginResult) => {",
                      "       if (loginResult.approved) {",
                      "         // If approved, log the member in using the returned session token",
                      "         authentication.applySessionToken(loginResult.sessionToken);",
                      "       } else {",
                      "         // If not approved, log a message",
                      "         console.log(\"Member not approved.\");",
                      "       }",
                      "     });",
                      " }",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.generateSessionToken() function.",
                      "",
                      "/****************************",
                      " * Backend code - login.jsw *",
                      " ***************************/",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "import { authBy3rdParty } from 'backend/authentications';",
                      "",
                      "export function getLoginToken(email, password) {",
                      "  // authenticate using 3rd party",
                      "  return authBy3rdParty(email, password)",
                      "    .then((isAuthenticated) => {",
                      "      // if authenticated generate and return session token",
                      "      if (isAuthenticated) {",
                      "        return wixUsersBackend.generateSessionToken(email)",
                      "          .then((sessionToken) => {",
                      "            return { \"sessionToken\": sessionToken, \"approved\": true };",
                      "          });",
                      "      }",
                      "      // if not authenticated return non-approval",
                      "      return { \"approved\": false };",
                      "    });",
                      "}",
                      "",
                      "/**************************",
                      " * Client-side login code *",
                      " *************************/",
                      "import { getLoginToken } from 'backend/login';",
                      "import wixUsers from 'wix-users';",
                      "",
                      "export async function button_onClick(event) {",
                      "  // call backend function",
                      "  getLoginToken($w(\"#email\").value, $w(\"#password\").value)",
                      "    .then((loginResult) => {",
                      "      // if approved log the user in with the session token",
                      "      if (loginResult.approved) {",
                      "        wixUsers.applySessionToken(loginResult.sessionToken);",
                      "      }",
                      "      // if not approved log a message",
                      "      else {",
                      "        console.log(\"User not approved.\");",
                      "      }",
                      "    });",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example contains a backend function which uses a 3rd party authentication\n service to authenticate a user. If the authentication is successful, a session\n session token is returned to the client-side and used to log in the authenticated user." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "getUser",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "userId",
              "type": "string",
              "doc": "The ID of the user to get." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-users-backend.RetrievedUser" ] },
            "doc": "Fulfilled - The given user's information.\nRejected - Error message." },
        "locations":
          [ { "lineno": 549,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.members.getMember()](https://www.wix.com/velo/reference/wix-members-backend/members-obj/getmember).",
            "description":
              [ "Gets an existing user by ID.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.members.getMember()`](wix-members-backend/members-obj/getMember).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { members } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.getUser()`,",
                ">    and replace it with `members.getMember()`.",
                ">    Update your code to work with the new `getMember()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `getUser()` function returns a Promise that resolves to a user",
                " whose ID matches the given ID." ],
            "links": [],
            "examples":
              [ { "title": "Get a user by ID",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.getMember()",
                      "//       function, which replaces wixUsersBackend.getUser().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// '60a91ab6-5e30-4af2-9d5e-a205c351ffd7'",
                      "//",
                      "// Sample fieldset value:",
                      "// 'FULL'",
                      "",
                      "export function myGetMemberFunction(id, fieldset) {",
                      "  return members.getMember(id, fieldset)",
                      "    .then((member) => {",
                      "      const slug = member.profile.slug;",
                      "      const fullName = `${member.contactDetails.firstName} ${member.contactDetails.lastName}`;",
                      "      const contactId = member.contactId;",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.getUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function getUser(id) {",
                      "  return wixUsersBackend.getUser(id)",
                      "    .then((user) => {",
                      "      return user;",
                      "    });",
                      "}",
                      "",
                      "/* Returns a promise that resolves to:",
                      " *",
                      " * {",
                      " *   \"id\": \"dn8sf9c2-4e9f-a02d-a58d-f244d999729a\",",
                      " *   \"memberName\": \"John Doe\",",
                      " *   \"firstName\": \"John\",",
                      " *   \"lastName\": \"Doe\",",
                      " *   \"nickname\": \"johnd\",",
                      " *   \"slug\": \"johnd123\",",
                      " *   \"language\": \"en\",",
                      " *   \"status\": \"ACTIVE\",",
                      " *   \"loginEmail\": \"john.doe@somedomain.com\",",
                      " *   \"creationDate\": \"2019-08-05T11:29:39Z\",",
                      " *   \"lastUpdateDate\": \"2019-08-12T12:29:43.810Z\",",
                      " *   \"lastLoginDate\": \"2019-08-12T13:42:30Z\",",
                      " *   \"emails\": [",
                      " *     \"john.doe@somedomain.com\",",
                      " *     \"doughyjohn@anotherdomain.com\"",
                      " *   ],",
                      " *   \"phones\": [",
                      " *     \"5555555555\",",
                      " *     \"5555555556\"",
                      " *   ],",
                      " *   \"labels\": [",
                      " *     \"contacts-new\",",
                      " *     \"contacts-site_members_approved\"",
                      " *   ],",
                      " *   \"picture\": {",
                      " *     \"url\": \"https://.../photo.jpg\"",
                      " *   }",
                      " *   \"customText\": \"Custom Text\",",
                      " *   \"customNumber\": 12345",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "login",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "The email address to use when logging the user in." },
            { "name": "password",
              "type": "string",
              "doc": "The password to use when logging the user in." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "string" ] },
            "doc": "Fulfilled - Session token for logging the user in.\nRejected - Error message." },
        "locations":
          [ { "lineno": 113,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.authentication.login()](https://www.wix.com/velo/reference/wix-members-backend/authentication-obj/login).",
            "description":
              [ "Logs a user in based on email and password.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [wix-members-backend.authentication.login()](wix-members-backend/authentication-obj/login).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { authentication } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.login()`,",
                ">    and replace it with `authentication.login()`.",
                ">    Update your code to work with the new `login()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `login()` function returns a Promise that resolves to a",
                " session token used to log a user into your site.",
                "",
                " The returned `sessionToken` must be applied",
                " using the [`applySessionToken()`](wix-users.html#applySessionToken)",
                " function in client-side code to complete the login." ],
            "links": [],
            "examples":
              [ { "title": "Log in a user",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.authentication.login()",
                      "//       function, which replaces wix-users-backend.login().",
                      "//       See the function description for more information, and",
                      "//       line 23 for the deprecated example.",
                      "",
                      "import { authentication } from 'wix-members-backend';",
                      "",
                      "export function myLoginFunction() {",
                      "  const email = \"joni.doe@example.com\";",
                      "  const password = \"12345\";",
                      "",
                      "  return authentication.login(email, password)",
                      "  .then((sessionToken) => {",
                      "    return sessionToken;",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.login() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function myBackendFunction(email, password) {",
                      "  return wixUsersBackend.login(email, password)",
                      "    .then( (sessionToken) => {",
                      "      return {sessionToken, \"approved\": true};",
                      "    } )",
                      "    .catch( (error) => {",
                      "      return {\"approved\": false, \"reason\": error};",
                      "    } );",
                      "}",
                      "" ],
                  "extra":
                    { "description": "This example contains a backend function which returns a session token to be\n used in client-side code to log in the user with the given email and password." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "register",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "The email address to use when registering the user as a site member." },
            { "name": "password",
              "type": "string",
              "doc": "The password the newly added site member will use to log in." },
            { "name": "options",
              "type": "wix-users.RegistrationOptions",
              "doc": "Registration options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-users-backend.RegistrationResult" ] },
            "doc": "Fulfilled - When the user has been registered.\nRejected - Error message." },
        "locations":
          [ { "lineno": 40,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.authentication.register()](https://www.wix.com/velo/reference/wix-members-backend/authentication-obj/register).",
            "description":
              [ "Registers a new site member.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.authentication.register()`](wix-members-backend/authentication-obj/register).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { authentication } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all contact functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.register()`,",
                ">    and replace it with `authentication.register()`.",
                ">    Update your code to work with the new `register()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `register()` function returns a Promise that resolves to a `RegistrationResult`",
                " object when the user is either registered or is pending registration.",
                "",
                " The specified `password` must be between 4 and 100 ASCII characters.",
                "",
                " If Site Members is [configured for automatic approval](https://support.wix.com/en/article/customizing-your-approval-settings-for-site-members),",
                " the `register()` function returns a status of `\"Active\"` and the user will",
                " be an active member of the site.",
                "",
                " If Site Members is [configured for manual approval](https://support.wix.com/en/article/customizing-your-approval-settings-for-site-members),",
                " the `register()` function returns a status of `\"Pending\"` and the user will",
                " be a pending member of the site. In order to activate a pending user, the",
                " site owner can [approve the user manually](https://support.wix.com/en/article/approving-a-site-member)",
                " using the Contacts application or you can call the [approveByToken()](wix-users-backend.html#approveByToken)",
                " or [approveByEmail()](wix-users-backend.html#approveByEmail) functions.",
                "",
                " The `sessionToken` returned when the new member is \"Active\" must be applied",
                " using the [`applySessionToken()`](wix-users.html#applySessionToken)",
                " function in client-side code to complete the user registration by logging",
                " in the registered user.",
                "",
                " > **Notes:**",
                " >",
                " > - When member registration is set to auto approve, calling the [client-side `register()` function](wix-users.html#register) is equally as secure as",
                " >   calling it from backend code. However, when member approval is set to",
                " >   manual, calling the backend version of the `register()` function allows you to construct more secure approval flows.",
                " >",
                " > - A confirmation email is sent to new members when they sign up using an email address",
                " >   that's already in your site's Contact List." ],
            "links": [],
            "examples":
              [ { "title": "Register a new member",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.authentication.register()",
                      "//       function, which replaces wix-users-backend.register().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { authentication } from 'wix-members-backend';",
                      "",
                      "// Example options value:",
                      "// {",
                      "//    contactInfo: {",
                      "//      firstName: 'Javier',",
                      "//      lastName: 'Doe'",
                      "//    },",
                      "//    privacyStatus: \"PUBLIC\"",
                      "// }",
                      "",
                      "export function myRegisterMemberFunction(email, password, options) {",
                      "  return authentication.register(email, password, options)",
                      "    .then((member) => {",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    })",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.register() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function myRegisterMemberFunction(email, password, contactInfo, privacyStatus) {",
                      "  return wixUsersBackend.register(email, password, {contactInfo, privacyStatus})",
                      "    .then((member) => {",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    })",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "updateUserFields",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "userId",
              "type": "string",
              "doc": "ID of the user to update." },
            { "name": "userInfo",
              "type": "wix-users-backend.UserInfo",
              "doc": "The information to update." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the user is updated.\nRejected - Error message." },
        "locations":
          [ { "lineno": 635,
              "filename": "users.js" } ],
        "docs":
          { "summary": "**Deprecated.**\nThis function will continue to work, but a newer version is available at\n[wix-members-backend.members.updateMember()](https://www.wix.com/velo/reference/wix-members-backend/members-obj/updatemember).",
            "description":
              [ "Updates an existing user by ID.",
                "",
                "> #### Migration Instructions",
                ">",
                "> If this function is already in your code, it will continue to work.",
                "> To stay compatible with future changes, migrate to",
                "> [`wix-members-backend.members.updateMember()`](wix-members-backend/members-obj/updateMember).",
                ">",
                "> To migrate to the new function:",
                ">",
                "> 1. Add the new import statement:",
                ">",
                ">    ```javascript",
                ">    import { members } from 'wix-members-backend'",
                ">    ```",
                ">",
                "> 2. If you plan to migrate all functions that use `wixUsersBackend`,",
                ">    remove the original `import wixUsersBackend` statement.",
                ">",
                "> 3. Look for any code that uses `wixUsersBackend.updateUserFields()`,",
                ">    and replace it with `members.updateMember()`.",
                ">    Update your code to work with the new `updateMember()`",
                ">    call and response properties.",
                ">",
                "> 4. Test your changes to make sure your code behaves as expected.",
                "",
                " The `updateUserFields()` function returns a Promise that resolves when the",
                " user with the specified ID has been updated.",
                "",
                " Only the properties passed in the `ContactInfo` object will",
                " be updated. All other properties will remain the same." ],
            "links": [],
            "examples":
              [ { "title": "Update a user",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.updateMember()",
                      "//       function, which replaces wix-users-backend.updateUserFields().",
                      "//       See the function description for more information, and",
                      "//       line 30 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// 'f32cbc51-a331-442b-86c2-2c664613e8b9'",
                      "//",
                      "// Sample member value:",
                      "// {",
                      "//   contactDetails: {",
                      "//     emails: ['claudes.new.email@example.com']",
                      "//   }",
                      "// }",
                      "",
                      "export function myUpdateMemberFunction(id, member) {",
                      "  return members.updateMember(id, member)",
                      "    .then((member) => {",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    })",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wix-users-backend.updateUserFields() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function updateUserFields(userId, firstName, lastName, email, phone) {",
                      "  wixUsersBackend.updateUserFields(userId, {",
                      "      \"firstName\": firstName,",
                      "      \"lastName\": lastName,",
                      "      \"emails\": [email],",
                      "      \"phones\": [phone]",
                      "  } )",
                      "    .then( () => {",
                      "      // contact has been updated",
                      "    } )",
                      "    .catch( (err) => {",
                      "      // there was an error updating the contact",
                      "    } );",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "Address",
        "locations":
          [ { "lineno": 482,
              "filename": "users.js" } ],
        "docs":
          { "summary": "An object that contains information about a site member's address.",
            "links": [],
            "examples":
              [ { "title": "Get a user by ID",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.getMember()",
                      "//       function, which replaces wixUsersBackend.getUser().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// '60a91ab6-5e30-4af2-9d5e-a205c351ffd7'",
                      "//",
                      "// Sample fieldset value:",
                      "// 'FULL'",
                      "",
                      "export function myGetMemberFunction(id, fieldset) {",
                      "  return members.getMember(id, fieldset)",
                      "    .then((member) => {",
                      "      const slug = member.profile.slug;",
                      "      const fullName = `${member.contactDetails.firstName} ${member.contactDetails.lastName}`;",
                      "      const contactId = member.contactId;",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.getUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function getUser(id) {",
                      "  return wixUsersBackend.getUser(id)",
                      "    .then((user) => {",
                      "      return user;",
                      "    });",
                      "}",
                      "",
                      "/* Returns a promise that resolves to:",
                      " *",
                      " * {",
                      " *   \"id\": \"dn8sf9c2-4e9f-a02d-a58d-f244d999729a\",",
                      " *   \"memberName\": \"John Doe\",",
                      " *   \"firstName\": \"John\",",
                      " *   \"lastName\": \"Doe\",",
                      " *   \"nickname\": \"johnd\",",
                      " *   \"slug\": \"johnd123\",",
                      " *   \"language\": \"en\",",
                      " *   \"status\": \"ACTIVE\",",
                      " *   \"loginEmail\": \"john.doe@somedomain.com\",",
                      " *   \"creationDate\": \"2019-08-05T11:29:39Z\",",
                      " *   \"lastUpdateDate\": \"2019-08-12T12:29:43.810Z\",",
                      " *   \"lastLoginDate\": \"2019-08-12T13:42:30Z\",",
                      " *   \"emails\": [",
                      " *     \"john.doe@somedomain.com\",",
                      " *     \"doughyjohn@anotherdomain.com\"",
                      " *   ],",
                      " *   \"phones\": [",
                      " *     \"5555555555\",",
                      " *     \"5555555556\"",
                      " *   ],",
                      " *   \"labels\": [",
                      " *     \"contacts-new\",",
                      " *     \"contacts-site_members_approved\"",
                      " *   ],",
                      " *   \"picture\": {",
                      " *     \"url\": \"https://.../photo.jpg\"",
                      " *   }",
                      " *   \"customText\": \"Custom Text\",",
                      " *   \"customNumber\": 12345",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "street",
              "type": "string",
              "doc": "Address street address." },
            { "name": "city",
              "type": "string",
              "doc": "Address city." },
            { "name": "country",
              "type": "string",
              "doc": "Address country." },
            { "name": "postalCode",
              "type": "string",
              "doc": "Address postal code." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Picture",
        "locations":
          [ { "lineno": 474,
              "filename": "users.js" } ],
        "docs":
          { "summary": "An object that contains information about a site member's picture.",
            "links": [],
            "examples":
              [ { "title": "Get a user by ID",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.getMember()",
                      "//       function, which replaces wixUsersBackend.getUser().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// '60a91ab6-5e30-4af2-9d5e-a205c351ffd7'",
                      "//",
                      "// Sample fieldset value:",
                      "// 'FULL'",
                      "",
                      "export function myGetMemberFunction(id, fieldset) {",
                      "  return members.getMember(id, fieldset)",
                      "    .then((member) => {",
                      "      const slug = member.profile.slug;",
                      "      const fullName = `${member.contactDetails.firstName} ${member.contactDetails.lastName}`;",
                      "      const contactId = member.contactId;",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.getUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function getUser(id) {",
                      "  return wixUsersBackend.getUser(id)",
                      "    .then((user) => {",
                      "      return user;",
                      "    });",
                      "}",
                      "",
                      "/* Returns a promise that resolves to:",
                      " *",
                      " * {",
                      " *   \"id\": \"dn8sf9c2-4e9f-a02d-a58d-f244d999729a\",",
                      " *   \"memberName\": \"John Doe\",",
                      " *   \"firstName\": \"John\",",
                      " *   \"lastName\": \"Doe\",",
                      " *   \"nickname\": \"johnd\",",
                      " *   \"slug\": \"johnd123\",",
                      " *   \"language\": \"en\",",
                      " *   \"status\": \"ACTIVE\",",
                      " *   \"loginEmail\": \"john.doe@somedomain.com\",",
                      " *   \"creationDate\": \"2019-08-05T11:29:39Z\",",
                      " *   \"lastUpdateDate\": \"2019-08-12T12:29:43.810Z\",",
                      " *   \"lastLoginDate\": \"2019-08-12T13:42:30Z\",",
                      " *   \"emails\": [",
                      " *     \"john.doe@somedomain.com\",",
                      " *     \"doughyjohn@anotherdomain.com\"",
                      " *   ],",
                      " *   \"phones\": [",
                      " *     \"5555555555\",",
                      " *     \"5555555556\"",
                      " *   ],",
                      " *   \"labels\": [",
                      " *     \"contacts-new\",",
                      " *     \"contacts-site_members_approved\"",
                      " *   ],",
                      " *   \"picture\": {",
                      " *     \"url\": \"https://.../photo.jpg\"",
                      " *   }",
                      " *   \"customText\": \"Custom Text\",",
                      " *   \"customNumber\": 12345",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "url",
              "type": "string",
              "doc": "Member's image URL." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "RegistrationResult",
        "locations":
          [ { "lineno": 23,
              "filename": "users.js" } ],
        "docs":
          { "summary": "An object that contains information about the results of a site registration.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "status",
              "type": "string",
              "doc": "Registration status. Either \"Pending\" or \"Active\"." },
            { "name": "sessionToken",
              "type": "string",
              "doc": "A token used to log in the current\n user as a site member. Pass the token from your backend code to client-side\n code and use it when calling the [applySessionToken()](wix-users.html#applySessionToken)\n function. The token is only available when `status` is \"Active\".",
              "optional": true },
            { "name": "approvalToken",
              "type": "string",
              "doc": "A token for approving the user as\n a site member using the [approveByToken()](wix-users-backend.html#approveByToken)\n function. The token is safe to pass via email or from client-side code to\n backend code. The token is only available when `status` is \"Pending\". The token\n expires 30 hours after it is created.",
              "optional": true },
            { "name": "user",
              "type": "wix-users.User",
              "doc": "The user that has been registered." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "RetrievedUser",
        "locations":
          [ { "lineno": 517,
              "filename": "users.js" } ],
        "docs":
          { "summary": "An object that contains information about a site member.",
            "links": [],
            "examples":
              [ { "title": "Get a user by ID",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.getMember()",
                      "//       function, which replaces wixUsersBackend.getUser().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// '60a91ab6-5e30-4af2-9d5e-a205c351ffd7'",
                      "//",
                      "// Sample fieldset value:",
                      "// 'FULL'",
                      "",
                      "export function myGetMemberFunction(id, fieldset) {",
                      "  return members.getMember(id, fieldset)",
                      "    .then((member) => {",
                      "      const slug = member.profile.slug;",
                      "      const fullName = `${member.contactDetails.firstName} ${member.contactDetails.lastName}`;",
                      "      const contactId = member.contactId;",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.getUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function getUser(id) {",
                      "  return wixUsersBackend.getUser(id)",
                      "    .then((user) => {",
                      "      return user;",
                      "    });",
                      "}",
                      "",
                      "/* Returns a promise that resolves to:",
                      " *",
                      " * {",
                      " *   \"id\": \"dn8sf9c2-4e9f-a02d-a58d-f244d999729a\",",
                      " *   \"memberName\": \"John Doe\",",
                      " *   \"firstName\": \"John\",",
                      " *   \"lastName\": \"Doe\",",
                      " *   \"nickname\": \"johnd\",",
                      " *   \"slug\": \"johnd123\",",
                      " *   \"language\": \"en\",",
                      " *   \"status\": \"ACTIVE\",",
                      " *   \"loginEmail\": \"john.doe@somedomain.com\",",
                      " *   \"creationDate\": \"2019-08-05T11:29:39Z\",",
                      " *   \"lastUpdateDate\": \"2019-08-12T12:29:43.810Z\",",
                      " *   \"lastLoginDate\": \"2019-08-12T13:42:30Z\",",
                      " *   \"emails\": [",
                      " *     \"john.doe@somedomain.com\",",
                      " *     \"doughyjohn@anotherdomain.com\"",
                      " *   ],",
                      " *   \"phones\": [",
                      " *     \"5555555555\",",
                      " *     \"5555555556\"",
                      " *   ],",
                      " *   \"labels\": [",
                      " *     \"contacts-new\",",
                      " *     \"contacts-site_members_approved\"",
                      " *   ],",
                      " *   \"picture\": {",
                      " *     \"url\": \"https://.../photo.jpg\"",
                      " *   }",
                      " *   \"customText\": \"Custom Text\",",
                      " *   \"customNumber\": 12345",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Member's unique id." },
            { "name": "memberName",
              "type": "string",
              "doc": "The member's full name. This information is concatenated from the `firstName` and `lastName` properties. This field will not be returned if the member registered with an email but without a name.",
              "optional": true },
            { "name": "firstName",
              "type": "string",
              "doc": "Member's first name." },
            { "name": "lastName",
              "type": "string",
              "doc": "Member's last name." },
            { "name": "loginEmail",
              "type": "string",
              "doc": "The email address the member uses to log in to your site. This is the address they supplied when they signed up." },
            { "name": "nickname",
              "type": "string",
              "doc": "The name the member specified on their profile." },
            { "name": "slug",
              "type": "string",
              "doc": "The member's URL-friendly name that is unique across your site. Typically this is made up of the member's email prefix." },
            { "name": "language",
              "type": "string",
              "doc": "The member's locale based on their last login." },
            { "name": "status",
              "type": "string",
              "doc": "Indicates the member's current status, between `Applicant`, `Active`, `Blocked`." },
            { "name": "creationDate",
              "type": "Date",
              "doc": "The date and time the member registered to the site." },
            { "name": "lastUpdateDate",
              "type": "Date",
              "doc": "The last date and time the member's details were updated." },
            { "name": "lastLoginDate",
              "type": "Date",
              "doc": "The date and time when the member last logged in." },
            { "name": "emails",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of the member's email addresses." },
            { "name": "phones",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of the member's phone numbers." },
            { "name": "labels",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of the member's labels. [Labels](https://support.wix.com/en/article/creating-contact-labels)\n are used to organize contacts. When setting the `labels` property, you can\n only list labels that already exist in your site's [Contacts List](https://support.wix.com/en/article/accessing-your-contact-list)." },
            { "name": "picture",
              "type": "wix-users-backend.Picture",
              "doc": "Member's picture." },
            { "name": "customFields",
              "type":
                [ "string",
                  "number",
                  "Date" ],
              "doc": "Any\n number of custom fields. [Custom fields](https://support.wix.com/en/article/adding-custom-fields-to-contacts)\n are used to store additional information about your site's contacts. When\n setting a custom field, use key:value pairs where the key matches the display names\n in your site's [Contacts List](https://support.wix.com/en/article/accessing-your-contact-list).\n You can only set values for custom fields that already exist in the Contacts\n application." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "UserInfo",
        "locations":
          [ { "lineno": 493,
              "filename": "users.js" } ],
        "docs":
          { "summary": "An object that contains information about a site member.",
            "links": [],
            "examples":
              [ { "title": "Get a user by ID",
                  "body":
                    [ "// NOTE: This example uses the new wix-members-backend.members.getMember()",
                      "//       function, which replaces wixUsersBackend.getUser().",
                      "//       See the function description for more information, and",
                      "//       line 29 for the deprecated example.",
                      "",
                      "import { members } from 'wix-members-backend';",
                      "",
                      "// Sample id value:",
                      "// '60a91ab6-5e30-4af2-9d5e-a205c351ffd7'",
                      "//",
                      "// Sample fieldset value:",
                      "// 'FULL'",
                      "",
                      "export function myGetMemberFunction(id, fieldset) {",
                      "  return members.getMember(id, fieldset)",
                      "    .then((member) => {",
                      "      const slug = member.profile.slug;",
                      "      const fullName = `${member.contactDetails.firstName} ${member.contactDetails.lastName}`;",
                      "      const contactId = member.contactId;",
                      "      return member;",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}",
                      "",
                      "",
                      "",
                      "// NOTE: This example uses the deprecated",
                      "//       wixUsersBackend.getUser() function.",
                      "",
                      "import wixUsersBackend from 'wix-users-backend';",
                      "",
                      "export function getUser(id) {",
                      "  return wixUsersBackend.getUser(id)",
                      "    .then((user) => {",
                      "      return user;",
                      "    });",
                      "}",
                      "",
                      "/* Returns a promise that resolves to:",
                      " *",
                      " * {",
                      " *   \"id\": \"dn8sf9c2-4e9f-a02d-a58d-f244d999729a\",",
                      " *   \"memberName\": \"John Doe\",",
                      " *   \"firstName\": \"John\",",
                      " *   \"lastName\": \"Doe\",",
                      " *   \"nickname\": \"johnd\",",
                      " *   \"slug\": \"johnd123\",",
                      " *   \"language\": \"en\",",
                      " *   \"status\": \"ACTIVE\",",
                      " *   \"loginEmail\": \"john.doe@somedomain.com\",",
                      " *   \"creationDate\": \"2019-08-05T11:29:39Z\",",
                      " *   \"lastUpdateDate\": \"2019-08-12T12:29:43.810Z\",",
                      " *   \"lastLoginDate\": \"2019-08-12T13:42:30Z\",",
                      " *   \"emails\": [",
                      " *     \"john.doe@somedomain.com\",",
                      " *     \"doughyjohn@anotherdomain.com\"",
                      " *   ],",
                      " *   \"phones\": [",
                      " *     \"5555555555\",",
                      " *     \"5555555556\"",
                      " *   ],",
                      " *   \"labels\": [",
                      " *     \"contacts-new\",",
                      " *     \"contacts-site_members_approved\"",
                      " *   ],",
                      " *   \"picture\": {",
                      " *     \"url\": \"https://.../photo.jpg\"",
                      " *   }",
                      " *   \"customText\": \"Custom Text\",",
                      " *   \"customNumber\": 12345",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "firstName",
              "type": "string",
              "doc": "Member's first name.",
              "optional": true },
            { "name": "lastName",
              "type": "string",
              "doc": "Member's last name.",
              "optional": true },
            { "name": "nickname",
              "type": "string",
              "doc": "The name the member specified on their profile.",
              "optional": true },
            { "name": "slug",
              "type": "string",
              "doc": "The member's URL-friendly name that is unique across your site. Typically this is made up of the member's email prefix.",
              "optional": true },
            { "name": "emails",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of the member's email addresses.",
              "optional": true },
            { "name": "phones",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of the member's phone numbers.",
              "optional": true },
            { "name": "labels",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of the member's labels. [Labels](https://support.wix.com/en/article/creating-contact-labels)\n are used to organize contacts. When setting the `labels` property, you can\n only list labels that already exist in your site's [Contacts List](https://support.wix.com/en/article/accessing-your-contact-list).",
              "optional": true },
            { "name": "picture",
              "type": "wix-users-backend.Picture",
              "doc": "Member's picture.",
              "optional": true },
            { "name": "customFields",
              "type":
                [ "string",
                  "number",
                  "Date" ],
              "doc": "Any\n number of custom fields. [Custom fields](https://support.wix.com/en/article/adding-custom-fields-to-contacts)\n are used to store additional information about your site's contacts. When\n setting a custom field, use key:value pairs where the key matches the display names\n in your site's [Contacts List](https://support.wix.com/en/article/accessing-your-contact-list).\n You can only set values for custom fields that already exist in the Contacts\n application.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  },
  "menuSections": "APIs",
  "relatedContent":
    [ { "icon": "article",
        "text": "Security Considerations",
        "url": "https://support.wix.com/en/article/velo-security-best-practices" },
      { "icon": "example",
        "text": "Members Area",
        "url": "https://www.wix.com/velo/example/members-area" } ],
  "FAQs":
    [ { "title": "When should I write code in the backend instead of the client side?\n",
        "markdown": "You may want to write your code in the backend in the following cases:\n\n*   When you don't want visitors to view or manipulate code containing sensitive information such as payment details or API keys. \n*   When you perform security checks or validations that expose private data such as emails and passwords. \n*   When you've set your collection permissions so that a particular role cannot access a collection, but you want visitors with that role to partially access the collection in some manner. In this case you can suppress permission checks using [`suppressAuth`](https://www.wix.com/code/reference/wix-data.html#WixDataOptions).\n\n[Learn more](https://support.wix.com/en/article/wix-code-security-considerations) about writing code in the backend." },
      { "title": "How can I get the current user's name?",
        "markdown": "Use the [`currentUser`](https://www.wix.com/code/reference/wix-users-backend.html#currentUser) property to get the current user's `id`. Then query the Members/PrivateMembersData collection for the item with that `_id`.\n\n```javascript\n\nwixData.query(\"Members/PrivateMembersData\") \\\n  .eq(\"_id\", wixUsersBackend.currentUser.id) \\\n  .find() \\\n  .then( (results) => { \\\n    lastName = results.items[0].lastName; \\\n  } );\n\n``` " },
      { "title": "How do I use a 3rd-party application to authenticate my users?",
        "markdown": "You can call your 3rd-party authentication service using [`wix-fetch`](https://www.wix.com/code/reference/wix-fetch.html) and then use the [`generateSessionToken()`](https://www.wix.com/code/reference/wix-users-backend.html#generateSessionToken) function to get a token to login the user as shown in the **Log a user in after 3rd-party authentication** example." } ] }