{
  "name": "Messages",
  "memberOf": "wix-inbox-v2",
  "mixes": [],
  "callbacks": [],
  "extra": {},
  "clientId": "wix-inbox.v2-message",
  "docs": {},
  "relatedGuides": [],
  "properties": [],
  "operations": [
    {
      "name": "listMessages",
      "params": [
        {
          "name": "conversationId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the conversation that contains the intended messages.",
          "required": true
        },
        {
          "name": "visibility",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "__Required.__\nFilters for messages with the specified visibility setting.\n\n- `\"BUSINESS_AND_PARTICIPANT\"`: Return messages visible to the business and the participant.\n- `\"BUSINESS\"`: Return all messages.",
          "required": true
        },
        {
          "name": "options",
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ListMessagesOptions"
            }
          ],
          "doc": "Additional options for listing messages.",
          "required": false
        }
      ],
      "requiredFields": [
        "conversationId",
        "visibility"
      ],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-inbox-v2.Messages.ListMessagesResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Retrieves messages between the business and participant.",
        "description": [
          "Up to 30 messages are returned per request. If the number of messages in a conversation is larger than 30,\n`pagingMetadata.cursors` is returned in the response, indicating that another page of results is available.\nTo retrieve the next page of messages, pass the `next` cursor value\nin the next request's `paging.cursor` parameter.\n\nTo ensure you'll always retrieve the next record,\nuse the same visibility and sorting\nin the first request and all subsequent requests.\n\nBy default,\n30 messages are retrieved and sorted by `sequence` in descending order\n(the most recent messages are first in the list)."
        ],
        "examples": [
          {
            "title": "View a list of sent messages (dashboard page code)",
            "body": [
              "import { messages } from 'wix-inbox.v2';",
              "",
              "/* Sample conversationId value: '9ac410b1-17f8-3b10-a3f4-0dd5c295d510'",
              " * ",
              " * Sample visibility value: 'BUSINESS_AND_PARTICIPANT'",
              " */",
              "",
              "export async function myListMessagesFunction(conversationId, visibility) {",
              "  ",
              "  try {",
              "    const messageList = await messages.listMessages(conversationId, visibility);",
              "    const firstSender = messageList.messages[0].sender;",
              "    ",
              "    return messageList;",
              "  } catch(error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "}",
              "",
              "/* Promise resolves to:",
              " * {",
              " *   \"messages\": [",
              " *     {",
              " *       \"_createdDate\": \"2023-12-28T09:41:06.660Z\",",
              " *       \"_id\": \"1703756466660667\",",
              " *       \"appId\": \"14517e1a-3ff0-af98-408e-2bd6953c36a2\",",
              " *       \"badges\": [],",
              " *       \"content\": {",
              " *         \"previewText\": \"thanks for the content\",",
              " *         \"basic\": {",
              " *           \"items\": [",
              " *             {",
              " *               \"text\": \"thanks for the content\"",
              " *             }",
              " *           ]",
              " *         },",
              " *       },",
              " *       \"direction\": \"PARTICIPANT_TO_BUSINESS\",",
              " *       \"sender\": {",
              " *         \"anonymousVisitorId\": \"3c06d38d-1433-4889-b303-1ff1779176e6\"",
              " *       },",
              " *       \"sequence\": \"1703756466660667\",",
              " *       \"sourceChannel\": \"UNKNOWN_CHANNEL_TYPE\",",
              " *       \"targetChannels\": [],",
              " *       \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " *     },",
              " *     {",
              " *       \"_createdDate\": \"2023-12-27T16:16:07.816Z\",",
              " *       \"_id\": \"1703693767816923\",",
              " *       \"badges\": [],",
              " *       \"content\": {",
              " *         \"previewText\": \"Thanks for the like :)\",",
              " *         \"basic\": {",
              " *           \"items\": [",
              " *             {",
              " *               \"text\": \"Thanks for the like :)\"",
              " *             }",
              " *           ]",
              " *         },",
              " *       },",
              " *       \"direction\": \"BUSINESS_TO_PARTICIPANT\",",
              " *       \"sender\": {",
              " *         \"wixUserId\": \"b17c523c-6ec9-4b56-9d9d-123cc6978bdf\"",
              " *       },",
              " *       \"sequence\": \"1703693767816923\",",
              " *       \"sourceChannel\": \"UNKNOWN_CHANNEL_TYPE\",",
              " *       \"targetChannels\": [",
              " *         \"CHAT\"",
              " *       ],",
              " *       \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " *     }",
              " *   ],",
              " *   \"pagingMetadata\": {",
              " *     \"tooManyToCount\": true",
              " *   }",
              " * }",
              " */"
            ]
          },
          {
            "title": "View a list of sent messages (export from backend code)",
            "body": [
              "import { Permissions, webMethod } from 'wix-web-module';",
              "import { messages } from 'wix-inbox.v2';",
              "import { elevate } from 'wix-auth';",
              "",
              "/* Sample conversationId value: '9ac410b1-17f8-3b10-a3f4-0dd5c295d510'",
              " * ",
              " * Sample visibility value: 'BUSINESS_AND_PARTICIPANT'",
              " */",
              "",
              "export const myListMessagesFunction = webMethod(Permissions.Anyone, async (conversationId, visibility) => {",
              "  try {",
              "    const elevatedListMessages = elevate(messages.listMessages);",
              "    const messageList = await elevatedListMessages(conversationId, visibility);",
              "    const firstSender = messageList.messages[0].sender;",
              "    ",
              "    return messageList;",
              "  } catch(error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "});",
              "",
              "/* Promise resolves to:",
              " * {",
              " *   \"messages\": [",
              " *     {",
              " *       \"_createdDate\": \"2023-12-28T09:41:06.660Z\",",
              " *       \"_id\": \"1703756466660667\",",
              " *       \"appId\": \"14517e1a-3ff0-af98-408e-2bd6953c36a2\",",
              " *       \"badges\": [],",
              " *       \"content\": {",
              " *         \"previewText\": \"thanks for the content\",",
              " *         \"basic\": {",
              " *           \"items\": [",
              " *             {",
              " *               \"text\": \"thanks for the content\"",
              " *             }",
              " *           ]",
              " *         },",
              " *       },",
              " *       \"direction\": \"PARTICIPANT_TO_BUSINESS\",",
              " *       \"sender\": {",
              " *         \"anonymousVisitorId\": \"3c06d38d-1433-4889-b303-1ff1779176e6\"",
              " *       },",
              " *       \"sequence\": \"1703756466660667\",",
              " *       \"sourceChannel\": \"UNKNOWN_CHANNEL_TYPE\",",
              " *       \"targetChannels\": [],",
              " *       \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " *     },",
              " *     {",
              " *       \"_createdDate\": \"2023-12-27T16:16:07.816Z\",",
              " *       \"_id\": \"1703693767816923\",",
              " *       \"badges\": [],",
              " *       \"content\": {",
              " *         \"previewText\": \"Thanks for the like :)\",",
              " *         \"basic\": {",
              " *           \"items\": [",
              " *             {",
              " *               \"text\": \"Thanks for the like :)\"",
              " *             }",
              " *           ]",
              " *         },",
              " *       },",
              " *       \"direction\": \"BUSINESS_TO_PARTICIPANT\",",
              " *       \"sender\": {",
              " *         \"wixUserId\": \"b17c523c-6ec9-4b56-9d9d-123cc6978bdf\"",
              " *       },",
              " *       \"sequence\": \"1703693767816923\",",
              " *       \"sourceChannel\": \"UNKNOWN_CHANNEL_TYPE\",",
              " *       \"targetChannels\": [",
              " *         \"CHAT\"",
              " *       ],",
              " *       \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " *     }",
              " *   ],",
              " *   \"pagingMetadata\": {",
              " *     \"tooManyToCount\": true",
              " *   }",
              " * }",
              " */",
              ""
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "listMessages",
      "isAdminMethod": true
    },
    {
      "name": "sendMessage",
      "params": [
        {
          "name": "conversationId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the conversation to add the message to.",
          "required": true
        },
        {
          "name": "message",
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Message"
            }
          ],
          "doc": "Message to send.",
          "required": true
        },
        {
          "name": "options",
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.SendMessageOptions"
            }
          ],
          "doc": "Additional options for sending a message.",
          "required": false
        }
      ],
      "requiredFields": [
        "conversationId",
        "message",
        "message.content"
      ],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-inbox-v2.Messages.SendMessageResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Sends a message to the business or participant.",
        "description": [
          "Specify the message type in `message.content`\nby including the appropriate object: `basic`, `template`, `minimal`, or `form`.\nFor more information on message types\nand how each type renders in Inbox and the Chat widget,\nsee [Message Types](#message-types)."
        ],
        "examples": [
          {
            "title": "Send a basic message (dashboard page code)",
            "body": [
              "import { messages } from 'wix-inbox.v2';",
              "",
              "/* Sample conversationId value: 'e56ed8f7-4bbf-3d99-b2f9-962e555264c3'",
              " *",
              " * Sample messsage value:",
              " * {",
              " *     content: {",
              " *       previewText: \"Welcome\",",
              " *       basic: {",
              " *         items: [",
              " *           {",
              " *             text: \"Welcome to Amy's Shoes!\"",
              " *           }",
              " *         ]",
              " *       }",
              " *     },",
              " *     visibility: 'BUSINESS_AND_PARTICIPANT',",
              " *     direction: 'BUSINESS_TO_PARTICIPANT',",
              " *     sourceChannel: 'CHAT',",
              " *     targetChannels: ['CHAT']",
              " * }",
              " */",
              "",
              "export async function mySendMessageFunction(conversationId, message) {",
              "  try {",
              "    const basicMessage = await messages.sendMessage(conversationId, message);",
              "    const messageId = basicMessage.message._id;",
              "    const sender = basicMessage.message.sender;",
              "    const visibility = basicMessage.message.visibility;",
              "",
              "    return basicMessage;",
              "  } catch (error) {",
              "    console.error(error);",
              "    //Handle the error",
              "  }",
              "",
              "}",
              "",
              "/* Promise resolves to:",
              " * {",
              " *   \"_createdDate\": \"2023-11-27T16:51:58.040Z\"",
              " *   \"_id\": \"1701103918040190\",",
              " *   \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\",",
              " *   \"badges\": [],",
              " *   \"content\": {",
              " *     \"previewText\": \"Welcome\",",
              " *     \"contentType\": \"BASIC\"",
              " *     \"basic\": {",
              " *       \"items\": [",
              " *         {",
              " *           \"text\": \"Welcome to Amy's Shoes!\"",
              " *         }",
              " *       ]",
              " *     },",
              " *   },",
              " *   \"direction\": \"BUSINESS_TO_PARTICIPANT\",",
              " *   \"sender\": {",
              " *     \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\"",
              " *   },",
              " *   \"sequence\": \"1701103918040190\",",
              " *   \"sourceChannel\": \"CHAT\",",
              " *   \"targetChannels\": [",
              " *     \"CHAT\"",
              " *   ],",
              " *   \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " * }",
              " */"
            ]
          },
          {
            "title": "Send a basic message (export from backend code)",
            "body": [
              "import { Permissions, webMethod } from 'wix-web-module';",
              "import { messages } from 'wix-inbox.v2';",
              "import { elevate } from 'wix-auth';",
              "",
              "/* Sample conversationId value: 'e56ed8f7-4bbf-3d99-b2f9-962e555264c3'",
              " *",
              " * Sample messsage value:",
              " * {",
              " *     content: {",
              " *       previewText: \"Welcome\",",
              " *       basic: {",
              " *         items: [",
              " *           {",
              " *             text: \"Welcome to Amy's Shoes!\"",
              " *           }",
              " *         ]",
              " *       }",
              " *     },",
              " *     visibility: 'BUSINESS_AND_PARTICIPANT',",
              " *     direction: 'BUSINESS_TO_PARTICIPANT',",
              " *     sourceChannel: 'CHAT',",
              " *     targetChannels: ['CHAT']",
              " * }",
              " */",
              "",
              "export const mySendMessageFunction = webMethod(Permissions.Anyone, async (conversationId, message) => {",
              "  const elevatedSendMessage = elevate(messages.sendMessage);",
              "",
              "  try {",
              "    const basicMessage = await elevatedSendMessage(conversationId, message);",
              "    const messageId = basicMessage.message._id;",
              "    const sender = basicMessage.message.sender;",
              "    const visibility = basicMessage.message.visibility;",
              "",
              "    return basicMessage;",
              "  } catch (error) {",
              "    console.error(error);",
              "    //Handle the error",
              "  }",
              "",
              "});",
              "",
              "/* Promise resolves to:",
              " * {",
              " *   \"_createdDate\": \"2023-11-27T16:51:58.040Z\"",
              " *   \"_id\": \"1701103918040190\",",
              " *   \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\",",
              " *   \"badges\": [],",
              " *   \"content\": {",
              " *     \"previewText\": \"Welcome\",",
              " *     \"contentType\": \"BASIC\"",
              " *     \"basic\": {",
              " *       \"items\": [",
              " *         {",
              " *           \"text\": \"Welcome to Amy's Shoes!\"",
              " *         }",
              " *       ]",
              " *     },",
              " *   },",
              " *   \"direction\": \"BUSINESS_TO_PARTICIPANT\",",
              " *   \"sender\": {",
              " *     \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\"",
              " *   },",
              " *   \"sequence\": \"1701103918040190\",",
              " *   \"sourceChannel\": \"CHAT\",",
              " *   \"targetChannels\": [",
              " *     \"CHAT\"",
              " *   ],",
              " *   \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " * }",
              " */",
              ""
            ]
          },
          {
            "title": "Send a template message  ",
            "body": [
              "import { Permissions, webMethod } from 'wix-web-module';",
              "import { messages } from 'wix-inbox.v2';",
              "import { elevate } from 'wix-auth';",
              "",
              "/* Sample conversationId value: '74aa9ee1-8e36-3028-b441-57dacfbd841e'",
              " * ",
              " * Sample message value: ",
              " * {",
              " *     direction: 'BUSINESS_TO_PARTICIPANT',",
              " *     visibility: 'BUSINESS_AND_PARTICIPANT',",
              " *     content: {",
              " *       previewText: \"JoJo, you're getting a spa day!\",",
              " *       template: {",
              " *         title: \"JoJo, you're getting a spa day!\",",
              " *         imageUrl: 'https://static.wixstatic.com/media/f93e3d633e79921f14330f1911fc1139.jpg/v1/fill/w_1200,h_798,al_c,q_85,usm_0.66_1.00_0.01/f93e3d633e79921f14330f1911fc1139.webp',",
              " *         textLines: [",
              " *           \"Thanks for booking with us!\",",
              " *           \"You're booked for a massage, mud bath, and facial on May 9, 2021.\"",
              " *         ],",
              " *         buttons: [{",
              " *           label: 'View My Invoice',",
              " *           launchUrl: 'https://static.wixstatic.com/media/f93e3d633e79921f14330f1911fc1139.jpg/v1/fill/w_1200,h_798,al_c,q_85,usm_0.66_1.00_0.01/f93e3d633e79921f14330f1911fc1139.webp'",
              " *         },",
              " *         {",
              " *           label: 'Change My Appointment',",
              " *         postbackProperties: {",
              " *           interactionId: 'spa_day_54321__change_appointment'",
              " *           }",
              " *         }",
              " *         ]",
              " *       }",
              " *     },",
              " *     sourceChannel: \"CHAT\",",
              " *     targetChannels: ['CHAT']",
              " *   }",
              " */",
              "",
              "export const mySendMessageFunction = webMethod(Permissions.Anyone, async (conversationId, message) => {",
              "  const elevatedSendMessage = elevate(messages.sendMessage);",
              "",
              "  try {",
              "    const templateMessage = await elevatedSendMessage(conversationId, message);",
              "",
              "    return templateMessage;",
              "  } catch (error) {",
              "    console.log(error);",
              "    //Handle the error",
              "  }",
              "",
              "});",
              "",
              "/* Promise resolves to:",
              " * {",
              " *   \"_createdDate\": \"2023-11-29T10:40:52.822Z\",",
              " *     \"_id\": \"1701254452822623\",",
              " *     \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\",",
              " *     \"badges\": [],",
              " *      \"message\": {",
              " *        \"content\": {",
              " *          \"previewText\": \"JoJo, you're getting a spa day!\",",
              " *          \"template\": {",
              " *            \"buttons\": ",
              " *            [",
              " *              {",
              " *                \"label\": \"View My Invoice\",",
              " *                \"launchUrl\": \"https://static.wixstatic.com/media/f93e3d633e79921f14330f1911fc1139.jpg/v1/fill/w_1200,h_798,al_c,q_85,usm_0.6 6_1.00_0.01/f93e3d633e79921f14330f1911fc1139.webp\"",
              " *              },",
              " *              {",
              " *                \"label\": \"Change My Appointment\",",
              " *                \"postbackProperties\": ",
              " *                {",
              " *                  \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\",",
              " *                  \"interactionId\": \"spa_day_54321__change_appointment\"",
              " *                }",
              " *              }",
              " *            ],",
              " *          \"imageUrl\": \"https://static.wixstatic.com/media/f93e3d633e79921f14330f1911fc1139.jpg/v1/fill/w_1200,h_798,al_c,q_85,usm_0.66_1.0 0_0.01/f93e3d633e79921f14330f1911fc1139.webp\"",
              " *          \"orientation\": \"PORTRAIT\",",
              " *          \"textLines\": ",
              " *          [",
              " *            \"Thanks for booking with us!\",",
              " *            \"You're booked for a massage, mud bath, and facial on May 9, 2021.\"",
              " *          ],",
              " *          \"title\": \"JoJo, you're getting a spa day!\"",
              " *       },",
              " *     },",
              " *     \"direction\": \"BUSINESS_TO_PARTICIPANT\",",
              " *       \"sender\": {",
              " *       \"appId\": \"151e476a-715e-ec33-db9a-a7ff4d51f70a\"",
              " *     },",
              " *     \"sequence\": \"1701254452822623\",",
              " *     \"sourceChannel\": \"CHAT\",",
              " *     \"targetChannels\": [],",
              " *      \"visibility\": \"BUSINESS_AND_PARTICIPANT\",",
              " *     }",
              " * }",
              " */",
              ""
            ]
          },
          {
            "title": "Send a minimal message to a site visitor ",
            "body": [
              "/****************************",
              " * Backend code - events.js *",
              " ****************************/",
              "",
              "import { sendMinimalMessage } from 'backend/inbox.web';",
              "",
              "export function wixBlog_onPostLiked(event) {",
              "  console.log(`New post liked with ID ${event.data.postId}`);",
              "  const anonymousVisitorId = event.data.anonymousVisitorId;",
              "  sendMinimalMessage(anonymousVisitorId);",
              "}",
              "",
              "/*******************************",
              " * Backend code - inbox.web.js *",
              " *******************************/",
              "",
              "import { Permissions, webMethod } from 'wix-web-module';",
              "import { conversations, messages } from 'wix-inbox.v2';",
              "import { elevate } from 'wix-auth';",
              "",
              "export const sendMinimalMessage = webMethod(Permissions.Anyone, async (anonymousVisitorId) => {",
              "  const message = {",
              "    direction: 'PARTICIPANT_TO_BUSINESS',",
              "    visibility: 'BUSINESS',",
              "    content: {",
              "      previewText: 'New Like',",
              "      minimal: {",
              "        text: 'New Like',",
              "        iconUrl: 'https://static.wixstatic.com/media/727514_1a58537f1b6a44a7b09956cdbc5ac774~mv2.png/v1/fill/w_297,h_324,al_c,lg_1,q_85/727514_1a58537f1b6a44a7b09956cdbc5ac774~mv2.webp'",
              "      }",
              "    }",
              "  }",
              "",
              "  try {",
              "    const conversationId = await getOrCreateConversationIdFromVisitor(anonymousVisitorId);",
              "",
              "    const elevatedSendMessage = elevate(messages.sendMessage);",
              "    const minimalMessage = await elevatedSendMessage(conversationId, message);",
              "    console.log(`The message object returned is ${minimalMessage}`);",
              "",
              "    return minimalMessage;",
              "  } catch (error) {",
              "    console.error(error);",
              "    //Handle the error",
              "  }",
              "});",
              "",
              "export const getOrCreateConversationIdFromVisitor = webMethod(Permissions.Anyone, async (anonymousVisitorId) => {",
              "  const participantId = {",
              "    anonymousVisitorId: anonymousVisitorId",
              "  };",
              "",
              "  try {",
              "    const elevatedGetOrCreateConversation = elevate(conversations.getOrCreateConversation);",
              "    const conversationObject = await elevatedGetOrCreateConversation(participantId);",
              "",
              "    return conversationObject.conversation._id;",
              "  } catch (error) {",
              "    console.error(error);",
              "    //Handle the error",
              "  }",
              "});"
            ],
            "extra": {
              "description": "This code detects a when a site visitor likes a blog post by registering the `onPostLiked` event listener in the `events.js` file. This event triggers an event object containing the `anonymousVisitorId`, which is  passed as an argument to `getOrCreateConversationIdFromVisitor`. The conversationId is returned and passed as a parameter to `sendMinimal`, which sends a minimal message to the site owner's inbox dashboard."
            }
          },
          {
            "title": "Get or create a new conversation with a member ",
            "body": [
              "/*******************************",
              " * Backend code - inbox.web.js *",
              " *******************************/",
              "",
              "import { Permissions, webMethod } from 'wix-web-module';",
              "import { conversations, messages } from 'wix-inbox.v2';",
              "import { currentMember } from 'wix-members-backend'",
              "import { elevate } from 'wix-auth';",
              "",
              "export const sendFormData = webMethod(Permissions.Anyone, async (formData) => {",
              "  const message = {",
              "    direction: 'PARTICIPANT_TO_BUSINESS',",
              "    visibility: 'BUSINESS',",
              "    content: {",
              "      previewText: 'New Contact',",
              "      form: {",
              "        title: 'New Contact',",
              "        description: 'New Contact Form',",
              "        fields: [",
              "          { ",
              "            name: 'First Name', ",
              "            value: formData.firstName",
              "          },",
              "          { ",
              "            name: 'Last Name', ",
              "            value: formData.lastName ",
              "          },",
              "          { ",
              "            name: 'email', ",
              "            value: formData.email ",
              "          },",
              "          { ",
              "            name: 'Wants Newsletter', ",
              "            value: formData.subscribeNewsletter.toString() ",
              "          }",
              "        ],",
              "      }",
              "    }",
              "  }",
              "  ",
              "  try {",
              "    const conversationId = await getOrCreateConversationIdFromMember();",
              "",
              "    const elevatedSendMessage = elevate(messages.sendMessage);",
              "    const formMessage = await elevatedSendMessage(conversationId, message);",
              "",
              "    return formMessage;",
              "  } catch (error) {",
              "    console.error(error);",
              "    //Handle the error",
              "  }",
              "});",
              "",
              "export const getOrCreateConversationIdFromMember = webMethod(Permissions.Anyone, async () => {",
              "  const member = await currentMember.getMember();",
              "  const participantId = { ",
              "    memberId: member._id ",
              "  };",
              "  ",
              "  try {",
              "    const elevatedGetOrCreateConversation = elevate(conversations.getOrCreateConversation);",
              "    const conversationObject = await elevatedGetOrCreateConversation(participantId);",
              "    ",
              "    return conversationObject.converation._id;",
              "  } catch (error) {",
              "    console.error(error);",
              "    //Handle the error",
              "  }",
              "});",
              "/*************",
              " * Page code *",
              " *************/",
              "",
              "import { sendFormData } from 'backend/inbox.web';",
              "",
              "$w.onReady(function () {",
              "  $w('#submitButton').onClick(async () => {",
              "    const firstName = $w('#firstName').value;",
              "    const lastName = $w('#lastName').value;",
              "    const email = $w('#email').value;",
              "    const subscribeNewsletter = $w('#subscribeNewsletter').checked;",
              "    const dataToInsert = {",
              "      firstName,",
              "      lastName,",
              "      email,",
              "      subscribeNewsletter",
              "    };",
              "",
              "    const formData = await sendFormData(dataToInsert);",
              "    console.log(`The form data is ${formData}`);",
              "  });",
              "});"
            ],
            "extra": {
              "description": "The page code passes input values submitted by a logged-in member to the backend `sendFormData` function. This function retrieves the logged-in member ID, gets an existing or creates a new converation object and uses the conversation ID to send a form message to the site owner's inbox dashboard."
            }
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "sendMessage",
      "isAdminMethod": true
    }
  ],
  "messages": [
    {
      "name": "ActionEvent",
      "members": [
        {
          "name": "bodyAsJson",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "AddMessageIndicationsOptions",
      "members": [
        {
          "name": "indication",
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.MessageIndication"
            }
          ],
          "doc": ""
        },
        {
          "name": "messageIds",
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": ""
        },
        {
          "name": "performedBy",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "by whom this action was done, defaults to PARTICIPANT in case of UNKNOWN_PERFORMED_BY"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "AddMessageIndicationsRequest",
      "members": [
        {
          "name": "conversationId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        },
        {
          "name": "indication",
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.MessageIndication"
            }
          ],
          "doc": ""
        },
        {
          "name": "messageIds",
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": ""
        },
        {
          "name": "performedBy",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "by whom this action was done, defaults to PARTICIPANT in case of UNKNOWN_PERFORMED_BY"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "AddMessageIndicationsResponse",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Badge",
      "members": [
        {
          "name": "badgeVisibility",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Controls whether the badge is visible to the participant.\nCurrently not supported in the Chat widget."
        },
        {
          "name": "iconUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL where the icon is hosted."
        },
        {
          "name": "text",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Display text."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "BasicMessageData",
      "members": [
        {
          "name": "file",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.FileMessage"
            }
          ],
          "doc": "File attachment.\nCan contain a file from Wix Media or an external provider."
        },
        {
          "name": "image",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ImageMessage"
            }
          ],
          "doc": "Image message.\nCan contain an image from Wix Media\nor from an external provider."
        },
        {
          "name": "text",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Text message."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfBasicMessageDataDataOneOf",
            "members": [
              "file",
              "image",
              "text"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "BasicMessageDataDataOneOf",
      "members": [
        {
          "name": "file",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.FileMessage"
            }
          ],
          "doc": "File attachment.\nCan contain a file from Wix Media or an external provider."
        },
        {
          "name": "image",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ImageMessage"
            }
          ],
          "doc": "Image message.\nCan contain an image from Wix Media\nor from an external provider."
        },
        {
          "name": "text",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Text message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "BasicMessagePayload",
      "members": [
        {
          "name": "items",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.BasicMessageData"
                  }
                ]
              }
            }
          ],
          "doc": "List of plain text messages, images, and/or files.\nList items are displayed as separate messages\nin Inbox and the site's chat widget."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Button",
      "members": [
        {
          "name": "label",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Button label text."
        },
        {
          "name": "launchUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "If included, the button launches the specified URL."
        },
        {
          "name": "postbackProperties",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.PostbackProperties"
            }
          ],
          "doc": "Properties to pass to the `onMessageButtonInteracted()` event when the button is clicked."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ButtonInteracted",
      "members": [
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "[Your app's](https://dev.wix.com/dc3/my-apps) app ID."
        },
        {
          "name": "conversationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Conversation ID."
        },
        {
          "name": "interactedBy",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.IdentificationData"
            }
          ],
          "doc": "ID of the participant who pressed the button."
        },
        {
          "name": "interactionId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID you define for the interaction,\nto be handled by your server."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "CursorPaging",
      "members": [
        {
          "name": "cursor",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Pointer to the next or previous page in the list of results.\n\nPass the relevant cursor token from the `pagingMetadata` object in the previous call's response.\nNot relevant for the first request.\n"
        },
        {
          "name": "limit",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Maximum number of items to return in the results."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Cursors",
      "members": [
        {
          "name": "next",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Cursor string pointing to the next page in the list of results."
        },
        {
          "name": "prev",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Cursor pointing to the previous page in the list of results."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "CustomMessageData",
      "members": [
        {
          "name": "appData",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Record",
                "typeParams": [
                  {
                    "nativeType": "string"
                  },
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "Data set by the sending application"
        },
        {
          "name": "appName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Name of the app this message belong to"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "DomainEvent",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Unique event ID.\nAllows clients to ignore duplicate webhooks."
        },
        {
          "name": "actionEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ActionEvent"
            }
          ],
          "doc": ""
        },
        {
          "name": "createdEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.EntityCreatedEvent"
            }
          ],
          "doc": ""
        },
        {
          "name": "deletedEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.EntityDeletedEvent"
            }
          ],
          "doc": ""
        },
        {
          "name": "entityEventSequence",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "A sequence number defining the order of updates to the underlying entity.\nFor example, given that some entity was updated at 16:00 and than again at 16:01,\nit is guaranteed that the sequence number of the second update is strictly higher than the first.\nAs the consumer, you can use this value to ensure that you handle messages in the correct order.\nTo do so, you will need to persist this number on your end, and compare the sequence number from the\nmessage against the one you have stored. Given that the stored number is higher, you should ignore the message."
        },
        {
          "name": "entityFqdn",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Assumes actions are also always typed to an entity_type\nExample: wix.stores.catalog.product, wix.bookings.session, wix.payments.transaction"
        },
        {
          "name": "entityId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the entity associated with the event."
        },
        {
          "name": "eventTime",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Event timestamp."
        },
        {
          "name": "originatedFrom",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "If present, indicates the action that triggered the event."
        },
        {
          "name": "slug",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "This is top level to ease client code dispatching of messages (switch on entity_fqdn+slug)\nThis is although the created/updated/deleted notion is duplication of the oneof types\nExample: created/updated/deleted/started/completed/email_opened"
        },
        {
          "name": "triggeredByAnonymizeRequest",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the event was triggered as a result of a privacy regulation application\n(for example, GDPR)."
        },
        {
          "name": "updatedEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.EntityUpdatedEvent"
            }
          ],
          "doc": ""
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfDomainEventBodyOneOf",
            "members": [
              "actionEvent",
              "createdEvent",
              "deletedEvent",
              "updatedEvent"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "DomainEventBodyOneOf",
      "members": [
        {
          "name": "actionEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ActionEvent"
            }
          ],
          "doc": ""
        },
        {
          "name": "createdEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.EntityCreatedEvent"
            }
          ],
          "doc": ""
        },
        {
          "name": "deletedEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.EntityDeletedEvent"
            }
          ],
          "doc": ""
        },
        {
          "name": "updatedEvent",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.EntityUpdatedEvent"
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Empty",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "EntityCreatedEvent",
      "members": [
        {
          "name": "entityAsJson",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "EntityDeletedEvent",
      "members": [
        {
          "name": "deletedEntityAsJson",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Entity that was deleted"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "EntityUpdatedEvent",
      "members": [
        {
          "name": "currentEntityAsJson",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Since platformized APIs only expose PATCH and not PUT we can't assume that the fields sent from the client are the actual diff.\nThis means that to generate a list of changed fields (as opposed to sent fields) one needs to traverse both objects.\nWe don't want to impose this on all developers and so we leave this traversal to the notification recipients which need it."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "FileMessage",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Wix Media ID."
        },
        {
          "name": "filename",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "File name of the original file."
        },
        {
          "name": "mimeType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "File [MIME type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types)."
        },
        {
          "name": "url",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL where the file is hosted."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "FormField",
      "members": [
        {
          "name": "name",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Form field display name."
        },
        {
          "name": "value",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Submitted value."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "FormMessagePayload",
      "members": [
        {
          "name": "description",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Form description displayed below the title."
        },
        {
          "name": "fields",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.FormField"
                  }
                ]
              }
            }
          ],
          "doc": "List of form fields and values."
        },
        {
          "name": "media",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.MediaItem"
                  }
                ]
              }
            }
          ],
          "doc": "List of files and/or images attached to the form.\n\nList items are displayed as separate messages\nin Inbox and the site's chat widget.\n"
        },
        {
          "name": "title",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Form title displayed in the message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetMessageIndicationsRequest",
      "members": [
        {
          "name": "conversationId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        },
        {
          "name": "messageId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetMessageIndicationsResponse",
      "members": [
        {
          "name": "messageIndications",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.MessageIndication"
                  }
                ]
              }
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationData",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Anonymous site visitor ID."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App ID."
        },
        {
          "name": "contactId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Optional site\n[contact](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fcontacts) ID."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Site\n[member](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fmember-permissions/members)\nID."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "User ID of the site owner or a site contributor."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfIdentificationDataIdOneOf",
            "members": [
              "anonymousVisitorId",
              "appId",
              "memberId",
              "wixUserId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationDataIdOneOf",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Anonymous site visitor ID."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App ID."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Site\n[member](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fmember-permissions/members)\nID."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "User ID of the site owner or a site contributor."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ImageMessage",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Wix Media ID."
        },
        {
          "name": "filename",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "File name of the original file."
        },
        {
          "name": "height",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Original image height, in pixels."
        },
        {
          "name": "url",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL where the image is hosted."
        },
        {
          "name": "width",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Original image width, in pixels."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "InteractionInfo",
      "members": [
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        },
        {
          "name": "interactionId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        }
      ],
      "docs": {
        "description": [
          "Source of interaction message, will be available when message originated by interaction with an application.\nlike clicking a button."
        ]
      }
    },
    {
      "name": "ListMessagesOptions",
      "members": [
        {
          "name": "paging",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.CursorPaging"
            }
          ],
          "doc": "Paging options."
        },
        {
          "name": "sorting",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Sorting"
            }
          ],
          "doc": "Sorting options."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ListMessagesRequest",
      "members": [
        {
          "name": "conversationId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the conversation that contains the intended messages."
        },
        {
          "name": "paging",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.CursorPaging"
            }
          ],
          "doc": "Paging options."
        },
        {
          "name": "sorting",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Sorting"
            }
          ],
          "doc": "Sorting options."
        },
        {
          "name": "visibility",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "__Required.__\nFilters for messages with the specified visibility setting.\n\n- `\"BUSINESS_AND_PARTICIPANT\"`: Return messages visible to the business and the participant.\n- `\"BUSINESS\"`: Return all messages.\n"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ListMessagesResponse",
      "members": [
        {
          "name": "messages",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.Message"
                  }
                ]
              }
            }
          ],
          "doc": "List of messages between the specified visitor and the site."
        },
        {
          "name": "pagingMetadata",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.PagingMetadataV2"
            }
          ],
          "doc": "Details on the paged set of results returned."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MediaItem",
      "members": [
        {
          "name": "file",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.FileMessage"
            }
          ],
          "doc": "File attachment.\nCan contain a file from Wix Media or an external provider."
        },
        {
          "name": "image",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ImageMessage"
            }
          ],
          "doc": "Image message.\nCan contain an image from Wix Media\nor from an external provider."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfMediaItemMediaOneOf",
            "members": [
              "file",
              "image"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MediaItemMediaOneOf",
      "members": [
        {
          "name": "file",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.FileMessage"
            }
          ],
          "doc": "File attachment.\nCan contain a file from Wix Media or an external provider."
        },
        {
          "name": "image",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.ImageMessage"
            }
          ],
          "doc": "Image message.\nCan contain an image from Wix Media\nor from an external provider."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Message",
      "members": [
        {
          "name": "_createdDate",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time the message was sent."
        },
        {
          "name": "_id",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Message ID."
        },
        {
          "name": "appId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Reserved for internal use.\n\nID of the application that sent the message.Omitted if the message was sent with the Chat widget."
        },
        {
          "name": "badges",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.Badge"
                  }
                ]
              }
            }
          ],
          "doc": "Optional icon and short text providing additional details about the message,\nsuch as the app from which the message was sent, or whether the message was an automated response.\n\nCurrently only 1 badge is supported.\n"
        },
        {
          "name": "content",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.MessageContent"
            }
          ],
          "doc": "Structured message content."
        },
        {
          "name": "direction",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "__Required.__\nMessage direction.\n\n- `\"BUSINESS_TO_PARTICIPANT\"`: The message was sent from the business to the participant.\n- `\"PARTICIPANT_TO_BUSINESS\"`: The message was sent from the participant to the business.\n"
        },
        {
          "name": "sender",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.IdentificationData"
            }
          ],
          "doc": "ID of the message sender.\n\nDefaults to the caller's ID using the property that matches their identity type.\n\nYou can override the default behavior when calling\n`sendMessage()` by using the `sendAs` field from the `options` object.\n"
        },
        {
          "name": "sequence",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Sequential ordering of the message.\n\nEnsures more accurate sorting than `createdDate`\nif two messages are sent at the same time."
        },
        {
          "name": "sourceChannel",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Communication channel the message is sent from."
        },
        {
          "name": "targetChannels",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "Communication channel to send the message to.\n\nCurrently messages can be sent to 1 channel only.\n"
        },
        {
          "name": "visibility",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "__Required.__\nControls who can see the message.\n\n- `\"BUSINESS_AND_PARTICIPANT\"`: Visible to the participant and site collaborators.\n- `\"BUSINESS\"`: Visible to site collaborators only.\n"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageContent",
      "members": [
        {
          "name": "basic",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.BasicMessagePayload"
            }
          ],
          "doc": "Plain text, file, or image message."
        },
        {
          "name": "form",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.FormMessagePayload"
            }
          ],
          "doc": "Message containing submitted form data.\nTypically sent with a `direction` of `\"PARTICIPANT_TO_BUSINESS\"`\nand message `visibility` of `\"BUSINESS\"`."
        },
        {
          "name": "minimal",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.MinimalMessagePayload"
            }
          ],
          "doc": "Minimal message containing a single line of text\nand an optional icon.\nOften reports an activity that took place."
        },
        {
          "name": "previewText",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Summary of message contents.\nDisplayed in Inbox in the\n[Message List](https://support.wix.com/en/article/wix-inbox-getting-started#view-your-messages)."
        },
        {
          "name": "system",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.SystemMessagePayload"
            }
          ],
          "doc": "Reserved for internal use.\n\nSystem message.\n"
        },
        {
          "name": "template",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.TemplateMessagePayload"
            }
          ],
          "doc": "Template containing an image, title, text,\nand/or up to 10 call-to-action buttons."
        },
        {
          "name": "title",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Message title."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfMessageContentPayloadOneOf",
            "members": [
              "basic",
              "form",
              "minimal",
              "system",
              "template"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageContentPayloadOneOf",
      "members": [
        {
          "name": "basic",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.BasicMessagePayload"
            }
          ],
          "doc": "Plain text, file, or image message."
        },
        {
          "name": "form",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.FormMessagePayload"
            }
          ],
          "doc": "Message containing submitted form data.\nTypically sent with a `direction` of `PARTICIPANT_TO_BUSINESS`\nand message `visibility` of `BUSINESS`."
        },
        {
          "name": "minimal",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.MinimalMessagePayload"
            }
          ],
          "doc": "Minimal message containing a single line of text\nand an optional icon.\nOften reports an activity that took place."
        },
        {
          "name": "system",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.SystemMessagePayload"
            }
          ],
          "doc": "System message.\nFor internal use."
        },
        {
          "name": "template",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.TemplateMessagePayload"
            }
          ],
          "doc": "Template containing an image, title, text,\nand/or up to 10 call-to-action buttons."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageEnvelope",
      "members": [
        {
          "name": "data",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Stringify payload."
        },
        {
          "name": "eventType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Event type."
        },
        {
          "name": "identity",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.WebhooksIdentificationData"
            }
          ],
          "doc": "The identification type and identity data."
        },
        {
          "name": "instanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App instance ID."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageIndication",
      "members": [
        {
          "name": "channel",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The channel to which this indication was added"
        },
        {
          "name": "conversationId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": ""
        },
        {
          "name": "messageId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The time when the message was sent"
        },
        {
          "name": "timestamp",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "The time when action happened"
        },
        {
          "name": "type",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "The type of the indication"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageSentToBusiness",
      "members": [
        {
          "name": "conversationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Conversation ID."
        },
        {
          "name": "interactionInfo",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.InteractionInfo"
            }
          ],
          "doc": "Optional info about interaction with app done by the user"
        },
        {
          "name": "message",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Message"
            }
          ],
          "doc": "Sent message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageSentToParticipant",
      "members": [
        {
          "name": "conversationId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Conversation ID."
        },
        {
          "name": "message",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Message"
            }
          ],
          "doc": "Sent message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MinimalMessagePayload",
      "members": [
        {
          "name": "iconUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL where the icon is hosted."
        },
        {
          "name": "text",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Message text."
        },
        {
          "name": "url",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "If included, URL the user is redirected to when clicking the message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "PagingMetadataV2",
      "members": [
        {
          "name": "count",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Number of items returned in the response."
        },
        {
          "name": "cursors",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Cursors"
            }
          ],
          "doc": "Cursors to navigate through the result pages using `next` and `prev`. Returned if cursor paging is used."
        },
        {
          "name": "offset",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Offset that was requested."
        },
        {
          "name": "tooManyToCount",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Flag that indicates the server failed to calculate the `total` field."
        },
        {
          "name": "total",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Total number of items that match the query. Returned if offset paging is used and the `tooManyToCount` flag is not set."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "PostbackProperties",
      "members": [
        {
          "name": "appId",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "For internal use."
        },
        {
          "name": "interactionId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID you define for the interaction, to be handled by your server."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SendMessageOptions",
      "members": [
        {
          "name": "sendAs",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Controls which identity to use in the message's `sender` property.\n\n- `\"CALLER\"`: Uses the identity of the initiator of the sent message.\n- `\"PARTICIPANT\"`: Uses the `anonymousVisitorId`, `contactId`, or `memberId` of the conversation's participant.\n\nDefault: `\"CALLER\"`\n\n"
        },
        {
          "name": "sendNotifications",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Controls whether the message triggers notifications when it's received.\n\nDefault: `false`\n"
        },
        {
          "name": "silent",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Controls whether the unread count and conversation summary\nare updated in the\n[Message List](https://support.wix.com/en/article/wix-inbox-getting-started#view-your-messages).\n\nIf `true`, unread count and conversation summary are not updated.\n\nDefault: `false`\n"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SendMessageRequest",
      "members": [
        {
          "name": "conversationId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the conversation to add the message to."
        },
        {
          "name": "message",
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Message"
            }
          ],
          "doc": "Message to send."
        },
        {
          "name": "sendAs",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Controls which identity to use in the message's `sender` property.\n\n- `CALLER`: Uses the identity included in the request header.\n- `PARTICIPANT`: Uses the `anonymousVisitorId`, `contactId`, or `memberId` of the conversation's participant.\n- `BUSINESS_USER`: For internal use. Uses the `wixUserId` of the person sending messages on behalf of the business.\n\nDefault: `CALLER`\nFor 3rd-party apps, the app is the caller.\n"
        },
        {
          "name": "sendNotifications",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Controls whether the message triggers notifications when it's received.\n\nDefault: `false`\n"
        },
        {
          "name": "silent",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Controls whether the unread count and conversation summary\nare updated in the\n[Message List](https://support.wix.com/en/article/wix-inbox-getting-started#view-your-messages).\n\nIf `true`, unread count and conversation summary are not updated.\n\nDefault: `false`\n"
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SendMessageResponse",
      "members": [
        {
          "name": "message",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-inbox-v2.Messages.Message"
            }
          ],
          "doc": "Sent message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "Sorting",
      "members": [
        {
          "name": "fieldName",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Name of the field to sort by."
        },
        {
          "name": "order",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Sort order."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "SystemMessagePayload",
      "members": [
        {
          "name": "buttons",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.Button"
                  }
                ]
              }
            }
          ],
          "doc": "List of buttons to display with the message.\nButtons can either open a URL or pass interaction details to the\n`onMessageButtonInteracted()` event.\n\nMaximum: 10 buttons.\n"
        },
        {
          "name": "imageUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL where the icon is hosted."
        },
        {
          "name": "text",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Text message. `\\n` renders as a line break."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "TemplateMessagePayload",
      "members": [
        {
          "name": "buttons",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-inbox-v2.Messages.Button"
                  }
                ]
              }
            }
          ],
          "doc": "List of buttons to display with the message.\nButtons can either open a URL or pass interaction details to the\n`onMessageButtonInteracted()` event.\n\nMax: 10 buttons.\n"
        },
        {
          "name": "imageUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL where the icon is hosted."
        },
        {
          "name": "orientation",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Controls whether the message is displayed in portrait or landscape layout."
        },
        {
          "name": "textLines",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "nativeType": "string"
                  }
                ]
              }
            }
          ],
          "doc": "List of lines of text. Each item in the array is displayed on a new line.\n\nMax: 10 lines (up to 512 characters per line).\n"
        },
        {
          "name": "title",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Title displayed in the message."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "WebhooksIdentificationData",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "identityType",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Supported values:\n- `'ANONYMOUS_VISITOR'`\n- `'APP'`\n- `'MEMBER'`\n- `'UNKNOWN'`\n- `'WIX_USER'`"
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfWebhooksIdentificationDataIdOneOf",
            "members": [
              "anonymousVisitorId",
              "appId",
              "memberId",
              "wixUserId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "WebhooksIdentificationDataIdOneOf",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    }
  ]
}
