{
  "name": "Billing",
  "memberOf": "wix-app-management-v2",
  "mixes": [],
  "callbacks": [],
  "extra": {},
  "clientId": "wix-app-management.v2-purchased_item",
  "docs": {},
  "relatedGuides": [],
  "properties": [],
  "operations": [
    {
      "name": "getMeteredBillingCharges",
      "params": [
        {
          "name": "options",
          "type": [
            {
              "referenceType": "wix-app-management-v2.Billing.GetMeteredBillingChargesOptions"
            }
          ],
          "doc": "",
          "required": false
        }
      ],
      "requiredFields": [],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-app-management-v2.Billing.GetMeteredBillingChargesResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Triggers Wix to call the\n[List Custom Charges SPI](https://dev.wix.com/docs/rest/internal-only/premium/custom-charges-spi/custom-charges-provider-v1/list-charges).",
        "description": [
          "Wix doesn't use the response from _List Charges_ SPI to actually create an\ninvoice that's sent to the customer. Instead, calling _Get Metered Billing Charges_\nallows you confirm that your integration with the Custom Charges SPI is\nworking as intended."
        ],
        "examples": [
          {
            "title": "getMeteredBillingCharges example for dashboard page code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "",
              "async function getMeteredBillingCharges(options) {",
              "  try {",
              "    const result = await billing.getMeteredBillingCharges(options);",
              "    return result;",
              "  } catch (error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "}",
              ""
            ]
          },
          {
            "title": "getMeteredBillingCharges example for exporting from backend code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "import { webMethod, Permissions } from 'wix-web-module';",
              "import { elevate } from 'wix-auth';",
              "",
              "const elevatedGetMeteredBillingCharges = elevate(billing.getMeteredBillingCharges);",
              "",
              "export const getMeteredBillingCharges = webMethod(",
              "  Permissions.Anyone,",
              "  async (options) => {",
              "    try {",
              "      const result = await elevatedGetMeteredBillingCharges(options);",
              "      return result;",
              "    } catch (error) {",
              "      console.error(error);",
              "      // Handle the error",
              "    }",
              "  }",
              ");",
              ""
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "getMeteredBillingCharges",
      "isAdminMethod": true
    },
    {
      "name": "getPurchaseHistory",
      "params": [],
      "requiredFields": [],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-app-management-v2.Billing.GetPurchaseHistoryResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Retrieves a list of the site owner's past purchases for your app.",
        "description": [
          "You don't have to explicitly pass an identifier for the Wix site as part of\nthe request, since this information is taken automatically from the context.\n\nThe response doesn't include any details about cancellations."
        ],
        "examples": [
          {
            "title": "getPurchaseHistory example for dashboard page code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "",
              "async function getPurchaseHistory() {",
              "  try {",
              "    const result = await billing.getPurchaseHistory();",
              "    return result;",
              "  } catch (error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "}",
              ""
            ]
          },
          {
            "title": "getPurchaseHistory example for exporting from backend code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "import { webMethod, Permissions } from 'wix-web-module';",
              "import { elevate } from 'wix-auth';",
              "",
              "const elevatedGetPurchaseHistory = elevate(billing.getPurchaseHistory);",
              "",
              "export const getPurchaseHistory = webMethod(",
              "  Permissions.Anyone,",
              "  async () => {",
              "    try {",
              "      const result = await elevatedGetPurchaseHistory();",
              "      return result;",
              "    } catch (error) {",
              "      console.error(error);",
              "      // Handle the error",
              "    }",
              "  }",
              ");",
              ""
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "getPurchaseHistory",
      "isAdminMethod": true
    },
    {
      "name": "getSitePaymentMethodsStatus",
      "params": [],
      "requiredFields": [],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-app-management-v2.Billing.GetSitePaymentMethodsStatusResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Retrieves information about the site's enabled payment methods.",
        "description": [
          "Checks whether online, offline, Wix POS, and external POS payments are\nenabled."
        ],
        "examples": [
          {
            "title": "getSitePaymentMethodsStatus example for dashboard page code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "",
              "async function getSitePaymentMethodsStatus() {",
              "  try {",
              "    const result = await billing.getSitePaymentMethodsStatus();",
              "    return result;",
              "  } catch (error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "}",
              ""
            ]
          },
          {
            "title": "getSitePaymentMethodsStatus example for exporting from backend code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "import { webMethod, Permissions } from 'wix-web-module';",
              "import { elevate } from 'wix-auth';",
              "",
              "const elevatedGetSitePaymentMethodsStatus = elevate(billing.getSitePaymentMethodsStatus);",
              "",
              "export const getSitePaymentMethodsStatus = webMethod(",
              "  Permissions.Anyone,",
              "  async () => {",
              "    try {",
              "      const result = await elevatedGetSitePaymentMethodsStatus();",
              "      return result;",
              "    } catch (error) {",
              "      console.error(error);",
              "      // Handle the error",
              "    }",
              "  }",
              ");",
              ""
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "getSitePaymentMethodsStatus",
      "isAdminMethod": true
    },
    {
      "name": "getUrl",
      "params": [
        {
          "name": "productId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of your app's paid plan to retrieve the Wix checkout URL for. Check the\nWix Developers Center for a list of your app's supported product IDs.",
          "required": true
        },
        {
          "name": "options",
          "type": [
            {
              "referenceType": "wix-app-management-v2.Billing.GetUrlOptions"
            }
          ],
          "doc": "",
          "required": false
        }
      ],
      "requiredFields": [
        "productId"
      ],
      "ret": {
        "type": [
          {
            "complexType": {
              "nativeType": "Promise",
              "typeParams": [
                {
                  "referenceType": "wix-app-management-v2.Billing.GetUrlResponse"
                }
              ]
            }
          }
        ],
        "doc": null
      },
      "docs": {
        "summary": "Retrieves the URL for a Wix checkout page for the specified paid plan of your app.",
        "description": [
          "This call succeeds only in case you have previously\n[set up an external pricing page in the Wix Developers Center](https://dev.wix.com/docs/build-apps/build-your-app/pricing-plans/set-up-an-external-pricing-page).\n\nThe returned checkout URL is valid for 48 hours.\n\nThis API allows your app to manage your pricing page outside of Wix while\nstill using the standard Wix checkout flow."
        ],
        "examples": [
          {
            "title": "getUrl example for dashboard page code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "",
              "async function getUrl(productId, options) {",
              "  try {",
              "    const result = await billing.getUrl(productId, options);",
              "    return result;",
              "  } catch (error) {",
              "    console.error(error);",
              "    // Handle the error",
              "  }",
              "}",
              ""
            ]
          },
          {
            "title": "getUrl example for exporting from backend code",
            "body": [
              "import { billing } from 'wix-app-management.v2';",
              "import { webMethod, Permissions } from 'wix-web-module';",
              "import { elevate } from 'wix-auth';",
              "",
              "const elevatedGetUrl = elevate(billing.getUrl);",
              "",
              "export const getUrl = webMethod(",
              "  Permissions.Anyone,",
              "  async (productId, options) => {",
              "    try {",
              "      const result = await elevatedGetUrl(productId, options);",
              "      return result;",
              "    } catch (error) {",
              "      console.error(error);",
              "      // Handle the error",
              "    }",
              "  }",
              ");",
              ""
            ]
          }
        ]
      },
      "isVeloEvent": false,
      "customLabels": [
        {
          "id": "maturity-beta"
        }
      ],
      "syntaxName": "getUrl",
      "isAdminMethod": true
    }
  ],
  "messages": [
    {
      "name": "Charge",
      "members": [
        {
          "name": "_id",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of the custom charge. The ID consists of 64 characters."
        },
        {
          "name": "amount",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Charge amount.\n\nMin: `0.50`\n"
        },
        {
          "name": "description",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Description of the custom charge."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "ChargeOverride",
      "members": [
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Override 3-letter currency code in\n[ISO-4217 alphabetic](https://en.wikipedia.org/wiki/ISO_4217#Active_codes) format."
        },
        {
          "name": "price",
          "optional": true,
          "type": [
            {
              "nativeType": "number"
            }
          ],
          "doc": "Override price. In case you omit the override price, Wix charges site\nowners the app's default price that's configured in the Wix Developers\nCenter."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetMeteredBillingChargesOptions",
      "members": [
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "3-letter currency code in\n[ISO-4217 alphabetic](https://en.wikipedia.org/wiki/ISO_4217#Active_codes) format."
        },
        {
          "name": "endDate",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "End of the period you want to retrieve the custom charges for in\n`YYYY-MM-DDThh:mm:ss.sssZ` format."
        },
        {
          "name": "startDate",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Start of the period you want to retrieve the custom charges for in\n`YYYY-MM-DDThh:mm:ss.sssZ` format."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetMeteredBillingChargesRequest",
      "members": [
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "3-letter currency code in\n[ISO-4217 alphabetic](https://en.wikipedia.org/wiki/ISO_4217#Active_codes) format."
        },
        {
          "name": "endDate",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "End of the period you want to retrieve the custom charges for in\n`YYYY-MM-DDThh:mm:ss.sssZ` format."
        },
        {
          "name": "startDate",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Start of the period you want to retrieve the custom charges for in\n`YYYY-MM-DDThh:mm:ss.sssZ` format."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetMeteredBillingChargesResponse",
      "members": [
        {
          "name": "charges",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-app-management-v2.Billing.Charge"
                  }
                ]
              }
            }
          ],
          "doc": "List of retrieved custom charges."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetPurchaseHistoryRequest",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetPurchaseHistoryResponse",
      "members": [
        {
          "name": "purchases",
          "optional": true,
          "type": [
            {
              "complexType": {
                "nativeType": "Array",
                "typeParams": [
                  {
                    "referenceType": "wix-app-management-v2.Billing.PurchasedItem"
                  }
                ]
              }
            }
          ],
          "doc": "Retrieved purchases the site owners have completed for you app."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetSitePaymentMethodsStatusRequest",
      "members": [],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetSitePaymentMethodsStatusResponse",
      "members": [
        {
          "name": "offlineProviderEnabled",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the site owners accept offline payments."
        },
        {
          "name": "onlineProviderEnabled",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the site owners have enabled at least a single online payment method.\nOnline payment methods include Wix Payments, Stripe, PayPal, and credit\ncards."
        },
        {
          "name": "thirdPartyPosProviderEnabled",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the site owners have enabled at least one 3rd-party point-of-sale\nprovider. This allows their customers to make electronic payments in person."
        },
        {
          "name": "wixPosProviderEnabled",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the site owners have enabled the\n[Wix Point of Sale](https://www.wix.com/pos).\nThis allows their customers to make electronic payments in person."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetUrlOptions",
      "members": [
        {
          "name": "billingCycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Information about the paid plan's billing cycle."
        },
        {
          "name": "countryCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "2-letter country code in\n[ISO-3166 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements)\nformat.\n\nDefault: `\"US\"`\n"
        },
        {
          "name": "couponCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Coupon code for the paid plan. Available only in case there is a discount."
        },
        {
          "name": "languageCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "2-letter language code in\n[ISO 639-1 alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) format.\n\nDefault: `\"EN\"`\n"
        },
        {
          "name": "successUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL for the Wix checkout page. Redirect site owners to this URL after\nthey've successfully purchased a paid plan for your app."
        },
        {
          "name": "testCheckout",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the checkout is for testing purposes only. Testing is mainly\nrelevant for in-app purchase flows. When `true`, Wix charges the site\nowners an amount of `0.00`."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetUrlRequest",
      "members": [
        {
          "name": "billingCycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Information about the paid plan's billing cycle."
        },
        {
          "name": "countryCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "2-letter country code in\n[ISO-3166 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements)\nformat.\n\nDefault: `\"US\"`\n"
        },
        {
          "name": "couponCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Coupon code for the paid plan. Available only in case there is a discount."
        },
        {
          "name": "languageCode",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "2-letter language code in\n[ISO 639-1 alpha-2](https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes) format.\n\nDefault: `\"EN\"`\n"
        },
        {
          "name": "productId",
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of your app's paid plan to retrieve the Wix checkout URL for. Check the\nWix Developers Center for a list of your app's supported product IDs."
        },
        {
          "name": "successUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL for the Wix checkout page. Redirect site owners to this URL after\nthey've successfully purchased a paid plan for your app."
        },
        {
          "name": "testCheckout",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the checkout is for testing purposes only. Testing is mainly\nrelevant for in-app purchase flows. When `true`, Wix charges the site\nowners an amount of `0.00`."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "GetUrlResponse",
      "members": [
        {
          "name": "checkoutUrl",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "URL for the Wix checkout page."
        },
        {
          "name": "token",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Token for the Wix checkout page. The token holds all data about the order\nyou're creating a checkout for.  It is [signed](),\nso you can verify that it comes from Wix."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationData",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "identityType",
          "readOnly": true,
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Supported values:\n- `'ANONYMOUS_VISITOR'`\n- `'APP'`\n- `'MEMBER'`\n- `'UNKNOWN'`\n- `'WIX_USER'`"
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "extra": {
        "oneOfGroups": [
          {
            "name": "oneOfIdentificationDataIdOneOf",
            "members": [
              "anonymousVisitorId",
              "appId",
              "memberId",
              "wixUserId"
            ]
          }
        ]
      },
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "IdentificationDataIdOneOf",
      "members": [
        {
          "name": "anonymousVisitorId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has not logged in to the site."
        },
        {
          "name": "appId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of an app."
        },
        {
          "name": "memberId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a site visitor that has logged in to the site."
        },
        {
          "name": "wixUserId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of a Wix user (site owner, contributor, etc.)."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "InvoiceStatusUpdate",
      "members": [
        {
          "name": "instanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App instance ID - a unique ID assigned to each app in each site."
        },
        {
          "name": "invoiceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Wix Premium invoice ID."
        },
        {
          "name": "recurring",
          "optional": true,
          "type": [
            {
              "nativeType": "boolean"
            }
          ],
          "doc": "Whether the invoice is for a single payment or for multiple, recurring payments."
        },
        {
          "name": "status",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Invoice payment status."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "MessageEnvelope",
      "members": [
        {
          "name": "data",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Stringify payload."
        },
        {
          "name": "eventType",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Event type."
        },
        {
          "name": "identity",
          "optional": true,
          "type": [
            {
              "referenceType": "wix-app-management-v2.Billing.IdentificationData"
            }
          ],
          "doc": "The identification type and identity data."
        },
        {
          "name": "instanceId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "App instance ID."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    },
    {
      "name": "PurchasedItem",
      "members": [
        {
          "name": "billingCycle",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Information about the billing cycle for your app's paid plan."
        },
        {
          "name": "currency",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "3-letter currency code in\n[ISO-4217 alphabetic](https://en.wikipedia.org/wiki/ISO_4217#Active_codes) format."
        },
        {
          "name": "dateCreated",
          "optional": true,
          "type": [
            {
              "nativeType": "Date"
            }
          ],
          "doc": "Date and time the site onwers have purchased your app's paid plan in\n`YYYY-MM-DDThh:mm:ss.sssZ` format."
        },
        {
          "name": "price",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "Price of your app's paid plan. For example, `9.95`."
        },
        {
          "name": "productId",
          "optional": true,
          "type": [
            {
              "nativeType": "string"
            }
          ],
          "doc": "ID of your app's paid plan."
        }
      ],
      "docs": {
        "description": [
          ""
        ]
      }
    }
  ]
}
