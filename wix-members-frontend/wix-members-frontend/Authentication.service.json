{ "name": "Authentication",
  "memberOf": "wix-members-frontend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 52,
      "filename": "index.js" },
  "docs":
    { "summary": "The Authentication API contains functionality for authenticating members from frontend code.",
      "description":
        [ "To use the Authentication API, import `{authentication}` from the `wix-members-frontend` module:",
          "",
          "```javascript",
          "import { authentication } from 'wix-members-frontend';",
          "```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "applySessionToken",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "sessionToken",
              "type": "string",
              "doc": "Session token to apply." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the token is applied." },
        "locations":
          [ { "lineno": 1,
              "filename": "applySessionToken.js" } ],
        "docs":
          { "summary": "Logs the current member into the site using the given session token.",
            "description":
              [ "The `applySessionToken()` function returns a Promise that resolves when the",
                " given session token is applied and the current member is logged into the site.",
                "",
                "",
                "You receive a session token from the following",
                "wix-members-backend functions:",
                "",
                " - [`approveByEmail()`](wix-members-backend/authentication/approveByEmail)",
                " - [`approveByToken()`](wix-members-backend/authentication/approveByToken)",
                " - [`register()`](wix-members-backend/authentication/register)",
                " - [`generateSessionToken()`](https://dev.wix.com/docs/velo/api-reference/wix-members-backend/authentication/generate-session-token)",
                " - [`login()`](wix-members-backend/authentication/login)",
                "",
                " Pass the returned session token to your page code and apply it by",
                " calling `applySessionToken()` to complete the process started by one of the",
                " above functions." ],
            "links": [],
            "examples":
              [ { "title": "Log in a member by applying a session token",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "authentication.applySessionToken(sessionToken)",
                      "  .then(() => {",
                      "    console.log('Member logged in.');",
                      "  });" ],
                  "extra":
                    {  } },
                { "title": "Register a member using a 3rd party for approval",
                  "body":
                    [ "/*******************************",
                      " * Backend code - register.web.js *",
                      " *******************************/",
                      "import { Permissions, webMethod } from 'wix-web-module';",
                      "import { authentication } from 'wix-members-backend';",
                      "import { approveBy3rdParty } from 'backend/some-backend-module';",
                      "",
                      "export const doRegistration = webMethod(Permissions.Anyone, async (email, password, firstName, lastName) => {",
                      "",
                      "  // Call a 3rd-party API to check if the member is approved.",
                      "  const isApproved = await approveBy3rdParty(email, password);",
                      "",
                      "  // If member is approved by 3rd party, register and approve with the Wix site",
                      "  if (isApproved === true) {",
                      "    const options = {",
                      "      contactInfo: {",
                      "        firstName: firstName,",
                      "        lastName: lastName",
                      "      }",
                      "    };",
                      "",
                      "    // Register the member",
                      "    const registration = await authentication.register(email, password, options);",
                      "    const approvalToken = registration.approvalToken;",
                      "    console.log('Member is now registered with the site and pending approval');",
                      "",
                      "    // Approve the member and get session token, to be used to log in the member client-side",
                      "    const sessionToken = await authentication.approveByToken(approvalToken);",
                      "    console.log('Member is now approved, but not logged in');",
                      "",
                      "    return {",
                      "      approved: true,",
                      "      sessionToken: sessionToken",
                      "    };",
                      "",
                      "  } else {",
                      "    // If not approved by the 3rd party",
                      "",
                      "    await authentication.blockByEmail(email);",
                      "    console.log('Member not approved by 3rd-party SSO. Blocking from Wix site.');",
                      "",
                      "    return { approved: false };",
                      "  }",
                      "});",
                      "",
                      "",
                      "/*************",
                      " * Page code *",
                      " *************/",
                      "import { authentication } from 'wix-members-frontend';",
                      "import { doRegistration } from 'backend/register.web';",
                      "",
                      "// ...",
                      "",
                      "$w('#register').onClick(() => {",
                      "",
                      "  const email = $w('#email').value;",
                      "  const password = $w('#password').value;",
                      "  const firstName = $w('#firstName').value;",
                      "  const lastName = $w('#lastName').value;",
                      "",
                      "  doRegistration(email, password, firstName, lastName)",
                      "    .then((result) => {",
                      "      if (result.approved) {",
                      "        // Log the member in",
                      "        console.log('Logging in...');",
                      "        authentication.applySessionToken(result.sessionToken);",
                      "      } else {",
                      "        console.log('Not approved!');",
                      "      }",
                      "    });",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates a common 3rd-party approval flow.\nThe backend code calls a 3rd-party service that determines whether the member is approved.\nIf approved, the `register()` function is called from backend code,\nthe registration is approved,\nand a session token is returned to the calling page code.\nIf rejected, the `blockByEmail()` function is called." } },
                { "title": "Log a member in after 3rd-party authentication",
                  "body":
                    [ "/****************************",
                      " * Backend code - login.web.js *",
                      " ***************************/",
                      "",
                      "import { Permissions, webMethod } from 'wix-web-module';",
                      "import { authentication } from 'wix-members-backend';",
                      "import { authBy3rdParty } from 'backend/authentications';",
                      "",
                      "export const getLoginToken = webMethod(Permissions.Anyone, (email, password) => {",
                      "",
                      "  return authBy3rdParty(email, password)",
                      "    .then((isAuthenticated) => {",
                      "",
                      "      // If authenticated, generate and return the session token",
                      "      if (isAuthenticated) {",
                      "        return authentication.generateSessionToken(email)",
                      "          .then((sessionToken) => {",
                      "            return {",
                      "              sessionToken: sessionToken,",
                      "              approved: true",
                      "            };",
                      "          });",
                      "      }",
                      "",
                      "      // If not authenticated, return non-approval",
                      "      return { approved: false };",
                      "    });",
                      "});",
                      "",
                      "/*************",
                      " * Page code *",
                      " ************/",
                      "import { getLoginToken } from 'backend/login.web';",
                      "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "const email = $w('email').value;",
                      "const password = $w('password').value;",
                      "",
                      "// Call the backend function to get the session token",
                      "getLoginToken(email, password)",
                      "  .then((loginResult) => {",
                      "    if (loginResult.approved) {",
                      "      // If approved, log the member in using the returned session token",
                      "      authentication.applySessionToken(loginResult.sessionToken);",
                      "    } else {",
                      "      // If not approved, log a message",
                      "      console.log(\"Member not approved.\");",
                      "    }",
                      "  });" ],
                  "extra":
                    { "description": "This example contains a backend function that uses a 3rd-party service to authenticate a member.\nIf the authentication is successful,\na session token is returned to the page and used to log the member in." } },
                { "title": "Register a member, sending an email for confirmation",
                  "body":
                    [ "/*******************************",
                      " * Backend code - register.web.js *",
                      " *******************************/",
                      "",
                      "import { Permissions, webMethod } from 'wix-web-module';",
                      "import { authentication } from 'wix-members-backend';",
                      "import { triggeredEmails } from 'wix-crm-backend';",
                      "",
                      "export const doRegistration = webMethod(Permissions.Anyone, async (email, password, firstName, lastName) => {",
                      "  const registrationOptions = {",
                      "    contactInfo: {",
                      "      firstName: firstName,",
                      "      lastName: lastName",
                      "    }",
                      "  };",
                      "  const registration = await authentication.register(email, password, registrationOptions);",
                      "  console.log('Member is now registered with the site and pending approval');",
                      "",
                      "  const emailOptions = {",
                      "    variables: {",
                      "      name: firstName,",
                      "      verifyLink: `http://yourdomain.com/post-register?token=${registration.approvalToken}`",
                      "    }",
                      "  };",
                      "  triggeredEmails.emailMember('verifyRegistration', registration.member.id, emailOptions);",
                      "  console.log('Confirmation email sent');",
                      "});",
                      "",
                      "export const doApproval = webMethod(Permissions.Anyone, async (token) => {",
                      "  try {",
                      "    const sessionToken = await authentication.approveByToken(token);",
                      "    console.log('Member approved');",
                      "    return {",
                      "      approved: true,",
                      "      sessionToken: sessionToken",
                      "    };",
                      "  } catch (error) {",
                      "    console.log('Member not approved');",
                      "    return {",
                      "      approved: false,",
                      "      reason: error",
                      "    };",
                      "  }",
                      "});",
                      "",
                      "/****************************",
                      " * Page code - registration *",
                      " ****************************/",
                      "import { doRegistration } from 'backend/register.web';",
                      "",
                      "// ...",
                      "",
                      "const email = $w('#email').value;",
                      "const password = $w('#password').value;",
                      "const firstName = $w('#firstName').value;",
                      "const lastName = $w('#lastName').value;",
                      "",
                      "doRegistration(email, password, firstName, lastName)",
                      "  .then(() => {",
                      "    console.log('Confirmation email sent.');",
                      "  });",
                      "",
                      "/*********************************",
                      " * Page code - post-registration *",
                      " *********************************/",
                      "import wixLocationFrontend from 'wix-location-frontend';",
                      "import { authentication } from 'wix-members-frontend';",
                      "import { doApproval } from 'backend/register.web';",
                      "",
                      "$w.onReady(async () => {",
                      "  const token = wixLocationFrontend.query.token;",
                      "",
                      "  const approval = await doApproval(token);",
                      "",
                      "  if (approval.approved === true) {",
                      "    authentication.applySessionToken(approval.sessionToken);",
                      "    console.log('Member approved & logged in');",
                      "  } else {",
                      "    console.log('Member not approved');",
                      "  }",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates a common email verification flow.\nA member is initially registered but not yet approved.\nAt registration, a verification email is sent with a link to a verification page.\nWhen the member goes to the verification page,\nthe approval is granted and the member is logged into the site.\n\n The code is split between three locations:\n\n - A backend web module named **register.jsw**.\n - The page code for the page where members register.\n - The page code for the page where members confirm their registration." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "changePassword",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "newPassword",
              "type": "string",
              "doc": "New password the member wants to set. Minimum 6 characters." },
            { "name": "token",
              "type": "string",
              "doc": "Reset token received in the email triggered by the sendResetPasswordEmail() function." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the password is reset.\nRejected - Error message." },
        "locations":
          [ { "lineno": 2,
              "filename": "changePassword.js" } ],
        "docs":
          { "summary": "Changes the member's password to a new one, using a reset token.",
            "description":
              [ "<blockquote class=\"important\">",
                "",
                "__Important:__",
                "",
                "This function is in Developer Preview and is subject to change. ",
                "",
                "</blockquote>",
                "The `changePassword()` function returns a Promise that resolves",
                "when the password is successfully changed, or rejects with an error if the operation fails." ],
            "links": [],
            "examples":
              [ { "title": "Change the member's password using a reset token",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "authentication",
                      "  .changePassword(newPassword, token)",
                      "  .then(() => {",
                      "    console.log('Password changed successfully');",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error('Error changing password:', error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "loggedIn",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "boolean",
            "doc": "`true` if a member is logged in. Otherwise, `false`." },
        "locations":
          [ { "lineno": 1,
              "filename": "loggedIn.js" } ],
        "docs":
          { "summary": "Indicates whether the site visitor is a logged-in member.",
            "description":
              [ "The `loggedIn()` function returns a boolean value",
                "indicating whether the current visitor is logged in as a site member.",
                "",
                "If a member is logged in, `loggedIn()` returns `true`.",
                "Otherwise, `loggedIn()` returns `false`." ],
            "links": [],
            "examples":
              [ { "title": "Check whether a member is logged in",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "const isLoggedIn = authentication.loggedIn();",
                      "",
                      "if (isLoggedIn) {",
                      "  console.log('Member is logged in');",
                      "} else {",
                      "  console.log('Member is not logged in');",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Check for a logged-in member before getting member details",
                  "body":
                    [ "import { authentication, currentMember } from 'wix-members-frontend';",
                      "",
                      "$w.onReady(async () => {",
                      "  const isLoggedIn = authentication.loggedIn();",
                      "",
                      "  if (isLoggedIn) {",
                      "    const loggedInMember = await currentMember.getMember()",
                      "    console.log('Member is logged in:', loggedInMember);",
                      "    const memberId = loggedInMember._id;",
                      "    const contactId = loggedInMember.contactId;",
                      "  } else {",
                      "    // Handle when member isn't logged in",
                      "  }",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Show a logout button if a member is logged in",
                  "body":
                    [ "/*****************************",
                      " * Page code - masterpage.js *",
                      " ****************************/",
                      "",
                      "import { authentication } from 'wix-members-frontend';",
                      "",
                      "$w.onReady(function () {",
                      "  const loggedIn = authentication.loggedIn();",
                      "",
                      "  if (loggedIn) {",
                      "    console.log('Logged in, showing the logout button');",
                      "    $w('#logout').show();",
                      "  }",
                      "",
                      "  authentication.onLogin(() => {",
                      "    console.log('Logged in, showing the logout button');",
                      "    $w('#logout').show();",
                      "  });",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This code example runs on `masterpage.js` and relies on a logout button,\nwhich is hidden when the page loads.\n\nWhen the page loads, if `loggedIn()` returns `true`,\nthe logout button is displayed.\nAdditionally, if a member logs in after the page loads,\nthe button is displayed in response to the login event." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "login",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Login email address." },
            { "name": "password",
              "type": "string",
              "doc": "Member password." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the member is logged in.\nRejected - Error message." },
        "locations":
          [ { "lineno": 1,
              "filename": "login.js" } ],
        "docs":
          { "summary": "Logs a registered member in with an email and password.",
            "description":
              [ "The `login()` function returns a Promise that resolves when the member with",
                " the specified email address and password is logged in.",
                "",
                " The `login()` function only works with existing members. To register a new member use ",
                " the [`register()` function](#register).",
                "",
                "> **Note:**",
                "> - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                ">   View a published version of your site to see their complete functionality." ],
            "links": [],
            "examples":
              [ { "title": "Log a member in",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "authentication.login(email, password)",
                      "  .then(() => {",
                      "    console.log('Member is logged in');",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } },
                { "title": "Log a member in using data from input elements",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "$w('#login').onClick(async () => {",
                      "  const email = $w('#email').value;",
                      "  const password = $w('#password').value;",
                      "",
                      "  try {",
                      "    await authentication.login(email, password);",
                      "    console.log('Member is logged in');",
                      "  } catch (error) {",
                      "    console.error(error);",
                      "  }",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "logout",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 1,
              "filename": "logout.js" } ],
        "docs":
          { "summary": "Logs the current member out of the site.",
            "description":
              [ "The `logout()` function logs the current member out of the site.",
                "",
                "> **Notes:**",
                ">",
                "> - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                ">   View a published version of your site to see their complete functionality.",
                ">",
                "> - The APIs in `wix-members-frontend` can only be used once the page has loaded. Therefore,",
                ">   you must use them in code that is contained in or is called from the",
                ">   [onReady()]($w.html#onReady) event handler or any element event handler." ],
            "links": [],
            "examples":
              [ { "title": "Log the current member out",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "authentication.logout();" ],
                  "extra":
                    {  } },
                { "title": "Log the current member out when they click a button",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "$w('#logout').onClick(() => {",
                      "  authentication.logout();",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onLogin",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "wix-members-frontend.Authentication.LoginHandler",
              "doc": "Function name or expression to run when a member logs in." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 6,
              "filename": "onLogin.js" } ],
        "docs":
          { "summary": "Sets the function that runs when a member logs in.",
            "description":
              [ "The `onLogin()` event handler runs when a member logs into your site.",
                "",
                "`onLogin` receives a `currentMember` object for the logged-in member,",
                "which contains the [`CurrentMember` methods](https://dev.wix.com/docs/velo/api-reference/wix-members-frontend/current-member/introduction)",
                "you can use to retrieve the member's information.",
                "",
                "Usually, you want to call `onLogin()` in the **masterPage.js** file in the",
                "code editor so that the `onLogin()` event handler runs no matter which",
                "page a member uses to log in.",
                "",
                "> **Notes:**",
                ">",
                "> - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                ">   View a published version of your site to see their complete functionality.",
                ">",
                "> - The APIs in `wix-members-frontend` can only be used once the page has loaded. Therefore,",
                ">   you must use them in code that is contained in or is called from the",
                ">   [onReady()]($w.html#onReady) event handler or any element event handler." ],
            "links": [],
            "examples":
              [ { "title": "Run code when a member logs in",
                  "body":
                    [ "import {authentication} from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "authentication.onLogin(async (member) => {",
                      "  const loggedInMember = await member.getMember();",
                      "  const memberId = loggedInMember._id;",
                      "  console.log(`Member ${memberId} logged in:`, loggedInMember);",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onLogout",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "wix-members-frontend.Authentication.LogoutHandler",
              "doc": "Function name or expression to run when a member logs out." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 5,
              "filename": "onLogout.js" } ],
        "docs":
          { "summary": "Sets the function that runs when a member logs out.",
            "description":
              [ "Use the `onLogout()` function for code you want to run after a member logs out",
                "from your site.",
                "",
                " Usually, you want to call the `onLogout()` function in the **masterPage.js** file in the",
                " code editor so that the `onLogout()` event handler runs no matter which",
                " page on your site a member uses to log out.",
                "",
                "> **Notes:**",
                ">",
                "> - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                ">   View a published version of your site to see their complete functionality.",
                ">",
                "> - The APIs in `wix-members-frontend` can only be used once the page has loaded. Therefore,",
                ">   you must use them in code that is contained in or is called from the",
                ">   [onReady()]($w.html#onReady) event handler or any element event handler." ],
            "links": [],
            "examples":
              [ { "title": "Run code when a member logs out",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "authentication.onLogout(() => {",
                      "  console.log('Member logged out');",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "promptForgotPassword",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the form is submitted.\nRejected - Message that the dialog was canceled, user is already logged in, or another reason the password reset failed." },
        "locations":
          [ { "lineno": 1,
              "filename": "promptForgotPassword.js" } ],
        "docs":
          { "summary": "Prompts the current site visitor with a password reset modal.",
            "description":
              [ "The `promptForgotPassword()` function returns a Promise that resolves when",
                "the visitor submits the **Create New Password** form.",
                "",
                "If the visitor cancels the form without submitting it,",
                "the Promise is rejected.",
                "",
                "`promptForgotPassword()` cannot be called before the page is ready.",
                "",
                "> **Notes:**",
                ">",
                "> - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                ">   View a published version of your site to see their complete functionality.",
                ">",
                "> - The APIs in `wix-members-frontend` can only be used once the page has loaded. Therefore,",
                ">   you must use them in code that is contained in or is called from the",
                ">   [`onReady()`]($w.html#onReady) event handler or any element event handler.",
                ">",
                "> - If you `return` or `await` the `promptForgotPassword()` function",
                ">   when calling from `onReady()`, the page will be prevented from loading.",
                ">   To handle the resolved promise, use `.then()` and `.catch()`." ],
            "links":
              [ "[promptLogin( )](#promptLogin)" ],
            "examples":
              [ { "title": "Prompt the visitor with a password reset",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "authentication.promptForgotPassword()",
                      "  .then(() => {",
                      "    console.log('Sending \"forgot password\" email');",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "promptLogin",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "options",
              "type": "wix-members-frontend.Authentication.LoginOptions",
              "doc": "The options that determine how the login dialog box appears.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the member is logged in.\nRejected - Message that the dialog was canceled, or any other reason the member failed to log in." },
        "locations":
          [ { "lineno": 15,
              "filename": "promptLogin.js" } ],
        "docs":
          { "summary": "Prompts the current visitor to log in as a site member.",
            "description":
              [ "The `promptLogin()` function returns a Promise that resolves",
                "when the login has completed.",
                "",
                "If the visitor cancels the form without logging in,",
                "the Promise is rejected.",
                "",
                "The `promptLogin()` function cannot be called before the page is ready.",
                "",
                "> **Notes:**",
                ">",
                "> - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                ">   View a published version of your site to see their complete functionality.",
                ">",
                "> - The APIs in `wix-members-frontend` can only be used once the page has loaded. Therefore,",
                ">   you must use them in code that is contained in or is called from the",
                ">   [`onReady()`]($w.html#onReady) event handler or any element event handler.",
                ">",
                "> - If you `return` or `await` the `promptLogin()` function",
                ">   when calling from `onReady()`, the page will be prevented from loading.",
                ">   To handle the resolved promise, use `.then()` and `.catch()`." ],
            "links":
              [ "[promptForgotPassword( )](#promptForgotPassword)" ],
            "examples":
              [ { "title": "Prompt the current visitor to log in",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "// Sample options value:",
                      "// {",
                      "//    mode: 'login',",
                      "//    modal: true",
                      "// }",
                      "",
                      "authentication.promptLogin(options)",
                      "  .then(() => {",
                      "    console.log('Member is logged in');",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "register",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Email address the new member will use to log in." },
            { "name": "password",
              "type": "string",
              "doc": "Password to assign to the new member.\nMust be 4 to 100 ASCII characters." },
            { "name": "options",
              "type": "wix-members-frontend.Authentication.RegistrationOptions",
              "doc": "Registration options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-members-frontend.Authentication.RegistrationResult" ] },
            "doc": "Fulfilled - When the member is registered.\nRejected - Error message." },
        "locations":
          [ { "lineno": 57,
              "filename": "register.js" } ],
        "docs":
          { "summary": "Registers a new site member.",
            "description":
              [ "The `register()` function returns a Promise that resolves to a `RegistrationResult`",
                " object when the member is registered or pending registration.",
                "",
                " The specified `password` must be between 4 and 100 ASCII characters.",
                "",
                " See [New Members](https://dev.wix.com/docs/velo/api-reference/wix-members-frontend/authentication/new-members) to learn about verifying emails and approving members.",
                "",
                " > **Notes:**",
                " >",
                " > - The APIs in `wix-members-frontend` are only partially functional when previewing your site.",
                " >   View a published version of your site to see their complete functionality.",
                " >",
                " > - The member data in the resolved Promise includes custom fields from your site's contacts ",
                " >   only if [they are added to your site members in your dashboard](https://support.wix.com/en/article/customizing-your-member-profile-fields).",
                " >",
                " > - When a new member signs up using an email address",
                " >   that's already in your site's Contact List,",
                " >   a notification is displayed",
                " >   and a confirmation email is sent to the new member.",
                " >   To register a member without displaying the notification, use",
                " >   [`register()`](https://dev.wix.com/docs/velo/api-reference/wix-members-backend/authentication/register) from wix-members-backend",
                " >   (this does not suppress the confirmation email).",
                " >",
                " > - When your site's member signup settings are set to [automatic approval](https://dev.wix.com/docs/velo/api-reference/wix-members-frontend/authentication/new-members#automatic-approval), ",
                " >   calling `register()` from wix-members-frontend",
                " >   (in page code) is as secure as calling",
                " >   [`register()`](https://dev.wix.com/docs/velo/api-reference/wix-members-backend/authentication/register) from wix-members-backend (in backend code), ",
                " >   unless you are implementing [custom site registration using Velo forms](https://dev.wix.com/docs/develop-websites/articles/code-tutorials/wix-members/enabling-custom-site-registration).",
                " >   However, when registration is set to [manual approval](https://dev.wix.com/docs/velo/api-reference/wix-members-frontend/authentication/new-members#manual-approval),",
                " >   calling `register()` from wix-members-backend",
                " >   allows you to build more secure approval flows",
                " >   by keeping tokens hidden from the frontend." ],
            "links": [],
            "examples":
              [ { "title": "Register a site member",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "/* Sample options value:",
                      " * {",
                      " *   contactInfo: {",
                      " *     firstName: 'Juan',",
                      " *     lastName: 'Doe',",
                      " *     picture: 'https://static.parastorage.com/unpkg-semver/communities-blog-statics/assets/wix-logo.png',",
                      " *     hobby: 'Football'",
                      " *   },",
                      " *   privacyStatus: \"PRIVATE\"",
                      " * }",
                      " */",
                      "",
                      "authentication.register(email, password, options)",
                      "  .then((registrationResult) => {",
                      "    const status = registrationResult.status;",
                      "",
                      "    if (status === \"PENDING\") {",
                      "      // When the site is configured for manual approval,",
                      "      // status is \"PENDING\" and approvalToken is returned.",
                      "      const approvalToken = registrationResult.approvalToken;",
                      "      console.log('Member registered and waiting for approval:', registrationResult);",
                      "    } else {",
                      "      // When the site is configured for automatic approval,",
                      "      // status is \"ACTIVE\" and the member is approved and logged in.",
                      "      // To prevent logging in the member automatically,",
                      "      // use the backend function: wix-members-backend.authentication.register()",
                      "      console.log('Member registered and logged in:', registrationResult);",
                      "    }",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    { "description": "This example contains a custom field, \"Hobby\"." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "resendVerificationCodeEmail",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the email is sent.\nRejected - Error message." },
        "locations":
          [ { "lineno": 2,
              "filename": "resendVerificationCodeEmail.js" } ],
        "docs":
          { "summary": "Resends a one-time password (OTP) for email verification.",
            "description":
              [ "<blockquote class=\"important\">",
                "",
                "__Important:__",
                "",
                "This function is in Developer Preview and is subject to change. ",
                "",
                "</blockquote>",
                "The `resendVerificationCodeEmail()` function returns a Promise that resolves when the email is successfully sent, or rejects with an error if the operation fails." ],
            "links": [],
            "examples":
              [ { "title": "Email a member with a link to verify their email",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "authentication",
                      "  .resendVerificationCodeEmail()",
                      "  .then(() => {",
                      "    console.log('Verification code email resent');",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error('Error resending verification email:', error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "sendForgotPasswordEmail",
        "labels":
          [ "changed",
            "removed" ],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Login email of the member whose password will be set." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the email is sent.\nRejected - Error message." },
        "locations":
          [ { "lineno": 2,
              "filename": "sendForgotPasswordEmail.js" } ],
        "docs":
          { "summary": "Sends a site member an email with a link to set their password.\nalizas1 marked this conversation as resolved.",
            "description":
              [ "The `sendForgotPasswordEmail()` function returns a Promise that resolves",
                "when the set password link is emailed to the member.",
                "",
                "The set password link is valid for 3 hours,",
                "and it can be used only once.",
                "If the link expires, no changes are made to the password." ],
            "links": [],
            "examples":
              [ { "title": "Email a member with a link to set their password",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "authentication",
                      "  .sendForgotPasswordEmail(email)",
                      "  .then((status) => {",
                      "    console.log('Password reset email sent');    ",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error('Error sending email:', error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "sendResetPasswordEmail",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Login email of the member whose password will be set." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the email is sent.\nRejected - Error message." },
        "locations":
          [ { "lineno": 2,
              "filename": "sendResetPasswordEmail.js" } ],
        "docs":
          { "summary": "Sends a site member an email with a link to set their password.",
            "description":
              [ "<blockquote class=\"important\">",
                "",
                "__Important:__",
                "",
                "This function is in Developer Preview and is subject to change. ",
                "",
                "</blockquote>",
                "The `sendResetPasswordEmail()` function returns a Promise that resolves",
                "when the set password link is emailed to the member.",
                "",
                "The reset password link is valid for 3 hours,",
                "and it can be used only once.",
                "If the link expires, no changes are made to the password." ],
            "links": [],
            "examples":
              [ { "title": "Email a member with a link to reset their password",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "authentication",
                      "  .sendResetPasswordEmail(email)",
                      "  .then((status) => {",
                      "    console.log('Password reset email sent');    ",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error('Error sending email:', error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "sendSetPasswordEmail",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "email",
              "type": "string",
              "doc": "Login email of the member whose password will be set." },
            { "name": "options",
              "type": "wix-members-frontend.Authentication.SetPasswordEmailOptions",
              "doc": "Email display options.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "boolean" ] },
            "doc": "Fulfilled - If the email is sent.\nRejected - Error message." },
        "locations":
          [ { "lineno": 13,
              "filename": "sendSetPasswordEmail.js" } ],
        "docs":
          { "summary": "Sends a site member an email with a link to set their password.",
            "description":
              [ "> **Deprecated.** Send Set Password Email has been replaced with [Send Reset Password Email](wix-members-frontend/authentication/send-reset-password-email) and will be removed on September 30, 2025.",
                "",
                "The `sendSetPasswordEmail()` function returns a Promise that resolves",
                "when the set password link is emailed to the member.",
                "",
                "The set password link is valid for 3 hours,",
                "and it can be used only once.",
                "If the link expires, no changes are made to the password." ],
            "links": [],
            "examples":
              [ { "title": "Email a member with a link to set their password",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "/* Sample options value:",
                      "* {",
                      "*   hideIgnoreMessage: true",
                      "* }",
                      "*/",
                      "",
                      "authentication.sendSetPasswordEmail(email, options)",
                      "  .then((status) => {",
                      "",
                      "    console.log(status);",
                      "    if (status === true) {",
                      "",
                      "        console.log('Email sent!');",
                      "    }",
                      "    return status;    ",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });",
                      "",
                      "/* Promise resolves to a boolean */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "verifyEmail",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "code",
              "type": "string",
              "doc": "OTP code the member received in an email." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - If the OTP is valid.\nRejected - Error message." },
        "locations":
          [ { "lineno": 2,
              "filename": "verifyEmail.js" } ],
        "docs":
          { "summary": "Validates the email address using OTP (One-Time Password) that was sent during the registration.",
            "description":
              [ "<blockquote class=\"important\">",
                "",
                "__Important:__",
                "",
                "This function is in Developer Preview and is subject to change. ",
                "",
                "</blockquote>",
                "The `verifyEmail()` function returns a Promise that resolves with true if the OTP is valid, or false if the validation fails." ],
            "links": [],
            "examples":
              [ { "title": "Verify the member's email address with a one-time password",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "authentication",
                      "  .verifyEmail(code)",
                      "  .then(() => {",
                      "    console.log('OTP verified');    ",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error('Error verifying OTP:', error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks":
    [ { "name": "LoginHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "currentMember",
              "type": "wix-members-frontend.CurrentMember",
              "doc": "Logged-in member." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 1,
              "filename": "onLogin.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "LogoutHandler",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 1,
              "filename": "onLogout.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "messages":
    [ { "name": "ContactInfo",
        "locations":
          [ { "lineno": 17,
              "filename": "register.js" } ],
        "docs":
          { "summary": "An object that contains information about a site contact.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "firstName",
              "type": "string",
              "doc": "Contact's first name.",
              "optional": true },
            { "name": "lastName",
              "type": "string",
              "doc": "Contact's last name.",
              "optional": true },
            { "name": "picture",
              "type": "string",
              "doc": "Contact's image source URL.",
              "optional": true },
            { "name": "emails",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of contact's email addresses.\n When creating a contact, if no phone number is\n provided, at least 1 email address must be provided.",
              "optional": true },
            { "name": "phones",
              "type":
                { "name": "Array",
                  "typeParams":
                    [ "string" ] },
              "doc": "List of contact's phone numbers.\n When creating a contact, if no email is\n provided, at least 1 phone number must be provided.",
              "optional": true },
            { "name": "language",
              "type": "string",
              "doc": "Contact's language.",
              "optional": true },
            { "name": "customFields",
              "type":
                [ "string",
                  "number",
                  "Date" ],
              "doc": "Any number of custom fields. [Custom fields](https://www.wix.com/velo/reference/wix-members-frontend/custom-fields)\n are used to store additional information about your site's contacts.\n\n >**Note:** `customFields` is not the name of a field in the `contactInfo` object. Here, it represents any custom fields that you've chosen to implement.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "LoginOptions",
        "locations":
          [ { "lineno": 1,
              "filename": "promptLogin.js" } ],
        "docs":
          { "links": [],
            "examples":
              [ { "title": "Prompt the current visitor to log in",
                  "body":
                    [ "import { authentication } from 'wix-members-frontend';",
                      "",
                      "// ...",
                      "",
                      "// Sample options value:",
                      "// {",
                      "//    mode: 'login',",
                      "//    modal: true",
                      "// }",
                      "",
                      "authentication.promptLogin(options)",
                      "  .then(() => {",
                      "    console.log('Member is logged in');",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "mode",
              "type": "string",
              "doc": "Whether to display the `\"login\"` or `\"signup\"` prompt.\n\nDefaults to `\"signup\"`.",
              "optional": true },
            { "name": "modal",
              "type": "boolean",
              "doc": "Whether the login form should be modal (`true`)\nor full screen (`false`).\n\nDefaults to `false` (full screen).",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "RegistrationOptions",
        "locations":
          [ { "lineno": 1,
              "filename": "register.js" } ],
        "docs":
          { "summary": "An object that contains information about a site registration.",
            "links":
              [ "[register](#register)" ],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "contactInfo",
              "type": "wix-members-frontend.Authentication.ContactInfo",
              "doc": "Contact information.",
              "optional": true },
            { "name": "privacyStatus",
              "type": "string",
              "doc": "Sets the [privacy status](https://support.wix.com/en/article/member-privacy-settings-for-groups) of a new member upon registration.\nOne of:\n\n - `\"PUBLIC\"`: Sets the new member status to public. A member whose status is public is a member of the site's community.\n - `\"PRIVATE\"`: Sets the new member status to private. A member whose status is private is not a member of the site's community.\n\nDefaults to `\"PRIVATE\"`.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "RegistrationResult",
        "locations":
          [ { "lineno": 37,
              "filename": "register.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "status",
              "type": "string",
              "doc": "Registration status.\n\nOne of:\n\n- `\"PENDING\"`: The member must be approved before they can log in to the site.\n- `\"ACTIVE\"`: The member is approved and can log in to the site." },
            { "name": "approvalToken",
              "type": "string",
              "doc": "Token for approving the member\nwith the [`approveByToken()`](wix-members-backend/authentication/approveByToken)\nfunction. `approvalToken` is safe to pass via email or from page code to\nbackend code.\n\nReturned when `status` is `\"PENDING\"`.",
              "optional": true },
            { "name": "member",
              "type": "wix-members-frontend.CurrentMember.Member",
              "doc": "The registered member.\n\nReturned when `status` is `\"ACTIVE\"`.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "SetPasswordEmailOptions",
        "locations":
          [ { "lineno": 1,
              "filename": "sendSetPasswordEmail.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "hideIgnoreMessage",
              "type": "boolean",
              "doc": "Whether to hide the \"ignore this email\" message.\n\nIf `false`, the email tells the member\nthey can safely ignore\nif they did not request the password change.\n\nDefaults to `false`.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }