{ "name": "SignatureInput",
  "memberOf": "$w",
  "mixes":
    [ "$w.LabelMixin",
      "$w.FormElement",
      "$w.HiddenCollapsedMixin",
      "$w.DisabledMixin",
      "$w.FocusMixin",
      "$w.StyleMixin",
      "$w.RequiredMixin" ],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "SignatureInput.js" },
  "docs":
    { "summary": "[Signature input](https://support.wix.com/en/article/wix-forms-adding-a-signature-field) lets site visitors enter signatures.",
      "description":
        [ "Before working with this API, you must add a signature element to your page. In the",
          " Wix Editor, add a **Signature** and a **Submit** button to a form on your",
          " page. The signature element comes with a signature pad and a built-in **Clear**",
          " button. After the site visitor draws their signature on the pad and submits the form,",
          " the `SignatureInput` element's [`value`](#value) is populated with a base64-encoded",
          " Data URL representing a PNG image of the signature.",
          "",
          " The `SignatureInput` APIs work with both Wix Forms and custom forms, which are forms you",
          " manually create by adding user input elements and a submit button to your page.",
          "",
          " With code, you can use the `SignatureInput` API to:",
          "",
          " + Save the signature to a collection as an inline image in a field of type **Image**.",
          " + Clear the signature from the signature pad with the [`clear()`](#clear) function.",
          " + Use the [`onChange()`](#onChange) event handler to detect if the signature value changed or was cleared.",
          " + Set the element's properties and events, such as **Hidden on load** and **onMouseIn**.",
          " + Send a signature by email as an attachment, such as with a service like SendGrid. Tip: Make sure to strip out the \"**data:image/png;base64,**\" prefix from the signature `value` before attaching.",
          "",
          "",
          "",
          " **Using Signatures with Wix Forms**:",
          "",
          " Wix Forms automatically adds the signature to the Media Manager and to the collection generated for you by Wix Forms, so",
          " you do not have to code this functionality unless working with another collection.",
          "",
          "",
          " **About Inline Images in Collections**:",
          "",
          " + Saving a signature as an inline image in a collection is supported because signatures are relatively small in size. We do not recommend that you store other types of images inline in collections for performance reasons.",
          " + You cannot preview inline images in collections generated by apps that do not use the new Wix Content Management System (CMS), such as Wix Forms. To make sure you can preview, we recommend you do not store inline images in collections generated by Wix Forms." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties":
    [ { "name": "accessibility",
        "labels":
          [ "new" ],
        "get": true,
        "set": false,
        "type": "$w.SignatureInput.Accessibility",
        "locations":
          [ { "lineno": 194,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Sets and gets the [Accessible Rich Internet Application (ARIA) attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes) and other accessibility properties for the element.",
            "description":
              [ "ARIA attributes are a set of properties that define ways to make web content and applications more accessible to people with disabilities. The properties provide additional information about the structure, behavior, and state of elements to assistive technologies such as screen readers, braille displays, and voice control software. ",
                "",
                "Set the accessibility properties to design your elements to be more inclusive and usable for visitors with visual, auditory, motor, and or cognitive disabilities. The accessibility object primarily affects how assistive technologies read and present site content. ARIA attributes themselves do not impact SEO, but other accessibility properties, such as `lang`, can influence content indexing and discoverability.",
                "",
                ">**Note:** Incorrect use of ARIA attributes can worsen accessibility for assistive technology users. Use carefully and test with assistive technologies. ",
                "",
                "Learn more about [ARIA attributes](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA)." ],
            "links": [],
            "examples":
              [ { "title": "Set the accessibility properties of an element",
                  "body":
                    [ "$w('#mySignatureInput').accessibility.lang = 'en';" ],
                  "extra":
                    {  } },
                { "title": "Get the accessibility properties of an element",
                  "body":
                    [ "const mySignatureInputAccessibility = $w('#mySignatureInput').accessibility;" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "style",
        "labels": [],
        "get": true,
        "set": false,
        "type": "$w.Style",
        "locations":
          [ { "lineno": 51,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Gets an object containing information about the signature input element's styles.",
            "description":
              [ "The following styles can be used with signature inputs:",
                "",
                " + [`backgroundColor`]($w.Style.html#backgroundColor)",
                " + [`borderColor`]($w.Style.html#borderColor)",
                " + [`borderWidth`]($w.Style.html#borderWidth)",
                "",
                "",
                " > **Note:** Not all styles can be used on all signature designs. To determine which styles",
                " work with a specific signature design, go to the **Signature Design** panel in",
                " the Editor, choose a design, and click **Customize Design**. The design",
                " options that you see in the **Signature Design** panel are the styles you can",
                " use in your code." ],
            "links": [],
            "examples":
              [ { "title": "Set the background color",
                  "body":
                    [ "$w(\"#myElement\").style.backgroundColor = \"rgba(255,0,0,0.5)\";" ],
                  "extra":
                    {  } },
                { "title": "Get the background color",
                  "body":
                    [ "let bgColor = $w(\"#myElement\").style.backgroundColor;" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "value",
        "labels": [],
        "get": true,
        "set": false,
        "type": "string",
        "locations":
          [ { "lineno": 77,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Gets the value of a signature input.",
            "description":
              [ "The `value` is one of the following:",
                "",
                " + An image, defined as a base64-encoded Data URL representing a PNG image of a signature. The `value` starts with the prefix 'data:image/png;base64,' followed by a base64-encoded string, for example: `data:image/png;base64,iVBORw0KGgoAA...`",
                " + An empty string if the signature pad is blank.",
                "",
                "",
                "",
                " To reset the signature input value, call the [`clear()`](#clear) function.",
                "",
                " To send a signature by email as an attachment, such as with a service like SendGrid, strip out the \"**data:image/png;base64,**\" prefix from the `value` before attaching." ],
            "links": [],
            "examples":
              [ { "title": "Get a signature input",
                  "body":
                    [ "let mySignature = $w(\"#mySignatureInput\").value;",
                      "",
                      "/*  value:",
                      " *",
                      " * data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACOCAYA...m8B/AaZVs55m1NzcAAAAAElFTkSuQmCC",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "Get a signature input and insert it in a collection",
                  "body":
                    [ "import wixData from 'wix-data';",
                      "",
                      "export function signatureSubmitButton_click(event) {",
                      "  let theSignature = $w('#mySignatureInput').value;",
                      "\t\t",
                      "  let toInsert = {",
                      "    \"title\": \"Mia\",",
                      "    \"lastName\": \"Casa\",",
                      "    \"email\": \"MiaCasa@SuCasa.com\",",
                      "    \"signature\": theSignature",
                      "   };",
                      "         ",
                      "  wixData.insert(\"People\", toInsert)",
                      "    .then((results) => {",
                      "      let item = results;     //see item below",
                      "      console.log(item);",
                      "    })",
                      "    .catch((err) => {",
                      "     let errorMsg = err;",
                      "    });",
                      "}",
                      "",
                      "/*  item:",
                      " *",
                      " * {",
                      " *   _id: \"41c8ef87-3eec-47bd-a3bd-17a09de9ffee\"",
                      " *   _owner: \"4c47c608-cfa8-4037-93ac-738f09560ed3\"",
                      " *   _createdDate: \"2019-11-10T09:27:14.605Z\"",
                      " *   _updatedDate: \"2019-11-10T09:27:14.605Z\" ",
                      " *   title: \"Mia\"",
                      " *   lastName: \"Casa\"",
                      " *   email: \"MiaCasa@SuCasa.com\"",
                      " *   signature: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEU...AAAASUVORK5CYII=\"",
                      " * }",
                      " */",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates how to insert a person and their signature in a collection called `People`. This\n collection has an image field for the signature." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "operations":
    [ { "name": "clear",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 129,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Clears the signature.",
            "description":
              [ "The `clear()` function erases the signature from the signature pad and clears the `value` property.",
                "",
                " Clearing the signature using the `clear()` function does not trigger the `onChange` event handler.",
                "",
                " Note, however, that clearing the signature using the **Clear** button does trigger an [`onChange()`](#onChange) event handler, unless the signature input field is already empty." ],
            "links": [],
            "examples":
              [ { "title": "Clear a signature input",
                  "body":
                    [ "let myEmptySignature = $w(\"#mySignatureInput\").clear();" ],
                  "extra":
                    {  } },
                { "title": "Clears fields in a form, including a signature input field",
                  "body":
                    [ "$w('#clearFormButton').onClick(() => {",
                      "  $w('TextInput1').value = '';",
                      "  $w('TextInput2').value = '';",
                      "  $w('#mySignatureInput').clear();",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onChange",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "$w.EventHandler",
              "doc": "The name of the function to run when the signature input element's value changes." } ],
        "ret":
          { "type": "$w.SignatureInput",
            "doc": "The signature input element on which the event is now registered." },
        "locations":
          [ { "lineno": 105,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Adds an event handler that runs when a signature input element's value\n is changed by a site visitor.",
            "description":
              [ "A signature input element receives a `change` event when a site visitor changes its value.",
                "",
                " A `change` event is not triggered when:",
                " + You, the site owner, change an element's value using the [`clear()`](#clear) function.",
                " + The signature input field is empty, and the site visitor clears the signature." ],
            "links": [],
            "examples":
              [ { "title": "Get the value of the signature input element that was changed",
                  "body":
                    [ "$w(\"#mySignatureInputElement\").onChange( (event) => {",
                      "  let newValue = event.target.value;  // \"new value\"",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onCustomValidation",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "validator",
              "type": "$w.SignatureInput.SignatureInputValidator",
              "doc": "The name of the function or\n the function expression to run when the element's custom validation is checked." },
            { "name": "override",
              "type": "boolean",
              "doc": "When `true`, overrides any existing custom validations set for the element so that only the current custom validation applies. \n\nWhen `false`, the current custom validation is added to the previously applied validations and all of them run. The order of execution follows the order the validations were set. \nIf one of the validations rejects, the rest of the validations won't run. \n\nDefaults to `true`, so that omitting the `override` property causes the current custom validation to override any other validations. \nIf multiple validations are set to override explicitly or by default, only the last applied validation will run.\n\nFor example, if you add 4 custom validations to an element and set the `override` parameter to `false`, `true`, `false`, `false` respectively, the first validation won't run\nand the remaining validations will run. This is because the second validation overrides the first.",
              "optional": true } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 147,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Adds an event handler that runs when the element's validation is checked.",
            "description":
              [ "The `onCustomValidation()` function allows you perform custom validation",
                " in addition to any basic validation that was defined in the Editor.",
                "",
                " To invalidate the element, call the `reject()` function that is passed",
                " into the `validator` callback function and pass it a validation message.",
                "",
                " The element's validity is checked when the value of the element",
                " changes either by user interaction or programmatically.",
                "",
                " Note that validations other than **required**, including custom validations,",
                " are not run on input elements when they don't have a value.",
                "",
                " You can use the `override` parameter to override previously applied custom validations." ],
            "links": [],
            "examples":
              [ { "title": "Set an element to invalid if its value is \"evil\"",
                  "body":
                    [ "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"evil\") {",
                      "    reject(\"Evil is invalid\");",
                      "  }",
                      "} );" ],
                  "extra":
                    {  } },
                { "title": "Set a new custom validation that overrides a previous validation",
                  "body":
                    [ "// This validation won't run",
                      "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"evil\") {",
                      "    reject(\"Evil is invalid\");",
                      "  }",
                      "}, false);",
                      "",
                      "// This validation will run",
                      "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"bad\") {",
                      "    reject(\"Bad is invalid\");",
                      "  }",
                      "}, true);" ],
                  "extra":
                    {  } },
                { "title": "Set multiple custom validations",
                  "body":
                    [ "// This validation won't run",
                      "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"ain't\") {",
                      "    reject(\"Ain't is invalid\");",
                      "  }",
                      "}, false);",
                      "",
                      "// This validation won't run",
                      "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"i'd've\") {",
                      "    reject(\"I'd've is invalid\");",
                      "  }",
                      "}, true);",
                      "",
                      "// This validation runs first",
                      "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"there're\") {",
                      "    reject(\"There're is invalid\");",
                      "  }",
                      "});",
                      "",
                      "// This validation runs second",
                      "$w(\"#myElement\").onCustomValidation( (value, reject) => {",
                      "  if(value === \"could've\") {",
                      "    reject(\"Could've is invalid\");",
                      "  }",
                      "}, false);" ],
                  "extra":
                    { "description": "In this example, only the 3rd and 4th custom validations run. This is because the **override** property for the 3rd validation is set to **true** by default and overrides the previous 2 validations." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks":
    [ { "name": "SignatureInputValidator",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "value",
              "type": "string",
              "doc": "The value of the element being validated." },
            { "name": "reject",
              "type": "Function",
              "doc": "A function that invalidates the element with the specified message." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 185,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "Function that runs when custom validation is checked.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "messages":
    [ { "name": "Accessibility",
        "locations":
          [ { "lineno": 217,
              "filename": "SignatureInput.js" } ],
        "docs":
          { "summary": "An object containing attributes to make your Wix elements more accessible.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "lang",
              "type": "string",
              "doc": "Specifies the language of the element's content, enhancing pronunciation accuracy for screen readers and other assistive technologies. \n\nSetting the `lang` property improves multilingual support by ensuring that assistive technologies apply the correct linguistic rules and speech patterns. It also enables search engines to index the element's content accurately, resulting in better visibility and relevance in search results for better SEO optimization. \n\nThe `lang` property's value must be a 2-letter language code in [ISO 639-1 format](https://en.wikipedia.org/wiki/List_of_ISO_639_language_codes). For example, `\"en\"` for english.",
              "optional": true } ],
        "extra":
          {  },
        "labels":
          [ "new" ] } ],
  "extra":
    {  },
  "relatedGuides":
    [ { "path": "./signatureinput/guides/CSS Classes.md" } ],
  "relatedContent":
    [ { "icon": "example",
        "text": "Signature Input",
        "url": "https://www.wix.com/velo/example/signature-input" } ] }