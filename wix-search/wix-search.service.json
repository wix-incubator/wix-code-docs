{ "name": "wix-search",
  "mixes": [],
  "labels":
    [ "new" ],
  "location":
    { "lineno": 1,
      "filename": "search.js" },
  "docs":
    { "summary": "The wix-search module contains functionality for searching a site.",
      "description":
        [ "The wix-search API allows you to create a custom site search experience for your site visitors.",
          " For example, you can use a text input element to get a search phrase from site visitors, search your store",
          " products for the phrase, and display the matching store products in a repeater.",
          "",
          " You can [filter](wix-search.html#filter), [sort](wix-search.WixSearchBuilder.html#ascending), ",
          " and apply [facets](wix-search.WixSearchBuilder.html#facets) (categorize) the results of a site search.",
          "",
          " To enable Search API functionality for your site, you must add the [Wix Site Search application](https://support.wix.com/en/article/about-wix-site-search) to",
          " your site. After installing the app you can delete the Search Bar, but make sure to leave the  [Search Results page](https://support.wix.com/en/article/about-wix-site-search#understanding-the-search-results-page) on",
          " your site. Note that you cannot use the Search API to control the Wix Search Bar or Search Results page.",
          "",
          " The Search API searches supported site documents and returns matching search results in `Document` form.",
          " The following documents are currently supported:",
          "",
          " + **Site pages:** All regular and dynamic site pages with [SEO indexing enabled](https://support.wix.com/en/article/enabling-search-engines-eg-google-to-find-your-site). Note that Wix site pages are indexed by default. Custom router pages and some Wix app pages are not currently included in searches.",
          " + **Wix app content:** Pages whose content is extracted from the following database collections: Blog/Posts, Bookings/Services, Forum/Posts & Forum/Comments, and Stores/Products.",
          "",
          "",
          " To use the search module, import `wixSearch` from the `wix-search` module:",
          "",
          "   ``` javascript",
          "   import wixSearch from 'wix-search';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "filter",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "wix-search.WixSearchFilterBuilder",
            "doc": "A search filter builder object." },
        "locations":
          [ { "lineno": 1,
              "filename": "filter.js" } ],
        "docs":
          { "summary": "Creates a filter builder for building search filters.",
            "description":
              [ "The `filter()` function is used for creating compound filters that are applied to a search using the",
                " `and()`, `or()`, and `not()` filtering functions. You do not need the `filter()` function for applying most filtering",
                " functions (such as `eq()` or `gt()`) to a search. Instead you can add [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " filtering functions directly to your search.",
                "",
                " The `filter()` function creates a [`WixSearchFilterBuilder`](wix-search.WixSearchFilterBuilder.html) object,",
                " which contains functionality for creating compound filters for your site search.",
                "",
                "The following describes a typical filter builder flow:",
                "",
                "",
                " 1. Create a `WixSearchFilterBuilder` using the `filter()` function.",
                " 1. Create a `WixSearchFilter` by chaining a single `WixSearchFilterBuilder` filtering function, such as `eq()` or `gt()`, to the filter builder. You cannot chain more than 1 filtering function to a `WixSearchFilterBuilder`.",
                " 1. Do one of the following:",
                "   + Create more filters: Pass one or more `WixSearchFilters` as parameters to an `and()`, `or()`, or `not()` `WixSearchFilterBuilder` function to create a new `WixSearchFilter`. For example, `newFilter = wixSearch.filter().or(filter1, filter2)`. ",
                "   + Refine a search: Pass one or more `WixSearchFilters` as parameters to an `and()`, `or()`, or `not()` `WixSearchBuilder` function to refine a search. For example, `newSearchBuilder = wixSearch.search().or(filter1, filter2)`.",
                "",
                "",
                " Note that only some fields can be filtered. Check which fields can be filtered in",
                " the supported schemas for each [`documentType`](wix-search.WixSearchBuilder.html#documentType)." ],
            "links": [],
            "examples":
              [ { "title": "Create a filter builder",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let filterBuilder = wixSearch.filter();" ],
                  "extra":
                    {  } },
                { "title": "Create a filter",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let filterBuilder = wixSearch.filter();",
                      "let myFilter = filterBuilder.eq(\"inStock\", true);" ],
                  "extra":
                    {  } },
                { "title": "Create multiple search filters and add them to a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "const filterBuilder = wixSearch.filter();",
                      "",
                      "const gtJanFilter = filterBuilder.gt(\"lastActivityDate\", \"2020-01-01T00:00:00.000Z\");",
                      "const ltFebFilter = filterBuilder.lt(\"lastActivityDate\", \"2020-02-01T00:00:00.000Z\");",
                      "",
                      "const gtAprilFilter = filterBuilder.gt(\"lastActivityDate\", \"2020-04-01T00:00:00.000Z\");",
                      "const ltMayFilter = filterBuilder.lt(\"lastActivityDate\", \"2020-05-01T00:00:00.000Z\");",
                      "",
                      "const januaryFilter = filterBuilder.and(gtJanFilter, ltFebFilter);",
                      "const aprilFilter = filterBuilder.and(gtAprilFilter, ltMayFilter);",
                      "",
                      "const dateFilter = filterBuilder.or(januaryFilter, aprilFilter)",
                      "",
                      "const viewFilter = filterBuilder.gt(\"viewCount\", 200)",
                      "",
                      "wixSearch.search(phrase)",
                      "  .documentType(\"Forum/Content\")",
                      "  .and(dateFilter, viewFilter)",
                      "  .find()",
                      "  .then( (results) => {",
                      "    if(results.documents.length > 0) {",
                      "      let documents = results.documents;",
                      "    } else {",
                      "      console.log(\"No matching results\");",
                      "    }",
                      "  })",
                      "  .catch( (error) => {",
                      "    console.log(error);",
                      "  });" ],
                  "extra":
                    { "description": "This example demonstrates how to create multiple search filters and combine them to search for forum posts or comments\nwith more than 200 views that were posted either in the month of January or April of 2020." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "search",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "phrase",
              "type": "string",
              "doc": "The phrase to run the search on.",
              "optional": true } ],
        "ret":
          { "type": "wix-search.WixSearchBuilder",
            "doc": "A search builder object." },
        "locations":
          [ { "lineno": 33,
              "filename": "search.js" } ],
        "docs":
          { "summary": "Creates a search builder.",
            "description":
              [ "The `search()` function builds a search for a site and returns",
                " a [`WixSearchBuilder`](wix-search.WixSearchBuilder.html) object.",
                "",
                " The returned object contains a search builder, which is used",
                " to run the search with the [`find()`](wix-search.WixSearchBuilder.html#find)",
                " function.",
                "",
                " Before running `find()`, you can refine the search by chaining [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " functions on to the search. `WixSearchBuilder` functions enable you to filter, sort, apply facets,",
                " and control the results a search returns.",
                "",
                " `search()` runs with the following [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " defaults that you can override:",
                "",
                " + [**documentType**](wix-search.WixSearchBuilder.html#documentType): `\"Site/Pages\"`",
                " + [**facets**](wix-search.WixSearchBuilder.html#facets): none",
                " + [**fuzzy**](wix-search.WixSearchBuilder.html#fuzzy): `true`",
                " + [**language**](wix-search.WixSearchBuilder.html#language): For multilingual sites, the current language. For single-language sites, the site language.",
                " + [**limit**](wix-search.WixSearchBuilder.html#limit): `25`",
                " + [**skip**](wix-search.WixSearchBuilder.html#skip): `0`",
                " + [**searchFields**](wix-search.WixSearchBuilder.html#searchFields): All searchable fields.",
                "",
                "",
                "`find()` returns results in the form of a [`WixSearchResult`](wix-search.WixSearchResult.html), which",
                " contains `documents` that match the search, faceting and paging information, ",
                " and functions for paging through the search results.",
                "",
                "`search()` is not case sensitive.",
                "",
                " If a search `phrase` is not specified, `search` returns all documents refined by the search builder.",
                " You can leave out the search phrase if you want to filter, sort, and/or apply facets to your site content",
                " without searching for a particular phrase." ],
            "links": [],
            "examples":
              [ { "title": "Build a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "let search = wixSearch.search(phrase);" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          let documents = results.documents;",
                      "          let firstDocument = documents[0];",
                      "          let facets = results.facets;",
                      "          let totalCount = results.totalCount;",
                      "          let pageSize = results.pageSize;",
                      "          let currentPage = results.currentPage;",
                      "          let totalPages = results.totalPages;",
                      "          let hasNext = results.hasNext();",
                      "          let hasPrev = results.hasPrev();",
                      "          let length = results.length;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and get the first document in the search results",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          let firstDocument = results.documents[0];",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "/**   Example firstDocument:",
                      "  *",
                      "  *  {",
                      "  *     \"_id\":             \"18176e85-ef8b-447c-b66f-f7b7ca360a5d\",",
                      "  *     \"url\":             \"/about\",",
                      "  *     \"documentType\"     \"Site/Pages\",",
                      "  *     \"image\":           \"wix:image://v1/67...4df7.jpg#originWidth=1920&originHeight=2891\",",
                      "  *     \"title\":           \"The Leader in Website Creation\",",
                      "  *     \"description\":     \"Create your own professional web presenceâ€”exactly the way you want. Our powerful...\"",
                      "  *   }",
                      "  */" ],
                  "extra":
                    {  } },
                { "title": "Build and perform a search and display the results in a repeater",
                  "body":
                    [ "import wixSearch from 'wix-search';",
                      "",
                      "// ...",
                      "",
                      "// Before search runs, set the repeater data as empty",
                      "$w('#repeater').data = [];",
                      "",
                      "$w(\"#searchInput\").onKeyPress((keyPress) => {",
                      "  if (keyPress.key === \"Enter\") {",
                      "    const phrase = $w(\"#searchInput\").value;",
                      "    wixSearch.search(phrase)",
                      "      .documentType(\"Stores/Products\")",
                      "      .find()",
                      "      .then((results) => {",
                      "        if (results.documents.length > 0) {",
                      "          $w('#repeater').data = results.documents;",
                      "        } else {",
                      "          console.log(\"No matching results\");",
                      "        }",
                      "      })",
                      "      .catch((error) => {",
                      "        console.log(error);",
                      "      });",
                      "  }",
                      "});",
                      "",
                      "$w(\"#repeater\").onItemReady(($item, itemData) => {",
                      "  $item(\"#title\").text = itemData.title;",
                      "  $item(\"#description\").text = itemData.description;",
                      "  $item(\"#image\").src = itemData.image;",
                      "  $item(\"#button\").link = itemData.url;",
                      "});",
                      "" ],
                  "extra":
                    { "description": "This example demonstrates how to set up a search for store products and display the results in a repeater. Each button in the repeater links to the product page for the selected product." } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "WixSearchFilter",
        "locations":
          [ { "lineno": 2,
              "filename": "filterBuilder.js" } ],
        "docs":
          { "summary": "Contains functionality for filtering a site search.",
            "description":
              [ "`WixSearchFilters` let you create compound filters for filtering a search with",
                " the `and()`, `or()`, and `not()` functions. You do not need `WixSearchFilters`",
                " for applying most filtering functions (such as `eq()` or `gt()`) to a search. Instead",
                " you can chain [`WixSearchBuilder`](wix-search.WixSearchBuilder.html)",
                " filtering functions directly to your search.",
                "",
                "`WixSearchFilters` are created by chaining a single filtering function such as `eq()` and `gt()`",
                "to a [`WixSearchFilterBuilder`](wix-search.WixSearchFilterBuilder.html). Once you've chained a",
                "function to a `WixSearchFilterBuilder` to create a `WixSearchFilter`, you cannot chain any additional functions.",
                "You can then use the `WixSearchFilter` to create additional search filters or to refine a search.",
                "",
                "",
                " The following describes a typical filter builder flow:",
                "",
                "",
                " 1. Create a [`WixSearchFilterBuilder`](wix-search.WixSearchFilterBuilder.html) using the [`filter()`](wix-search/filter) function.",
                " 1. Create a `WixSearchFilter` by applying a single `WixSearchFilterBuilder` filter function, such as `eq()` or `gt()`, to the filter builder. You cannot chain more than 1 filtering function to a `WixSearchFilterBuilder`.",
                " 1. You can use `WixSearchFilters` in one of 2 scenarios:",
                "   + Create more filters: Pass one or more `WixSearchFilters` as parameters to an `and()`, `or()`, or `not()` `WixSearchFilterBuilder` function to create a new `WixSearchFilter`. For example, `newFilter = wixSearch.filter().or(filter1, filter2)`. ",
                "   + Refine a search: Pass one or more `WixSearchFilters` as parameters to an `and()`, `or()`, or `not()` `WixSearchBuilder` function to refine a search. For example, `newSearchBuilder = wixSearch.search().or(filter1, filter2)`." ],
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "filterDefinition",
              "type": "Object",
              "doc": "An object containing the filter definition." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }