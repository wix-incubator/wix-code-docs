{ "name": "ConsentPolicy",
  "memberOf": "wix-window-frontend",
  "mixes": [],
  "labels":
    [ "new" ],
  "location":
    { "lineno": 1250,
      "filename": "window-frontend.js" },
  "docs":
    { "summary": "The ConsentPolicy API is used to perform actions related to the user's allowed cookies and 3rd-party data transfer, such as for GDPR or CCPA purposes.",
      "description":
        [ "The consent policy helps you comply with [GDPR](https://support.wix.com/en/article/preparing-your-wix-site-for-the-gdpr) and [CCPA](https://support.wix.com/en/article/preparing-your-wix-site-for-ccpa) regulations and lets your users",
          "control their information. The site owner sets up the site consent policy and cookie consent banners in",
          "the site's [Privacy Center](https://www.wix.com/my-account/site-selector/?buttonText=Open%20Privacy%20Center&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fcookie-consent-settings-app?referralInfo=corvid-docs).",
          "",
          " To use the ConsentPolicy API, import `{ consentPolicy }` from the `wix-window-frontend` module:",
          "",
          "   ```javascript",
          "   import { consentPolicy } from 'wix-window-frontend';",
          "   ```",
          "",
          "The APIs in `wix-window-frontend.ConsentPolicy` can only be used in front-end code." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "getCurrentConsentPolicy",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "wix-window-frontend.ConsentPolicy.PolicyDetails" },
        "locations":
          [ { "lineno": 1288,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "Gets the visitor's consent policy regarding allowed cookies and 3rd-party data transfer, such as for GDPR or CCPA purposes.",
            "description":
              [ "The `getCurrentConsentPolicy()` function returns the",
                "consent policy details of the visitor, meaning, which cookies the visitor allows and whether data transfer",
                "to 3rd parties is allowed." ],
            "links": [],
            "examples":
              [ { "title": "Get a members's consent policy",
                  "body":
                    [ "import { consentPolicy } from 'wix-window-frontend';",
                      "",
                      "// ...",
                      "",
                      "const policyDetails = consentPolicy.getCurrentConsentPolicy();",
                      "const policy = policyDetails.policy;",
                      "",
                      "/* policyDetails value:",
                      " *",
                      " * {",
                      " *   \"defaultPolicy\" : true,",
                      " *   \"policy\" : {",
                      " *     \"essential\" : true,",
                      " *     \"functional\" : true,",
                      " *     \"analytics\" : true,",
                      " *     \"advertising\" : true,",
                      " *     \"dataToThirdParty\" : true",
                      " *   },",
                      " *   \"createdDate\" : 2020-07-20T12:33:09.775Z",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onConsentPolicyChanged",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "wix-window-frontend.ConsentPolicy.ConsentPolicyChangedHandler",
              "doc": "The name of the function or\n the function expression to run when the consent policy is changed." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 1359,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "Sets the function that runs\nwhen a visitor's consent policy was changed using\n[`setConsentPolicy()`](#setConsentPolicy) or reset using\n[`resetConsentPolicy()`](#resetConsentPolicy).",
            "description":
              [ "Use the `onConsentPolicyChanged()` function for code you want to run after",
                "the visitor's current consent policy was changed using",
                "[`setConsentPolicy()`](#setConsentPolicy) or reset using",
                "[`resetConsentPolicy()`](#resetConsentPolicy).",
                "",
                "",
                "Usually, you want to call the `onConsentPolicyChanged()` function in the **masterpage.js** file in the",
                "code panel so that the `onConsentPolicyChanged()` event handler runs no matter which",
                "page on your site is used to change the policy." ],
            "links": [],
            "examples":
              [ { "title": "Run code when a visitor's consent policy changed",
                  "body":
                    [ "import { consentPolicy } from 'wix-window-frontend';",
                      "",
                      "// ...",
                      "",
                      "consentPolicy.onConsentPolicyChanged((event) => {",
                      "  const policy = event.policy();",
                      "  console.log(event);",
                      "});",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"defaultPolicy\": false,",
                      " *   \"policy\": {",
                      " *     \"functional\": false,",
                      " *     \"analytics\": true,",
                      " *     \"advertising\": false,",
                      " *     \"dataToThirdParty\": false,",
                      " *     \"essential\": true",
                      " *   },",
                      " *   \"createdDate\": \"2021-07-04T23:36:00.000Z\"",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "resetConsentPolicy",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When the reset is complete.\nRejected - Error message." },
        "locations":
          [ { "lineno": 1302,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "Removes the current policy from the visitor's browser\nand resets the visitor's consent policy to the default policy for the site.",
            "description":
              [ "The `resetConsentPolicy()` function returns a Promise that resolves when the policy is reset." ],
            "links": [],
            "examples":
              [ { "title": "Reset a visitor's consent policy",
                  "body":
                    [ "import { consentPolicy } from 'wix-window-frontend';",
                      "",
                      "// ...",
                      "",
                      "consentPolicy.resetConsentPolicy()",
                      "  .then((policy) => {",
                      "    console.log(\"The policy is now set to the default site policy.\");",
                      "    return policy;",
                      "  })",
                      "  .catch((error) => {",
                      "    console.error(error);",
                      "  });" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "setConsentPolicy",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "policy",
              "type": "wix-window-frontend.ConsentPolicy.Policy",
              "doc": "An object representing the cookies of the visitor's consent policy." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-window-frontend.ConsentPolicy.PolicyDetails" ] },
            "doc": "Fulfilled - All the details of the visitor's consent policy, including if the the current policy is the default site policy and the policy's allowed cookies.\nRejected - Error message." },
        "locations":
          [ { "lineno": 1317,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "Sets the current visitor's consent policy\nregarding allowed cookies and data transfer to 3rd parties,\nsuch as for GDPR or CCPA purposes.",
            "description":
              [ "The `setConsentPolicy()` function returns a Promise that resolves to the",
                "consent policy details of the visitor.",
                "",
                "",
                "You can use the [`onConsentPolicyChanged()`](#onConsentPolicyChanged) event to listen for",
                "changes made when a visitor changes their consent policy with `setConsentPolicy()`. Handle",
                "the policy change accordingly in the event handler's [ConsentPolicyChangedHandler callback function](#ConsentPolicyChangedHandler).",
                "Changes to the consent policy take affect after the page is refreshed." ],
            "links": [],
            "examples":
              [ { "title": "Set a visitor's consent policy",
                  "body":
                    [ "import { consentPolicy } from 'wix-window-frontend';",
                      "",
                      "// ...",
                      "",
                      "const myPolicy = {",
                      "\tessential: $w('#essentialCheckbox').checked,",
                      "\tanalytics: $w('#analyticsCheckbox').checked,",
                      "\tfunctional: $w('#functionalCheckbox').checked,",
                      "\tadvertising: $w('#advertisingCheckbox').checked,",
                      "\tdataToThirdParty: $w('#dataToThirdPartyCheckbox').checked",
                      "};",
                      "",
                      "consentPolicy.setConsentPolicy(myPolicy)",
                      "\t.then((policyDetails) => {",
                      "\t\tconst newPolicy = policyDetails.policy;",
                      "\t\treturn policyDetails;",
                      "\t})",
                      "\t.catch((error) => {",
                      "\t\tconsole.error(error);",
                      "\t});",
                      "",
                      "/* policyDetails value:",
                      " * {",
                      " *   \"defaultPolicy\" : false,",
                      " *   \"policy\" : {",
                      " *     \"essential\" : true,",
                      " *     \"functional\" : false,",
                      " *     \"analytics\" : false,",
                      " *     \"advertising\" : false,",
                      " *     \"dataToThirdParty\" : false",
                      " *   },",
                      " *   \"createdDate\" : 2020-12-20T12:33:09.775Z",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks":
    [ { "name": "ConsentPolicyChangedHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-window-frontend.ConsentPolicy.ConsentPolicyChangedEvent",
              "doc": "The event that occurred when the consent policy changed." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 1342,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "Function that runs when a user's consent policy was changed using [`setConsentPolicy()`](#setConsentPolicy).",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "messages":
    [ { "name": "ConsentPolicyChangedEvent",
        "locations":
          [ { "lineno": 1350,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "The event that occurred when the consent policy changed.",
            "links":
              [ "[onConsentPolicyChanged()](#onConsentPolicyChanged)" ],
            "examples":
              [ { "title": "Run code when a a user's consent policy changed",
                  "body":
                    [ "import { consentPolicy } from 'wix-window-frontend';",
                      "",
                      "// ...",
                      "",
                      "consentPolicy.onConsentPolicyChanged((event) => {",
                      "  const policy = event.policy();",
                      "  console.log(event);",
                      "});",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"defaultPolicy\": false,",
                      " *   \"policy\": {",
                      " *     \"functional\": false,",
                      " *     \"analytics\": true,",
                      " *     \"advertising\": false,",
                      " *     \"dataToThirdParty\": false,",
                      " *     \"essential\": true",
                      " *   },",
                      " *   \"createdDate\": \"2021-07-04T23:36:00.000Z\"",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members": [],
        "extra":
          {  },
        "labels": [] },
      { "name": "Policy",
        "locations":
          [ { "lineno": 1398,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "The current user's consent policy settings.",
            "description":
              [ "An object containing the consent policy cookie settings, by type, of the user currently viewing the site." ],
            "links": [],
            "examples":
              [ { "title": "Get the current user's consent policy",
                  "body":
                    [ "import { consentPolicy } from 'wix-window-frontend';",
                      "",
                      "// ...",
                      "",
                      "const policyDetails = consentPolicy.getCurrentConsentPolicy();",
                      "const policy = policyDetails.policy;",
                      "",
                      "/* policyDetails value:",
                      " *",
                      " * {",
                      " *   \"defaultPolicy\" : true,",
                      " *   \"policy\" : {",
                      " *     \"essential\" : true,",
                      " *     \"functional\" : true,",
                      " *     \"analytics\" : true,",
                      " *     \"advertising\" : true,",
                      " *     \"dataToThirdParty\" : true",
                      " *   },",
                      " *   \"createdDate\" : 2020-07-20T12:33:09.775Z",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "essential",
              "type": "boolean",
              "doc": "Consent for mandatory cookies for Wix websites, such as for security cookies. Wix places these cookies on your device and these cookies do not require user consent. Always `true`." },
            { "name": "functional",
              "type": "boolean",
              "doc": "Consent for cookies placed on the user's device that \"remember\" user settings to improve user experience. For example, an indication that the user dismissed a popup. The default is `true`." },
            { "name": "analytics",
              "type": "boolean",
              "doc": "Consent for cookies used for analytics, such as Wix analytics, Google Analytics, Yandex Metrica, and so on. The default is `true`." },
            { "name": "advertising",
              "type": "boolean",
              "doc": "Consent for cookies used for advertising purposes. This includes 3rd-party scripts and pixels that may potentially place advertising cookies on the device (such as Twitter page view and Facebook Pixel). The default is `true`." },
            { "name": "dataToThirdParty",
              "type": "boolean",
              "doc": "Consent for a user's personal data to be transferred to a 3rd party (such as Google Analytics, Facebook Pixel, and FullStory). The default is `true`." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PolicyDetails",
        "locations":
          [ { "lineno": 1385,
              "filename": "window-frontend.js" } ],
        "docs":
          { "summary": "The complete details of the current user's consent policy.",
            "description":
              [ "An object containing all the details about the consent policy of the user currently viewing the site.",
                " This is returned in the Promise of the `setConsentPolicy()` function." ],
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "defaultPolicy",
              "type": "boolean",
              "doc": "Whether the policy is the default consent policy set by the site owner. If `true`, either the user has not set a policy or the site owner has reset the policy." },
            { "name": "policy",
              "type": "wix-window-frontend.ConsentPolicy.Policy",
              "doc": "An object representing the user's current consent policy." },
            { "name": "createdDate",
              "type": "Date",
              "doc": "If a cookie exists in the browser defining the current consent policy, the date the policy was set. Otherwise, undefined.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }