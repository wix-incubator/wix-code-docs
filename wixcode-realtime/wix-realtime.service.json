{ "name": "wix-realtime",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "realtime.js" },
  "docs":
    { "summary": "The wix-realtime module contains functionality for working with\n XXXXXXXXXXXXXXX\n XXXXXXXXXXXXXXX\n XXXXXXXXXXXXXXX\n XXXXXXXXXXXXXXX\n XXXXXXXXXXXXXXX\n XXXXXXXXXXXXXXX\n messaging, polling",
      "description":
        [ "To use the Realtime API, import `wixRealtime` from the `wix-realtime` module:",
          "",
          "   ```javascript",
          "   import wixRealtime from 'wix-realtime';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "onConnected",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "wix-realtime.ConnectionHandler",
              "doc": "The name of the function or\n the function expression to run when a connection occurs." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 162,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "Adds an event handler that runs when a connection or reconnection\n occurs.",
            "description":
              [ "A connection occurs when subscribing to a channel or channel resource or ",
                " when an existing connection is lost and then restored." ],
            "links": [],
            "examples":
              [ { "title": "Add a connection handler",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.onConnected( () => {",
                      "  // handle connection",
                      "  $w(\"disconnectedMessage\").hide();",
                      "} );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onDisconnected",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "wix-realtime.DisconnectionHandler",
              "doc": "The name of the function or\n the function expression to run when a disconnection occurs." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 182,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "Adds an event handler that runs when a disconnection occurs.",
            "description":
              [ "A disconnection can occur, for example, if there is a network issue." ],
            "links": [],
            "examples":
              [ { "title": "Add a connection handler",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.onDisconnected( () => {",
                      "  // handle disconnection",
                      "  $w(\"disconnectedMessage\").show();",
                      "} );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onError",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "handler",
              "type": "wix-realtime.ErrorHandler",
              "doc": "The name of the function or\n the function expression to run when an error occurs." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 141,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "Adds an event handler that runs when an error occurs.",
            "description":
              [ "An error can occur when attempting to resubscribe after a disconnection.",
                " Errors that occur during the initial subscription process cause the",
                " Promise returned by the [`subscribe()`](#subscribe) function to reject",
                " and do not trigger `onError()` event handlers." ],
            "links": [],
            "examples":
              [ { "title": "Add an error handler",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.onError( (error) => {",
                      "  let code = error.errorCode;",
                      "  let message = error.message;",
                      "  if(channel) {",
                      "    let channelName = error.channel.name;",
                      "    let resourceId = error.channel.resourceId;",
                      "  }",
                      "} );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "subscribe",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "channel",
              "type": "wix-realtime.Channel",
              "doc": "The channel, and optionally the resource, to \n subscribe to." },
            { "name": "handler",
              "type": "wix-realtime.MessageHandler",
              "doc": "The name of the function or\n the function expression to run when something is published to the channel or \n channel resource subscribed to." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "string" ] },
            "doc": "Fulfilled - An ID representing the subscription, used for unsubscribing." },
        "locations":
          [ { "lineno": 56,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "Subscribes to a channel or channel resource.",
            "description":
              [ "The `subscribe()` function subscribes to receive messages published on the",
                " specified channel or channel resource. ",
                "",
                " When you subscribe to a channel you do not receive messages published to",
                " a resource on that same channel. To receive those messages, you must",
                " explicitly subscribe to the specific resource.",
                "",
                " The specified message handler is run each time a message is published on",
                " the given channel or channel resource.",
                "",
                " You can subscribe to a channel or channel resource more than once to add",
                " multiple message handlers. Each subscription returns a unique subscription",
                " ID which can be used later to unsubscribe from the specific subscription ",
                " with that ID, without affecting the other subscriptions on the same channel",
                " or channel resource." ],
            "links": [],
            "examples":
              [ { "title": "Subscribe to a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Subscribe to a resource on a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {",
                      "  \"name\": \"someChannel\",",
                      "  \"resourceId\": \"someId\"",
                      "};",
                      "let subscriptionId;",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  let resourceId = channel.resourceId;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "unsubscribe",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "channel",
              "type": "wix-realtime.Channel",
              "doc": "The channel, and optionally the resource, to \n unsubscribe from." },
            { "name": "unsubscribeOptions",
              "type": "string",
              "doc": "Options to use when unsubscribing." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "Fulfilled - When unsubscribed from the channel or channel resource." },
        "locations":
          [ { "lineno": 96,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "Unsubscribes from a channel or channel resource.",
            "description":
              [ "The `unsubscribe()` function unsubscribes from receiving messages published",
                " on the specified channel or channel resource. ",
                "",
                " When you unsubscribe from a channel you do not unsubscribe from the",
                " resources on that same channel. To no longer receive messages on a",
                " channel resource, you must explicitly unsubscribe from the specific resource.",
                "",
                " If you have more than one subscription to the same channel or channel resources,",
                " use the optional [`unsubscribeOptions`](#UnsubscribeOptions) parameter to",
                " specify which specific subscription to unsubscribe from:",
                "",
                " + If a `subscriptionId` is specified in the `unsubscribeOptions`, the function",
                "   call unsubscribes from the subscription with the specified ID.",
                " + If no `unsubscribeOptions` are specified, the function call unsubscribes from all",
                "   the subscriptions to the specified channel or channel resource." ],
            "links": [],
            "examples":
              [ { "title": "Unsubscribe all subscriptions from a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "",
                      "wixRealtime.subscribe(channel, messageHandler)",
                      "  .then( (id) => {",
                      "    subscriptionId = id;",
                      "  });",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.unsubscribe(channel)",
                      "  .then( () => {",
                      "    // unsubscribed from channel and all resources",
                      "  } );",
                      "",
                      "// ...",
                      "",
                      "function messageHandler(message, channel){",
                      "  // handle channel messages",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Unsubscribe from a specific subscription to a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "let subscriptionId1;",
                      "let subscriptionId2;",
                      "",
                      "wixRealtime.subscribe(channel, messageHandler1)",
                      "  .then( (id) => {",
                      "    subscriptionId1 = id;",
                      "  }) ;",
                      "",
                      "wixRealtime.subscribe(channel, messageHandler2)",
                      "  .then( (id) => {",
                      "    subscriptionId2 = id;",
                      "  }) ;",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.unsubscribe(channel, {\"subscriptionId\": subscriptionId1})",
                      "  .then( () => {",
                      "    // unsubscribed from channel resource",
                      "  } );",
                      "",
                      "// ...",
                      "",
                      "function messageHandler1(message, channel){",
                      "  // handle channel messages",
                      "}",
                      "",
                      "function messageHandler2(message, channel){",
                      "  // handle channel messages",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks":
    [ { "name": "ConnectionHandler",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 156,
              "filename": "realtime.js" } ],
        "docs":
          { "description":
              [ "Handles connections." ],
            "links":
              [ "[onConnected( )](#onConnected)" ],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "DisconnectionHandler",
        "labels": [],
        "nameParams": [],
        "params": [],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 176,
              "filename": "realtime.js" } ],
        "docs":
          { "description":
              [ "Handles disconnections." ],
            "links":
              [ "[onDisonnected( )](#onDisonnected)" ],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "ErrorHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "error",
              "type": "wix-realtime.Error",
              "doc": "The error that occurred." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 135,
              "filename": "realtime.js" } ],
        "docs":
          { "description":
              [ "Handles realtime errors." ],
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "MessageHandler",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "message",
              "type": "wix-realtime.Message",
              "doc": "The message that was published." },
            { "name": "channel",
              "type": "wix-realtime.Channel",
              "doc": "The channel the message was published on." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 48,
              "filename": "realtime.js" } ],
        "docs":
          { "description":
              [ "Handles a message published to a channel or channel resource." ],
            "links":
              [ "[subscribe( )](#subscribe)" ],
            "examples": [],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "messages":
    [ { "name": "Channel",
        "locations":
          [ { "lineno": 19,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "An object representing a channel.",
            "links":
              [ "[subscribe( )](#subscribe)" ],
            "examples":
              [ { "title": "Subscribe to a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Subscribe to a resource on a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {",
                      "  \"name\": \"someChannel\",",
                      "  \"resourceId\": \"someId\"",
                      "};",
                      "let subscriptionId;",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  let resourceId = channel.resourceId;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "name",
              "type": "string",
              "doc": "Channel name. Cannot exceed 140 characters." },
            { "name": "resourceId",
              "type": "string",
              "doc": "ID of a specific channel resource.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Error",
        "locations":
          [ { "lineno": 125,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "An object representing an error.",
            "links":
              [ "[onError( )](#onError)" ],
            "examples":
              [ { "title": "Add an error handler",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.onError( (error) => {",
                      "  let code = error.errorCode;",
                      "  let message = error.message;",
                      "  if(channel) {",
                      "    let channelName = error.channel.name;",
                      "    let resourceId = error.channel.resourceId;",
                      "  }",
                      "} );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "errorCode",
              "type": "number",
              "doc": "Error code. XXX Add possible codes. XXX" },
            { "name": "message",
              "type": "string",
              "doc": "Error message. XXX Add possible messages. XXX" },
            { "name": "channel",
              "type": "wix-realtime.Channel",
              "doc": "Channel related to the error.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Message",
        "locations":
          [ { "lineno": 38,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "An object representing a published message.",
            "links":
              [ "[subscribe( )](#subscribe)" ],
            "examples":
              [ { "title": "Subscribe to a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Subscribe to a resource on a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {",
                      "  \"name\": \"someChannel\",",
                      "  \"resourceId\": \"someId\"",
                      "};",
                      "let subscriptionId;",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  let resourceId = channel.resourceId;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "payload",
              "type": "*",
              "doc": "Message payload." },
            { "name": "publisher",
              "type": "wix-realtime.Publisher",
              "doc": "Message publisher, if sent." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "Publisher",
        "locations":
          [ { "lineno": 29,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "An object representing a publisher.",
            "links":
              [ "[subscribe( )](#subscribe)" ],
            "examples":
              [ { "title": "Subscribe to a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } },
                { "title": "Subscribe to a resource on a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {",
                      "  \"name\": \"someChannel\",",
                      "  \"resourceId\": \"someId\"",
                      "};",
                      "let subscriptionId;",
                      "",
                      "wixRealtime.subscribe(channel, (message, channel) => {",
                      "  let payload = message.payload;",
                      "  let channelName = channel.name;",
                      "  let resourceId = channel.resourceId;",
                      "  if(message.publisher) {",
                      "    let publisherId = message.publisher.uid;",
                      "  }",
                      "})",
                      ".then((id) => {",
                      "  subscriptionId = id;",
                      "});" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "uid",
              "type": "string",
              "doc": "ID of the publisher." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "UnsubscribeOptions",
        "locations":
          [ { "lineno": 87,
              "filename": "realtime.js" } ],
        "docs":
          { "summary": "An object containing options to be used when unsubscribing from a\n channel or channel resource.",
            "links":
              [ "[unsubscribe( )](#unsubscribe)" ],
            "examples":
              [ { "title": "Unsubscribe from a specific subscription to a channel",
                  "body":
                    [ "import wixRealtime from 'wix-realtime';",
                      "",
                      "// ...",
                      "",
                      "const channel = {\"name\": \"someChannel\"};",
                      "let subscriptionId1;",
                      "let subscriptionId2;",
                      "",
                      "wixRealtime.subscribe(channel, messageHandler1)",
                      "  .then( (id) => {",
                      "    subscriptionId1 = id;",
                      "  }) ;",
                      "",
                      "wixRealtime.subscribe(channel, messageHandler2)",
                      "  .then( (id) => {",
                      "    subscriptionId2 = id;",
                      "  }) ;",
                      "",
                      "// ...",
                      "",
                      "wixRealtime.unsubscribe(channel, {\"subscriptionId\": subscriptionId1})",
                      "  .then( () => {",
                      "    // unsubscribed from channel resource",
                      "  } );",
                      "",
                      "// ...",
                      "",
                      "function messageHandler1(message, channel){",
                      "  // handle channel messages",
                      "}",
                      "",
                      "function messageHandler2(message, channel){",
                      "  // handle channel messages",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "subscriptionId",
              "type": "string",
              "doc": "ID of the subscription to unsubscribe from." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }