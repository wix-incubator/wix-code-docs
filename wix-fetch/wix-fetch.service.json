{ "name": "wix-fetch",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "filename": "index.js",
      "lineno": 11 },
  "docs":
    { "summary": "An implementation of the standard [Javascript Fetch API](https://developer.mozilla.org/en/docs/Web/API/Fetch_API)\n which can be used in public and backend code for fetching resources\n from [3rd party services](https://support.wix.com/en/article/accessing-3rd-party-services)\n using HTTPS.",
      "description":
        [ "To make a request, call the [fetch()](#fetch) function with the path to a",
          " resource and the optional [`WixFetchRequest`](#WixFetchRequest) options. The",
          " returns a promise that resolves to a [`WixFetchResponse`](wix-fetch.WixFetchResponse.html).",
          " The response object contains a number of properties and functions for",
          " retrieving the response's information.",
          "",
          " The Fetch API can be used in your front-end or backend code.",
          "",
          " To use the Fetch API in the backend, import the `fetch` function from the",
          " `wix-fetch` module:",
          "",
          "   ``` javascript",
          "   import {fetch} from 'wix-fetch';",
          "   ```",
          "",
          " <div id=\"implementations\"></div>",
          "",
          " The implementation of the Fetch API differs slightly depending on where it's",
          " being used. The features documented here comprise the base functionality for",
          " both implementations. However, each implementation contains additional features:",
          "",
          " + In public files, the native browser's",
          "   <a href=\"https://developer.mozilla.org/en/docs/Web/API/Fetch_API\" target=\"_blank\">Fetch API</a> is used.",
          " + In backend files the <a href=\"https://github.com/bitinn/node-fetch\" target=\"_blank\">node-fetch</a> module is used." ],
      "links": [],
      "examples": [] },
  "properties": [],
  "operations":
    [ { "name": "fetch",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "url",
              "type": "string",
              "doc": "The url of the resource to fetch." },
            { "name": "options",
              "type": "wix-fetch.WixFetchRequest",
              "doc": "Options for the fetch operation." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-fetch.WixFetchResponse" ] },
            "doc": "on fulfilled - The HTTP response of the fetch operation\non rejected - The error that caused the rejection." },
        "locations":
          [ { "filename": "index.js",
              "lineno": 214 } ],
        "docs":
          { "summary": "Retrieves the specified resource from the network using HTTPS.",
            "description":
              [ "The `fetch()` function fetches an HTTPS resource from the network. It returns",
                " a Promise that resolves to a [`WixFetchResponse`](wix-fetch.WixFetchResponse.html)",
                " object representing the HTTP response to the request.",
                "",
                " Responses with an HTTP status code in the ranges 2xx, 4xx, and 5xx are",
                " considered fulfilled. Use the {@link wix-fetch.WixFetchResponse#ok|`httpResponse.ok`}",
                " property to confirm that the HTTP request was successful with a response",
                " code in the 2xx range." ],
            "links": [],
            "examples":
              [ { "title": "Get a resource",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch(\"https://exchangeratesapi.io/api/latest\", {method: \"get\"})",
                      "  .then( (httpResponse) => {",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    } else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then(json => console.log(json.rates[\"USD\"]))",
                      "  .catch(err => console.log(err));" ] },
                { "title": "Get a resource and the response information",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch(\"https://exchangeratesapi.io/api/latest\", {method: \"get\"})",
                      "  .then( (httpResponse) => {",
                      "    let url = httpResponse.url;",
                      "    let statusCode = httpResponse.status;",
                      "    let statusText = httpResponse.statusText;",
                      "    let headers = httpResponse.headers;",
                      "    let bodyUsed = httpResponse.bodyUsed;",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    }",
                      "    else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then( (json) => {",
                      "    console.log(json.rates[\"USD\"]);",
                      "  } )",
                      "  .catch( (err) => {",
                      "    console.log(err);",
                      "  } );" ] } ] },
        "extra":
          { "notes":
              [ "Some common errors when using the `fetch()` function are described here along\n with possible solutions. You can usually tell if you are experiencing these\n issues by checking your browser's console using the [browser's devloper tools](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools).\n\n Certain [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)\n (Cross-Origin Resource Sharing) requests are restricted when originating\n from a browser. Usually, GET requests and certain POST requests can be made\n from your site's **Public**, **Page**, or **Site** code. All other requests need to be made\n from your site's **Backend** code. If you are experiencing an issue with a `fetch()`\n call due to a CORS restriction, move the `fetch()` call to the backend as\n described in [Accessing 3rd Party Services](https://support.wix.com/en/article/accessing-3rd-party-services#backend-service-call).\n\n You cannot request HTTP content if your site is an HTTPS site. To fix this issues\n you can either use the HTTPS protocol to fetch the requested resources or you\n can [turn off SSL on your site](https://support.wix.com/en/article/turning-ssl-on-or-off-for-your-site)." ] } } ],
  "callbacks": [],
  "messages":
    [ { "name": "WixFetchRequest",
        "locations":
          [ { "filename": "index.js",
              "lineno": 45 } ],
        "docs":
          { "summary": "An object used by the `fetch()` function representing an HTTPS request.",
            "description":
              [ "The `WixFetchRequest` object contains information about an HTTPS request.",
                "More functionality is available in each of the respective [Fetch API implementations](#implementations)." ],
            "links": [],
            "examples": [] },
        "members":
          [ { "name": "method",
              "type": "string",
              "doc": "The [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods) to use (if omitted, defaults to `\"GET\"`)." },
            { "name": "headers",
              "type": "Object",
              "doc": "The request headers." },
            { "name": "body",
              "type": "string",
              "doc": "The request body." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }