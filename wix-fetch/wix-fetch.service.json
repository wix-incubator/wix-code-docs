{ "name": "wix-fetch",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 7,
      "filename": "index.js" },
  "docs":
    { "summary": "The wix-fetch module contains functionality for sending HTTPS requests to a server.",
      "description":
        [ "The Fetch API enables you to send an HTTPS request to a server from your frontend or backend code.",
          " You can use the Fetch API to communicate with an external API to access or manage data.",
          " ",
          " With the Fetch API, you can:",
          " + Integrate additional functionality using a 3rd party API.",
          " + Retrieve data from an external service.",
          " + Submit data to an external database.",
          "",
          " The Fetch API is a Velo implementation of the standard [Javascript Fetch API](https://developer.mozilla.org/en/docs/Web/API/Fetch_API)",
          " and works in a similar fashion.",
          " For examples of how to use the Fetch API, see [Getting Started](/getting-started/integration-with-third-party-services)",
          " and [Accessing 3rd Party Services with the Fetch API](https://support.wix.com/en/article/velo-accessing-3rd-party-services-with-the-fetch-api).",
          " For a video tutorial, see [Wix Learn](https://www.wix.com/learn/online-course/coding-with-velo/velo-backend#get-to-know-fetch).",
          "",
          " To use the Fetch API, import the `fetch` function from the `wix-fetch` module:",
          "",
          "   ```javascript",
          "   import {fetch} from 'wix-fetch';",
          "   ``` ",
          "",
          " ## Before you begin",
          " While you can use the Fetch API in frontend or backend code, it's usually best to make calls to external APIs from your backend code.",
          " This is more secure, especially if the API requires a key or other authentication, and it avoids [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) issues that can occur when",
          " making some calls from the frontend. ",
          "",
          " The implementation of the Fetch API differs slightly depending on whether you are using it in backend or frontend code.",
          " The features documented here comprise the base functionality for both implementations.",
          " However, each implementation contains additional features:",
          "",
          " + In frontend code, the native browser's",
          "   [Fetch API](https://developer.mozilla.org/en/docs/Web/API/Fetch_API) is used.",
          " + In backend code the [node-fetch](https://github.com/bitinn/node-fetch) module is used.",
          " ",
          " ## Terminology",
          " + **HTTP:** HTTP is a standard protocol for [transmitting information](https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages) between a client and server.",
          " The client (your site) sends a [request](https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages#http_requests)",
          " to a server (an external API) and waits for a [response](https://developer.mozilla.org/en-US/docs/Web/HTTP/Messages#http_responses).",
          " + **Method:** Each HTTP request contains a [method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods) indicating the type of action being requested.",
          " For example, a `GET` request is used for retrieving data, and a `POST` request for submitting data." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "fetch",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "url",
              "type": "string",
              "doc": "The url of the resource to fetch." },
            { "name": "options",
              "type": "wix-fetch.WixFetchRequest",
              "doc": "Options for the fetch operation.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-fetch.WixFetchResponse" ] },
            "doc": "Fulfilled - The HTTP response of the fetch operation.\nRejected - The error that caused the rejection." },
        "locations":
          [ { "lineno": 215,
              "filename": "index.js" } ],
        "docs":
          { "summary": "Retrieves the specified resource from the network using HTTPS.",
            "description":
              [ "The `fetch()` function fetches an HTTPS resource from the network. It returns",
                " a Promise that resolves to a [`WixFetchResponse`](wix-fetch.WixFetchResponse.html)",
                " object representing the HTTP response to the request.",
                "",
                " Responses with an HTTP status code in the ranges 2xx, 4xx, and 5xx are",
                " considered fulfilled. Use the [`httpResponse.ok`](wix-fetch.WixFetchResponse.html#ok)",
                " property to confirm that the HTTP request was successful with a response",
                " code in the 2xx range.",
                "",
                " The optional `WixFetchRequest` object contains information about an HTTPS request.",
                " Additional functionality is available in each of the respective [Fetch API implementations](wix-fetch/introduction).",
                "",
                " > **Notes:**",
                " > Some common errors when using the `fetch()` function are described here along with possible solutions.",
                " >",
                " > - You can usually tell if you are experiencing these issues by checking your browser's console using the [browser's developer tools](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools).",
                " > - Certain [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) (Cross-Origin Resource Sharing) requests are restricted when originating from a browser. Usually, GET requests and certain POST requests can be made",
                " >   from your site's **Public**, **Page**, or **Site** code. All other requests need to be made from your site's **Backend** code. If you are experiencing an issue with a `fetch()`",
                " >   call due to a CORS restriction, move the `fetch()` call to the backend as described in [Accessing 3rd Party Services](https://support.wix.com/en/article/accessing-3rd-party-services#backend-service-call).",
                " > - Because all Wix sites use HTTPS, you can't request HTTP content from a service in your site's code." ],
            "links": [],
            "examples":
              [ { "title": "Get a resource",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch(\"https://someapi.com/api/someendpoint\", {\"method\": \"get\"})",
                      "  .then( (httpResponse) => {",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    } else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then(json => console.log(json.someKey))",
                      "  .catch(err => console.log(err));" ],
                  "extra":
                    {  } },
                { "title": "Post data to a resource",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch( \"https://someapi.com/api/someendpoint\", {",
                      "  \"method\": \"post\",",
                      "  \"headers\": {",
                      "    \"Content-Type\": \"application/x-www-form-urlencoded\"",
                      "  },",
                      "  \"body\": \"somekey=somevalue\"",
                      "} )",
                      "  .then( (httpResponse) => {",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    } else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then( (json) => console.log(json.someKey) )",
                      "  .catch(err => console.log(err));" ],
                  "extra":
                    {  } },
                { "title": "Get a resource and the response information",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch(\"https://someapi.com/api/someendpoint\", {\"method\": \"get\"})",
                      "  .then( (httpResponse) => {",
                      "    let url = httpResponse.url;",
                      "    let statusCode = httpResponse.status;",
                      "    let statusText = httpResponse.statusText;",
                      "    let headers = httpResponse.headers;",
                      "    let bodyUsed = httpResponse.bodyUsed;",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    }",
                      "    else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then( (json) => {",
                      "    console.log(json.someKey);",
                      "  } )",
                      "  .catch( (err) => {",
                      "    console.log(err);",
                      "  } );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "getJSON",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "url",
              "type": "string",
              "doc": "The url of the JSON resource to retrieve." },
            { "name": "options",
              "type": "wix-fetch.WixFetchRequest",
              "doc": "Options for the retrieval operation.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "Object" ] },
            "doc": "Fulfilled - The JSON response of the fetch operation.\nRejected - The error that caused the rejection." },
        "locations":
          [ { "lineno": 252,
              "filename": "index.js" } ],
        "docs":
          { "summary": "Retrieves the specified JSON resource from the network using HTTPS.",
            "description":
              [ "The `getJSON()` function retrieves a JSON resource from the network. It returns",
                " a Promise that resolves to a JSON object representing the response to the request.",
                "",
                " To use `getJSON`, import it from `wix-fetch`:",
                "",
                " ```javascript",
                " import {getJSON} from 'wix-fetch';",
                " ```",
                "",
                " Retrieving the JSON object is performed using the GET method, regardless of",
                " what is specified in the `options` parameter.",
                "",
                " The `Accept` header is assumed to be `application/json` by default, but you",
                " can override it by explicitly setting a different value for `Accept`.",
                "",
                " The optional `WixFetchRequest` object contains information about an HTTPS request.",
                " Additional functionality is available in each of the respective [Fetch API implementations](wix-fetch/introduction).",
                "",
                " > **Notes:**",
                " > Some common errors when using the `getJSON()` function are described here along with possible solutions.",
                " >",
                " > - You can usually tell if you are experiencing these issues by checking your browser's console using the [browser's developer tools](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools).",
                " > - Certain [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) (Cross-Origin Resource Sharing) requests are restricted when originating from a browser. Usually, GET requests and certain POST requests can be made from your site's **Public**, **Page**, or **Site** code. All other requests need to be made from your site's **Backend** code. If you are experiencing an issue with a `getJSON()` call due to a CORS restriction, move the `getJSON()` call to the backend as described in [Accessing 3rd Party Services](https://support.wix.com/en/article/accessing-3rd-party-services#backend-service-call).",
                " > - You cannot request HTTP content if your site is an HTTPS site. To fix this issue you can either use the HTTPS protocol to fetch the requested resources or you can [turn off SSL on your site](https://support.wix.com/en/article/turning-ssl-on-or-off-for-your-site)." ],
            "links": [],
            "examples":
              [ { "title": "Get a JSON resource",
                  "body":
                    [ "import {getJSON} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "getJSON(\"https://someapi.com/api/someendpoint\")",
                      "  .then(json => console.log(json.someKey))",
                      "  .catch(err => console.log(err));" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "WixFetchRequest",
        "locations":
          [ { "lineno": 55,
              "filename": "index.js" } ],
        "docs":
          { "summary": "An object used by the `fetch()` function representing an HTTPS request.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "method",
              "type": "string",
              "doc": "The [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods) to use. Defaults to `\"GET\"`.",
              "optional": true },
            { "name": "headers",
              "type": "Object",
              "doc": "The request headers.",
              "optional": true },
            { "name": "body",
              "type": "string",
              "doc": "The request body.",
              "optional": true },
            { "name": "mode",
              "type": "string",
              "doc": "The [request mode](https://developer.mozilla.org/en-US/docs/Web/API/Request/mode).\n\nOne of:\n\n+ `\"cors\"`\n+ `\"no-cors\"`\n+ `\"same-origin\"`",
              "optional": true },
            { "name": "credentials",
              "type": "string",
              "doc": "The [request credentials](https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials).\n\nOne of:\n\n+ `\"omit\"`\n+ `\"include\"`\n+ `\"same-origin\"`",
              "optional": true },
            { "name": "cache",
              "type": "string",
              "doc": "The [request cache mode](https://developer.mozilla.org/en-US/docs/Web/API/Request/cache).\n\nOne of:\n\n+ `\"default\"`\n+ `\"force-cache\"`\n+ `\"no-cache\"`\n+ `\"no-store\"`\n+ `\"only-if-cached\"`\n+ `\"reload\"`",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  },
  "menuSections": "APIs",
  "relatedContent":
    [ { "icon": "article",
        "text": "Accessing 3rd-Party Services with the Fetch API",
        "url": "https://support.wix.com/en/article/velo-accessing-third-party-services-with-the-fetch-api" },
      { "icon": "article",
        "text": "Calling Server-Side Code from the Front-End with Web Modules ",
        "url": "https://support.wix.com/en/article/velo-web-modules-calling-server-side-code-from-the-front-end" },
      { "icon": "example",
        "text": "Stripe Payment Processing",
        "url": "https://www.wix.com/velo/forum/wix-tips-and-updates/example-stripe-payment-processing" },
      { "icon": "example",
        "text": "Expose and Access Site APIs",
        "url": "https://www.wix.com/velo/forum/wix-tips-and-updates/example-myapi-and-myapiclient" },
      { "icon": "example",
        "text": "Create a Weather Widget",
        "url": "https://www.wix.com/velo/example/Create-a-Weather-Widget" },
      { "icon": "article",
        "text": "Sending an Email on Form Submission",
        "url": "https://support.wix.com/en/article/velo-tutorial-sending-an-email-on-form-submission" },
      { "icon": "article",
        "text": "JavaScript Support",
        "url": "https://support.wix.com/en/article/velo-javascript-support" },
      { "icon": "example",
        "text": "Secrets Manager",
        "url": "https://www.wix.com/velo/example/secrets-manager" } ] }