{ "name": "wix-fetch",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 7,
      "filename": "index.js" },
  "docs":
    { "summary": "An implementation of the standard [Javascript Fetch API](https://developer.mozilla.org/en/docs/Web/API/Fetch_API)\n which can be used in public and backend code for fetching resources\n from [3rd party services](https://support.wix.com/en/article/accessing-3rd-party-services)\n using HTTPS.",
      "description":
        [ "To make a request, call the [fetch()](#fetch) function with the path to a",
          " resource and the optional `WixFetchRequest` options. The",
          " function returns a promise that resolves to a [`WixFetchResponse`](wix-fetch.WixFetchResponse.html).",
          " The response object contains a number of properties and functions for",
          " retrieving the response's information.",
          "",
          " The Fetch API can be used in your front-end or backend code.",
          "",
          " To use the Fetch API in the backend, import the `fetch` function from the",
          " `wix-fetch` module:",
          "",
          "   ```javascript",
          "   import {fetch} from 'wix-fetch';",
          "   ```",
          "",
          " <div id=\"implementations\"></div>",
          "",
          " The implementation of the Fetch API differs slightly depending on where it's",
          " being used. The features documented here comprise the base functionality for",
          " both implementations. However, each implementation contains additional features:",
          "",
          " + In public files, the native browser's",
          "   <a href=\"https://developer.mozilla.org/en/docs/Web/API/Fetch_API\" target=\"_blank\">Fetch API</a> is used.",
          " + In backend files the <a href=\"https://github.com/bitinn/node-fetch\" target=\"_blank\">node-fetch</a> module is used." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "fetch",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "url",
              "type": "string",
              "doc": "The url of the resource to fetch." },
            { "name": "options",
              "type": "wix-fetch.WixFetchRequest",
              "doc": "Options for the fetch operation.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-fetch.WixFetchResponse" ] },
            "doc": "Fulfilled - The HTTP response of the fetch operation.\nRejected - The error that caused the rejection." },
        "locations":
          [ { "lineno": 201,
              "filename": "index.js" } ],
        "docs":
          { "summary": "Retrieves the specified resource from the network using HTTPS.",
            "description":
              [ "The `fetch()` function fetches an HTTPS resource from the network. It returns",
                " a Promise that resolves to a [`WixFetchResponse`](wix-fetch.WixFetchResponse.html)",
                " object representing the HTTP response to the request.",
                "",
                " Responses with an HTTP status code in the ranges 2xx, 4xx, and 5xx are",
                " considered fulfilled. Use the [`httpResponse.ok`](wix-fetch.WixFetchResponse.html#ok)",
                " property to confirm that the HTTP request was successful with a response",
                " code in the 2xx range.",
                "",
                " The optional `WixFetchRequest` object contains information about an HTTPS request.",
                " Additional functionality is available in each of the respective [Fetch API implementations](#implementations)." ],
            "links": [],
            "examples":
              [ { "title": "Get a resource",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch(\"https://someapi.com/api/someendpoint\", {\"method\": \"get\"})",
                      "  .then( (httpResponse) => {",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    } else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then(json => console.log(json.someKey))",
                      "  .catch(err => console.log(err));" ],
                  "extra":
                    {  } },
                { "title": "Post data to a resource",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch( \"https://someapi.com/api/someendpoint\", {",
                      "  \"method\": \"post\",",
                      "  \"headers\": {",
                      "    \"Content-Type\": \"application/x-www-form-urlencoded\"",
                      "  },",
                      "  \"body\": \"somekey=somevalue\"",
                      "} )",
                      "  .then( (httpResponse) => {",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    } else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then( (json) => console.log(json.someKey) )",
                      "  .catch(err => console.log(err));" ],
                  "extra":
                    {  } },
                { "title": "Get a resource and the response information",
                  "body":
                    [ "import {fetch} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "fetch(\"https://someapi.com/api/someendpoint\", {\"method\": \"get\"})",
                      "  .then( (httpResponse) => {",
                      "    let url = httpResponse.url;",
                      "    let statusCode = httpResponse.status;",
                      "    let statusText = httpResponse.statusText;",
                      "    let headers = httpResponse.headers;",
                      "    let bodyUsed = httpResponse.bodyUsed;",
                      "    if (httpResponse.ok) {",
                      "      return httpResponse.json();",
                      "    }",
                      "    else {",
                      "      return Promise.reject(\"Fetch did not succeed\");",
                      "    }",
                      "  } )",
                      "  .then( (json) => {",
                      "    console.log(json.someKey);",
                      "  } )",
                      "  .catch( (err) => {",
                      "    console.log(err);",
                      "  } );" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "Some common errors when using the `fetch()` function are described here along\n with possible solutions. You can usually tell if you are experiencing these\n issues by checking your browser's console using the [browser's developer tools](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools).\n\n Certain [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)\n (Cross-Origin Resource Sharing) requests are restricted when originating\n from a browser. Usually, GET requests and certain POST requests can be made\n from your site's **Public**, **Page**, or **Site** code. All other requests need to be made\n from your site's **Backend** code. If you are experiencing an issue with a `fetch()`\n call due to a CORS restriction, move the `fetch()` call to the backend as\n described in [Accessing 3rd Party Services](https://support.wix.com/en/article/accessing-3rd-party-services#backend-service-call).\n\n You cannot request HTTP content if your site is an HTTPS site. To fix this issue\n you can either use the HTTPS protocol to fetch the requested resources or you\n can [turn off SSL on your site](https://support.wix.com/en/article/turning-ssl-on-or-off-for-your-site)." ] } },
      { "name": "getJSON",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "url",
              "type": "string",
              "doc": "The url of the JSON resource to retrieve." },
            { "name": "options",
              "type": "wix-fetch.WixFetchRequest",
              "doc": "Options for the retrieval operation.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "Object" ] },
            "doc": "Fulfilled - The JSON response of the fetch operation.\nRejected - The error that caused the rejection." },
        "locations":
          [ { "lineno": 246,
              "filename": "index.js" } ],
        "docs":
          { "summary": "Retrieves the specified JSON resource from the network using HTTPS.",
            "description":
              [ "The `getJSON()` function retrieves a JSON resource from the network. It returns",
                " a Promise that resolves to a JSON object representing the response to the request.",
                "",
                " To use `getJSON`, import it from `wix-fetch`:",
                "",
                " ```javascript",
                " import {getJSON} from 'wix-fetch';",
                " ```",
                "",
                " Retrieving the JSON object is performed using the GET method, regardless of",
                " what is specified in the `options` parameter.",
                "",
                " The `Accept` header is assumed to be `application/json` by default, but you",
                " can override it by explicitly setting a different value for `Accept`.",
                "",
                " The optional `WixFetchRequest` object contains information about an HTTPS request.",
                " Additional functionality is available in each of the respective [Fetch API implementations](#implementations)." ],
            "links": [],
            "examples":
              [ { "title": "Get a JSON resource",
                  "body":
                    [ "import {getJSON} from 'wix-fetch';",
                      "",
                      "// ...",
                      "",
                      "getJSON(\"https://someapi.com/api/someendpoint\")",
                      "  .then(json => console.log(json.someKey))",
                      "  .catch(err => console.log(err));" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          { "notes":
              [ "Some common errors when using the `getJSON()` function are described here along\n with possible solutions. You can usually tell if you are experiencing these\n issues by checking your browser's console using the [browser's developer tools](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_are_browser_developer_tools).\n\n Certain [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)\n (Cross-Origin Resource Sharing) requests are restricted when originating\n from a browser. Usually, GET requests and certain POST requests can be made\n from your site's **Public**, **Page**, or **Site** code. All other requests need to be made\n from your site's **Backend** code. If you are experiencing an issue with a `fetch()`\n call due to a CORS restriction, move the `fetch()` call to the backend as\n described in [Accessing 3rd Party Services](https://support.wix.com/en/article/accessing-3rd-party-services#backend-service-call).\n\n You cannot request HTTP content if your site is an HTTPS site. To fix this issue\n you can either use the HTTPS protocol to fetch the requested resources or you\n can [turn off SSL on your site](https://support.wix.com/en/article/turning-ssl-on-or-off-for-your-site)." ] } } ],
  "callbacks": [],
  "messages":
    [ { "name": "WixFetchRequest",
        "locations":
          [ { "lineno": 41,
              "filename": "index.js" } ],
        "docs":
          { "summary": "An object used by the `fetch()` function representing an HTTPS request.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "method",
              "type": "string",
              "doc": "The [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods) to use. Defaults to `\"GET\"`.",
              "optional": true },
            { "name": "headers",
              "type": "Object",
              "doc": "The request headers.",
              "optional": true },
            { "name": "body",
              "type": "string",
              "doc": "The request body.",
              "optional": true },
            { "name": "mode",
              "type": "string",
              "doc": "The [request mode](https://developer.mozilla.org/en-US/docs/Web/API/Request/mode). \n\nOne of: \n\n+ `\"cors\"`\n+ `\"no-cors\"`\n+ `\"same-origin\"`",
              "optional": true },
            { "name": "credentials",
              "type": "string",
              "doc": "The [request credentials](https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials).\n\nOne of: \n\n+ `\"omit\"`\n+ `\"include\"`\n+ `\"same-origin\"`",
              "optional": true },
            { "name": "cache",
              "type": "string",
              "doc": "The [request cache mode](https://developer.mozilla.org/en-US/docs/Web/API/Request/cache).\n\nOne of: \n\n+ `\"default\"`\n+ `\"force-cache\"`\n+ `\"no-cache\"`\n+ `\"no-store\"`\n+ `\"only-if-cached\"`\n+ `\"reload\"`",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  },
  "menuSections": "APIs",
  "relatedContent":
    [ { "icon": "article",
        "text": "Accessing 3rd-Party Services with the Fetch API",
        "url": "https://support.wix.com/en/article/wix-code-accessing-3rd-party-services-with-the-fetch-api" },
      { "icon": "article",
        "text": "Calling Server-Side Code from the Front-End with Web Modules ",
        "url": "https://support.wix.com/en/article/wix-code-calling-server-side-code-from-the-front-end-with-web-modules" },
      { "icon": "example",
        "text": "Stripe Payment Processing",
        "url": "https://www.wix.com/code/home/forum/wix-tips-and-updates/example-stripe-payment-processing" },
      { "icon": "example",
        "text": "Expose and Acess Site APIs",
        "url": "https://www.wix.com/code/home/forum/wix-tips-and-updates/example-myapi-and-myapiclient" },
      { "icon": "example",
        "text": "Create a Weather Widget",
        "url": "https://www.wix.com/code/home/example/Create-a-Weather-Widget" },
      { "icon": "article",
        "text": "Sending an Email on Form Submission",
        "url": "https://support.wix.com/en/article/wix-code-tutorial-sending-an-email-on-form-submission" },
      { "icon": "article",
        "text": "JavaScript Support",
        "url": "https://support.wix.com/en/article/wix-code-javascript-support" } ] }