{ "name": "wix-payment-provider-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "index.js" },
  "docs":
    { "summary": "The wix-payment-provider-backend module contains functionality for reporting transaction and refund events processed by third-party payment providers.",
      "description":
        [ "<div style=\"background-color: #FEF1D1; padding: 18px 24px; border-radius: 6px; border: 1px solid #FDB10C; box-sizing: border-box; display: inline-block\">",
          "  <b>Developer Preview</b>",
          "  <br/>",
          "  <span>APIs in <a href=\"https://www.wix.com/velo/reference/api-overview/developer-preview\">Developer Preview</a> are subject to change and are not intended for use in production.<br/><a href=\"mailto:velo-preview-feedback@wix.com\">Send us</a> your suggestions for improving this API. Your feedback is valuable to us.</span>",
          "</div>",
          "",
          "The Payment Provider Backend API allows you to report transaction and refund events when implementing the Payment Provider Custom Extension. ",
          "Use it together with the [Payment Provider SPI](https://www.wix.com/velo/reference/spis/wix-payments/payment-provider/introduction).",
          "",
          "Learn more about implementing a [Payment Provider Custom Extension](https://support.wix.com/en/article/velo-tutorial-payment-provider-custom-extension-beta)." ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "submitEvent",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "submitEventRequest",
              "type": "wix-payment-provider-backend.SubmitEventRequest",
              "doc": "Submit event request object." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "void" ] },
            "doc": "" },
        "locations":
          [ { "lineno": 37,
              "filename": "submitEvent.js" } ],
        "docs":
          { "summary": "Updates the status of a transaction or refund.",
            "description":
              [ "The `submitEvent()` function returns a Promise that resolves to `void` when the status of a transaction or refund is updated.",
                "",
                "Use this function with the [Payment Provider SPI](https://www.wix.com/velo/reference/spis/wix-payments/payment-provider/introduction) and [HTTP functions](/wix-http-functions) ",
                "to allow payment providers to send your site updates about refunds and transactions.",
                "",
                "The status of a transaction or refund is updated based on the properties included in the argument passed to this",
                "function. See the code examples for details.",
                "",
                "Learn more about implementing a [Payment Provider Custom Extension](https://support.wix.com/en/article/velo-tutorial-payment-provider-custom-extension-beta)." ],
            "links": [],
            "examples":
              [ { "title": "Update the status of a transaction or refund",
                  "body":
                    [ "import wixPaymentProviderBackend from 'wix-payment-provider-backend';",
                      "/*",
                      " * Sample submitEventRequest value for a transaction:",
                      " * {",
                      " *   event : {",
                      " *     transaction: {",
                      " *       wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      " *       pluginTransactionId: '22001-123123'",
                      " *     }  ",
                      " *   }",
                      " * }",
                      " */",
                      "",
                      "export async function updateTransaction(submitEventRequest) {",
                      "  try {",
                      "    await wixPaymentProviderBackend.submitEvent(submitEventRequest);",
                      "    console.log('Transaction updated successfully.');",
                      "    return ;",
                      "  } catch (error) {",
                      "    console.error(error);",
                      "    // Handle the error",
                      "  }",
                      "",
                      "}",
                      "",
                      "/* Promise resolves to void */" ],
                  "extra":
                    {  } },
                { "title": "Transaction approved",
                  "body":
                    [ "// submitEventRequest value for a successful transaction:",
                      "{",
                      "  event: {",
                      "    transaction : {",
                      "      wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "      pluginTransactionId: 'e89b-12d3-a456-42665'",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Transaction declined",
                  "body":
                    [ "// submitEventRequest value for a declined transaction:",
                      "",
                      "{",
                      "  event: {",
                      "    transaction: {",
                      "      wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "      pluginTransactionId: 'e89b-12d3-a456-42665',",
                      "      reasonCode: 3012,",
                      "      errorCode: 'INSUFFICIENT_FUNDS',",
                      "      errorMessage: 'Insufficient funds'",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Transaction pending",
                  "body":
                    [ "// submitEventRequest value for a pending payment",
                      "",
                      "{",
                      "  event: {",
                      "    transaction: {",
                      "      wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "      pluginTransactionId: 'e89b-12d3-a456-42665',",
                      "      reasonCode: 5005",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Transaction canceled",
                  "body":
                    [ "// submitEventRequest value for a canceled transaction:",
                      "",
                      "{",
                      "   event: {",
                      "     transaction: {",
                      "       wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "       pluginTransactionId: 'e89b-12d3-a456-42665',",
                      "       reasonCode: 3030,",
                      "       errorCode: 'BUYER_CANCELED',",
                      "       errorMessage: 'Buyer canceled the transaction.'",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Refund succeeded, initiated from a site's dashboard",
                  "body":
                    [ "// submitEventRequest value for a successful refund that was initiated from a site's dashboard:",
                      "",
                      "{",
                      "  'event': {",
                      "    'refund': {",
                      "      'wixTransactionId': '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "      'pluginRefundId': '123123-123123123',",
                      "      'amount': '1000',",
                      "      'wixRefundId': 'baeb40f5-a48a-4424-cec2-253c9772ad42'",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Refund failed, initiated from a site's dashboard",
                  "body":
                    [ "// submitEventRequest value for a failed refund that was initiated from a site's dashboard:",
                      "",
                      "{",
                      "  event: {",
                      "    refund: {",
                      "      wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "      pluginRefundId: '1231231-55432',",
                      "      amount: '1000',",
                      "      wixRefundId: 'baeb40f5-a48a-4424-cec2-253c9772ad42',",
                      "      reasonCode: 3025,",
                      "      errorCode: 'INSUFFICIENT_FUNDS_FOR_REFUND',",
                      "      errorMessage: 'Insufficient funds for refund.'",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } },
                { "title": "Refund succeeded, initiated by a payment provider",
                  "body":
                    [ "// submitEventRequest value for a successful refund that was initiated by a payment provider:",
                      "",
                      "{",
                      "  event: {",
                      "    refund: {",
                      "      wixTransactionId: '3e01dda6-134e-4cc9-a37f-ed2bf756c684',",
                      "      pluginRefundId: '123123-123123',",
                      "      amount: '1000'",
                      "    }",
                      "  }",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  },
        "isVeloEvent": false,
        "customLabels":
          [ { "id": "maturity-beta" } ] } ],
  "callbacks": [],
  "messages":
    [ { "name": "Event",
        "locations":
          [ { "lineno": 1,
              "filename": "submitEvent.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "transaction",
              "type": "wix-payment-provider-backend.TransactionDetails",
              "doc": "Updated details of a transaction.",
              "optional": true },
            { "name": "refund",
              "type": "wix-payment-provider-backend.RefundDetails",
              "doc": "Updated details of a refund.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "RefundDetails",
        "locations":
          [ { "lineno": 8,
              "filename": "submitEvent.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "wixTransactionId",
              "type": "string",
              "doc": "Wix transaction ID.",
              "optional": true },
            { "name": "pluginRefundId",
              "type": "string",
              "doc": "Payment provider refund ID.",
              "optional": true },
            { "name": "reasonCode",
              "type": "number",
              "doc": "Wix [reason code](/payment-provider-spi/reason-codes).",
              "optional": true },
            { "name": "amount",
              "type": "string",
              "doc": "Refunded amount.",
              "optional": true },
            { "name": "wixRefundId",
              "type": "string",
              "doc": "Wix refund ID for refunds created through a site's dashboard.",
              "optional": true },
            { "name": "errorCode",
              "type": "string",
              "doc": "Payment provider error code.",
              "optional": true },
            { "name": "errorMessage",
              "type": "string",
              "doc": "Detailed payment provider error description.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "SubmitEventRequest",
        "locations":
          [ { "lineno": 20,
              "filename": "submitEvent.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "event",
              "type": "wix-payment-provider-backend.Event",
              "doc": "The updated information about the transaction or refund." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "TransactionDetails",
        "locations":
          [ { "lineno": 26,
              "filename": "submitEvent.js" } ],
        "docs":
          { "summary": "Transaction event type.",
            "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "wixTransactionId",
              "type": "string",
              "doc": "Wix transaction ID.",
              "optional": true },
            { "name": "pluginTransactionId",
              "type": "string",
              "doc": "Payment Provider transaction ID.",
              "optional": true },
            { "name": "reasonCode",
              "type": "number",
              "doc": "Wix [reason code](/payment-provider-spi/reason-codes).",
              "optional": true },
            { "name": "errorCode",
              "type": "string",
              "doc": "Payment provider error code.",
              "optional": true },
            { "name": "errorMessage",
              "type": "string",
              "doc": "Detailed payment provider error description.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }