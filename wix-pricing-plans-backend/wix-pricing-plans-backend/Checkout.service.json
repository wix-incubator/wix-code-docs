{ "name": "Checkout",
  "memberOf": "wix-pricing-plans-backend",
  "mixes": [],
  "labels":
    [ "changed" ],
  "location":
    { "lineno": 1,
      "filename": "checkout.js" },
  "docs":
    { "summary": "The Pricing Plans Checkout API contains functionality for ordering and checking out\n your site's pricing plan [orders](https://support.wix.com/en/article/pricing-plans-an-overview).",
      "description":
        [ "Use the Pricing Plans Checkout API to create online and offline orders for your pricing plans. The Pricing Plans",
          " Checkout API provides functionality for creating orders created in the Wix Pricing Plans app ",
          " or using this Wix Pricing Plans API.",
          "",
          " > **Note:**",
          " > As part of our Velo rebranding efforts, we have improved plan ordering and purchasing functionality",
          "   in our Pricing Plans APIs. The Pricing Plans APIs replace the deprecated Paid Plans APIs.",
          " > The deprecated APIs will continue to work, but they will not receive updates.",
          " > To keep any existing code compatible with future changes, see the",
          " > [migration instructions](wix-paid-plans/introduction#migration-instructions).",
          "",
          " ### Setting Up Pricing Plans",
          "",
          " To use APIs for checking out orders, first set up your site to:",
          "",
          " + Accept payments as described in [About Accepting Payments](https://support.wix.com/en/article/about-accepting-payments).",
          "",
          " + Offer membership plans as described in [About Pricing Plans](https://support.wix.com/en/article/about-pricing-plans). When setting up your site to accept pricing plans, ",
          "   define the plans you want to offer [using the Dashboard](https://support.wix.com/en/article/creating-a-plan-in-pricing-plans) or",
          "   [using the Pricing Plan APIs](wix-pricing-plans/introduction).",
          "",
          "",
          " ### Checking Out Pricing Plans",
          "",
          " Members can order pricing plans in 2 ways:",
          " + **Online**. Members order and pay for their plans",
          "   on your site without manual intervention. ",
          " + **Offline**. Members place their order by phone, fax, text, or email. You ",
          "   manually record each stage of the transaction.",
          "",
          " Use the Checkout APIs to start creating the ",
          " orders and facilitating payment. Orders are considered drafts until they are paid for. ",
          "",
          "",
          " With the Checkout API, you can: ",
          " + Start creating both offline and online orders, and facilitate their payment.",
          " + Preview orders and their pricing. ",
          " + Change the start date for the order (until the order is paid for). ",
          " ",
          " Updating the properties of a pricing plan does not affect any current purchases of the plan by members. The purchases retain",
          " their existing terms and pricing.",
          "",
          " > **Note:**",
          " > Deprecated [Paid Plans](wix-paid-plans/introduction/) APIs are still available for the following, ",
          " > but we encourage you to migrate to the [Pricing Plans](wix-pricing-plans/introduction/) APIs instead:",
          " > + Let site visitors [purchase](wix-paid-plans/purchasePlan) a plan directly, as if they were using the Pricing Plans app in the Wix Editor.",
          " > + Let site visitors [purchase](wix-paid-plans/orderPlan) a plan using your own customized process.",
          " > + Let site visitors [cancel](wix-paid-plans/cancelPlan) plan subscriptions (orders) that they have purchased. ",
          "",
          "",
          " ### Plans and Subscriptions",
          " ",
          " Actions related to basic pricing plan management are available from the [Pricing Plans](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fmembership%3FreferralInfo%3Dvelo-docs)",
          " page in the Dashboard. These actions correspond to the functions available in the [Pricing Plans APIs]().",
          "",
          " Every pricing plan order corresponds to a Wix subscription, including orders for single payment plans. You can see all orders from your site's",
          " [Subscriptions](https://www.wix.com/my-account/site-selector/?buttonText=Select%20Site&title=Select%20a%20Site&autoSelectOnSingleSite=true&actionUrl=https:%2F%2Fwww.wix.com%2Fdashboard%2F%7B%7BmetaSiteId%7D%7D%2Fsubscriptions%3FreferralInfo%3Dvelo-docs)",
          " page in the Dashboard. Actions available on this page correspond to the functions available in the [Orders APIs](wix-pricing-plans-backend/orders/) and the Checkout APIs.",
          "",
          " > **Note**: Wix pricing plans are one type of Wix subscriptions available from the Subscriptions page. The Subscriptions page also includes Wix Stores subscriptions, Wix invoice subscriptions, *all* pricing plan models (not just the subscription model), and more.  ",
          "",
          " ### Roles and Permissions",
          "",
          " You need \"Manage Pricing Plans\" and \"Manage Subscriptions\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) to perform ",
          " plan checkout functions, such as [`createOnlineOrder()`](wix-pricing-plans-backend/checkout/createonlineorder), [`previewPrice()`](wix-pricing-plans-backend/checkout/previewprice), [`changeStartDate()`](wix-pricing-plans-backend/checkout/changestartdate), and so on. ",
          "",
          "",
          " ### Importing the APIs",
          "",
          " To use the Checkout API, import `checkout` from the `wix-pricing-plans-backend` module.",
          "",
          "   ```javascript",
          "   import {checkout} from 'wix-pricing-plans-backend';",
          "   ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "changeStartDate",
        "labels":
          [ "changed" ],
        "nameParams": [],
        "params":
          [ { "name": "orderId",
              "type": "string",
              "doc": "Draft order ID." },
            { "name": "startDate",
              "type": "Date",
              "doc": "New date at which the order is valid. The `startDate` is in timestamp format, \n which is the UTC date-time in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601#Coordinated_Universal_Time_(UTC)) format. \n If a timezone offset is specified, the time is converted to UTC. For example, if you \n specify `new Date('2021-01-06T16:00:00.000-07:00')`, the stored value will be `\"2021-01-06T23:00:00.000Z\"`." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Orders.Order" ] },
            "doc": "Fulfilled - The order of the plan." },
        "locations":
          [ { "lineno": 136,
              "filename": "checkout.js" } ],
        "docs":
          { "summary": "Change the start date of a draft order.",
            "description":
              [ "The `changeStartDate()` function returns a promise that resolves to a draft of the `Order` ",
                " object with an updated `startDate` when the ",
                " order has been created. . ",
                "",
                " This function cannot be called on paid orders. When an order is paid for, it is no longer",
                " considered a draft and its start date cannot be changed.",
                "",
                " The [`onChangeStartDate()`](wix-pricing-plans-backend/events/onStartDateChanged) and [`onOrderUpdated()`](wix-pricing-plans-backend/events/onOrderUpdated) event handlers run when the start date of an order is changed.",
                "",
                " > **Note**: Only those with \"Manage Pricing Plans\" and \"Manage Subscriptions\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) can change the start date of draft orders." ],
            "links":
              [ "[onChangeStartDate( )](wix-pricing-plans-backend/events/onStartDateChanged)",
                "[onOrderUpdated( )](wix-pricing-plans-backend/events/onOrderUpdated)" ],
            "examples":
              [ { "title": "basic usage",
                  "body":
                    [ "import { checkout } from \"wix-pricing-plans-backend.Orders\";",
                      "",
                      "export function changeStartDate() {",
                      "  const orderId = \"a string\";",
                      "  const startDate = new Date();",
                      "",
                      "  return checkout",
                      "    .changeStartDate(orderId, startDate)",
                      "    .then((response) => {",
                      "      console.log(response);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "createOfflineOrder",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "ID of the plan being ordered." },
            { "name": "buyerId",
              "type": "string",
              "doc": "Buyer ID." },
            { "name": "buyerType",
              "type": "string",
              "doc": "Buyer identity type. Currently only `\"MEMBER\"` is supported.\nOne of:\n + `\"MEMBER\"`. The buyer that is currently logged in." },
            { "name": "options",
              "type": "wix-pricing-plans-backend.Checkout.CreateOfflineOrderInfo",
              "doc": "Additional options for creating the offline order.",
              "optional": true } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Orders.Order" ] },
            "doc": "Fulfilled - The order of the plan." },
        "locations":
          [ { "lineno": 215,
              "filename": "checkout.js" } ],
        "docs":
          { "summary": "Orders a plan for a buyer who bought the plan with an offline transaction.",
            "description":
              [ "The `createOfflineOrder()` function returns a Promise that resolves to an `Order` object that",
                " represents an offline order transaction when the ",
                " order has been created. ",
                " ",
                " Payment is handled offline with the [`markAsPaid()`](wix-pricing-plans-backend/checkout/markAsPaid) function.",
                "",
                " Creating an offline order causes the following changes: ",
                " + The order status changes to `\"PENDING\"`.",
                "",
                " The [`onOfflineOrderCreated( )`] XXX event handler runs when an offline order is created.",
                "",
                " > **Note**: Only those with \"Manage Pricing Plans\" permissions can create offline orders." ],
            "links":
              [ "[createOnlineOrder( )](#createOnlineOrder)",
                "[previewOfflineOrder( )](#previewOfflineOrder)" ],
            "examples":
              [ { "title": "basic usage",
                  "body":
                    [ "import { checkout } from \"wix-pricing-plans-backend.Orders\";",
                      "",
                      "export function createOfflineOrder() {",
                      "  const planId = \"a string\";",
                      "  const buyerId = \"a string\";",
                      "  const buyerType = \"UNDEFINED\";",
                      "  const options = {",
                      "    startDate: new Date(),",
                      "    paid: true",
                      "  };",
                      "",
                      "  return checkout",
                      "    .createOfflineOrder(planId, buyerId, buyerType, options)",
                      "    .then((response) => {",
                      "      console.log(response);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "createOnlineOrder",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "ID of the plan being ordered." },
            { "name": "startDate",
              "type": "Date",
              "doc": "Date from which the plan is valid. Defaults to the current date." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Orders.Order" ] },
            "doc": "Fulfilled - The order of the plan." },
        "locations":
          [ { "lineno": 290,
              "filename": "checkout.js" } ],
        "docs":
          { "summary": "Orders a plan for the currently logged-in member.",
            "description":
              [ "The `createOnlineOrder()` function returns a Promise that resolves to an `Order` object when the ",
                " order has been created. The order is for the currently logged-in member. ",
                "",
                " Creating an order is the first step in the process of enabling logged-in members to buy your pricing",
                " plans. After creating the order for a plan, call the Wix Pay [`startPayment()`](wix-pay/startPayment) ",
                " function with the `wixPayOrderId` value to enable your buyer to pay for the order. ",
                "",
                " If the order is free, you do not call the Wix Pay [`startPayment()`](wix-pay/startPayment) ",
                " function after `createOnlineOrder()`. The order is created and considered paid for.",
                "",
                " Once the order is paid for, the `status` of the order is no longer `\"DRAFT\"` and its `startDate` can no longer be changed.",
                "",
                " Creating an online order causes the following changes: ",
                " + The order status changes to `\"PENDING\"`.",
                "",
                " The [`onOnlineOrderCreated( )`] XXX event handler runs when an order is canceled.",
                "",
                " > **Note**: Only those with \"Manage Pricing Plans\" and \"Manage Subscriptions\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) can create online orders." ],
            "links":
              [ "[createOfflineOrder( )](#createOfflineOrder)",
                "[previewOnlineOrder( )](#previewOnlineOrder)" ],
            "examples":
              [ { "title": "basic usage",
                  "body":
                    [ "import { checkout } from \"wix-pricing-plans-backend.Orders\";",
                      "",
                      "export function createOnlineOrder() {",
                      "  const planId = \"a string\";",
                      "  const startDate = new Date();",
                      "",
                      "  return checkout",
                      "    .createOnlineOrder(planId, startDate)",
                      "    .then((response) => {",
                      "      console.log(response);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "previewOfflineOrder",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "ID of the plan being previewed." },
            { "name": "buyerId",
              "type": "string",
              "doc": "ID of the buyer who might order the plan offline." },
            { "name": "buyerType",
              "type": "string",
              "doc": "Buyer identity type. Currently only `\"MEMBER\"` is supported.\nOne of:\n + `\"MEMBER\"`. The buyer is a member on the site, not just a visitor." },
            { "name": "startDate",
              "type": "Date",
              "doc": "Date from which the plan would be valid if ordered. Defaults to the current date." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Checkout.OrderPreview" ] },
            "doc": "Fulfilled - A preview of the order." },
        "locations":
          [ { "lineno": 330,
              "filename": "checkout.js" } ],
        "docs":
          { "summary": "Provides a preview of the offline order as if it was purchased.",
            "description":
              [ "The `previewOfflineOrder()` function returns a Promise that resolves to a temporary preview of the offline order. ",
                "",
                " The preview uses the same logic as purchasing a plan, except that the preview is not saved. ",
                " ",
                " You can preview the order to check purchase limitations, but the limitations are not enforced for the preview. If [taxes are configured for the site](https://support.wix.com/en/article/pricing-plans-setting-up-tax-collection), taxes are applied to the preview.",
                "",
                " This function is available only to the site owner, who specifies the ID and identity type of the buyer whose order should be previewed when calling the function.",
                "",
                " The [`onOfflineOrderPreviewed( )`] XXX event handler runs when an offline order is previewed.",
                "",
                " > **Note**: Only those with \"Manage Pricing Plans\" and \"Manage Subscriptions\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) can preview offline orders." ],
            "links":
              [ "[previewOnlineOrder( )](#previewOnlineOrder)",
                "[previewPricing( )](#previewPricing)" ],
            "examples":
              [ { "title": "basic usage",
                  "body":
                    [ "import { checkout } from \"wix-pricing-plans-backend.Orders\";",
                      "",
                      "export function previewOfflineOrder() {",
                      "  const planId = \"a string\";",
                      "  const buyerId = \"a string\";",
                      "  const buyerType = \"UNDEFINED\";",
                      "  const startDate = new Date();",
                      "",
                      "  return checkout",
                      "    .previewOfflineOrder(planId, buyerId, buyerType, startDate)",
                      "    .then((response) => {",
                      "      console.log(response);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "previewOnlineOrder",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "ID of the plan to be previewed." },
            { "name": "startDate",
              "type": "Date",
              "doc": "Date from which the plan would be valid if ordered. Defaults to current date." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Checkout.OrderPreview" ] },
            "doc": "Fulfilled - A preview of the order." },
        "locations":
          [ { "lineno": 368,
              "filename": "checkout.js" } ],
        "docs":
          { "summary": "Provides a preview of the offline order as if it was purchased.",
            "description":
              [ "The `previewOnlineOrder()` function returns a Promise that resolves to a temporary preview of the online order. ",
                "",
                " The preview uses the same logic as purchasing a plan, except that the preview is not saved. ",
                " ",
                " You can preview the order to check purchase limitations, but the limitations are not enforced for the preview. If [taxes are configured for the site](https://support.wix.com/en/article/pricing-plans-setting-up-tax-collection), taxes are applied to the preview.",
                "",
                " This function is available to the site owner and the logged-in buyer.",
                "",
                " The [`onOnlineOrderPreviewed( )`] XXX event handler runs when an online order is previewed.",
                "",
                " > **Note**: Only those with \"Manage Pricing Plans\" and \"Manage Subscriptions\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) can preview online orders." ],
            "links":
              [ "[previewOfflineOrder( )](#previewOfflineOrder)",
                "[previewPrice( )](#previewPrice)" ],
            "examples":
              [ { "title": "basic usage",
                  "body":
                    [ "import { checkout } from \"wix-pricing-plans-backend.Orders\";",
                      "",
                      "export function getOnlineOrderPreview() {",
                      "  const planId = \"a string\";",
                      "  const startDate = new Date();",
                      "",
                      "  return checkout",
                      "    .getOnlineOrderPreview(planId, startDate)",
                      "    .then((response) => {",
                      "      console.log(response);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "previewPrice",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "planId",
              "type": "string",
              "doc": "ID of the plan whose pricing should be previewed." } ],
        "ret":
          { "type":
              { "name": "Promise",
                "typeParams":
                  [ "wix-pricing-plans-backend.Checkout.PricePreview" ] },
            "doc": "Fulfilled - A preview of the pricing for the order." },
        "locations":
          [ { "lineno": 402,
              "filename": "checkout.js" } ],
        "docs":
          { "summary": "Provides a preview of the order's pricing as if was purchased.",
            "description":
              [ "The `previewPrice()` function returns a Promise that resolves to a temporary preview of the order's price. ",
                "",
                " The price preview uses the same logic for calculating prices as used when purchasing a plan, except that the preview is not saved. ",
                " ",
                " If [taxes are configured for the site](https://support.wix.com/en/article/pricing-plans-setting-up-tax-collection), taxes are applied to the preview.",
                "",
                " Buyers do not have to be logged in to preview the price.",
                "",
                " The [`onPricePreviewed( )`] XXX event handler runs when the price of an order is previewed.",
                "",
                " Only those with \"Manage Pricing Plans\" and \"Manage Subscriptions\" [permissions](https://support.wix.com/en/article/roles-permissions-accessing-roles-permissions) can preview the price of orders." ],
            "links":
              [ "[previewOfflineOrder( )](#previewOfflineOrder)",
                "[previewOnlineOrder( )](#previewOnlineOrder)" ],
            "examples":
              [ { "title": "basic usage",
                  "body":
                    [ "import { checkout } from \"wix-pricing-plans-backend.Orders\";",
                      "",
                      "export function getPricePreview() {",
                      "  const planId = \"a string\";",
                      "",
                      "  return checkout",
                      "    .getPricePreview(planId)",
                      "    .then((response) => {",
                      "      console.log(response);",
                      "    })",
                      "    .catch((error) => {",
                      "      console.error(error);",
                      "    });",
                      "}" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "CreateOfflineOrderInfo",
        "locations":
          [ { "lineno": 164,
              "filename": "checkout.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "startDate",
              "type": "Date",
              "doc": "Date from which the plan is valid. Defaults to the current date.",
              "optional": true },
            { "name": "paid",
              "type": "boolean",
              "doc": "Whether the order is paid. Defaults to `false`.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "OrderPreview",
        "locations":
          [ { "lineno": 322,
              "filename": "checkout.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "order",
              "type": "wix-pricing-plans-backend.Orders.Order",
              "doc": "The preview, as if the plan had been ordered. Omitted if the purchase limit for the plan has been exceeded for the buyer." },
            { "name": "purchaseLimitExceeded",
              "type": "boolean",
              "doc": "Whether the purchase limit for the plan has already been reached by the buyer.\n `false` for plans that do not have purchase limits." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PricePreview",
        "locations":
          [ { "lineno": 395,
              "filename": "checkout.js" } ],
        "docs":
          { "links": [],
            "examples": [],
            "extra":
              {  } },
        "members":
          [ { "name": "currency",
              "type": "string",
              "doc": "Currency code. Must be a valid [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) currency code (for example, USD)." },
            { "name": "price",
              "type": "wix-pricing-plans-backend.Orders.PriceDetails",
              "doc": "Detailed price of one payment cycle." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }