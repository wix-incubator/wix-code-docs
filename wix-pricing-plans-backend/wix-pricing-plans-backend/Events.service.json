{ "name": "Events",
  "memberOf": "wix-pricing-plans-backend",
  "mixes": [],
  "labels":
    [ "new" ],
  "location":
    { "lineno": 1,
      "filename": "events.js" },
  "docs":
    { "summary": "Events fired by pricing plans.",
      "description":
        [ "Wix Pricing Plans events are fired in your site's backend when certain events occur with plans.",
          " You can write event handlers that react to these events. Event handler functions",
          " receive data that corresponds to the event that has occurred. Use event handlers",
          " to create custom responses to pricing plan events.",
          "",
          " > **Note**: Backend events don't work when previewing your site.",
          "",
          " ### Working with Pricing Plan Event Handlers",
          "",
          " To add a pricing plan event handler, add an **events.js** file to the **Backend** section",
          " of your site if one does not already exist. All event handler functions for your",
          " site are defined in this file.",
          "",
          " Event handler functions are defined using the following pattern:",
          "",
          " ```javascript",
          " export function <wixAppName>_<eventName>(event) { }",
          " ```",
          "",
          " For example, an event handler that handles pricing plan updates looks",
          " like this:",
          "",
          " ```javascript",
          " export function wixPricingPlans_onPlanUpdated(event) { }",
          " ```" ],
      "links": [],
      "examples": [],
      "extra":
        {  } },
  "properties": [],
  "operations":
    [ { "name": "onPlanArchived",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-pricing-plans-backend.Events.PlanArchivedEvent",
              "doc": "Information about the pricing plan that was archived and metadata for the event." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 144,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that triggers when a pricing plan is archived.",
            "description":
              [ "The `onPlanArchived()` event handler runs when a pricing plan has been archived.",
                " The received `PlanArchivedEvent`",
                " object contains information about the pricing plan that was archived.",
                "",
                " > **Note:** Backend events don't work when previewing your site." ],
            "links": [],
            "examples":
              [ { "title": "An event triggered when a pricing plan is archived",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanArchived(event) {",
                      "  const planId = event.data.plan._id;",
                      "  const planDescription = event.data.plan.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\":{",
                      " *      \"id\": \"3423a637-d7c9-5e44-acb5-337ef4b5d677\",",
                      " *      \"entityId\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *      \"eventTime\": \"2021-02-03T14:07:13.105207Z\",",
                      " *      \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"data\": {",
                      " *     \"plan\": {",
                      " *       \"_id\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *       \"name\": \"Visitor Membership\",",
                      " *       \"description\": \"Temporary membership for visitors from out-of-town\",",
                      " *       \"perks\": [ ],",
                      " *       \"pricing\": {",
                      " *         \"subscription\": {",
                      " *           \"cycleDuration\": {",
                      " *             \"count\": 1,",
                      " *             \"unit\": \"MONTH\"",
                      " *           },",
                      " *           \"cycleCount\": 3",
                      " *         },",
                      " *         \"price\": {",
                      " *           \"value\": \"20\",",
                      " *           \"currency\": \"USD\"",
                      " *         },",
                      " *         \"freeTrialDays\": 0",
                      " *       },",
                      " *       \"public\": false,",
                      " *       \"archived\": true,",
                      " *       \"primary\": false,",
                      " *       \"hasOrders\": true,",
                      " *       \"_createdDate\": \"2019-06-15T12:53:08.489Z\",",
                      " *       \"_updatedDate\": \"2020-02-03T14:07:13.076Z\",",
                      " *       \"slug\":\"visitor-membership\",",
                      " *       \"maxPurchasesPerBuyer\": 1,",
                      " *       \"allowFutureStartDate\": false,",
                      " *       \"buyerCanCancel\" :true,",
                      " *       \"termsAndConditions\": \"Temporary access for visitors only. Not transferrable.\"",
                      " *     }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onPlanCreated",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-pricing-plans-backend.Events.PlanCreatedEvent",
              "doc": "Information about the pricing plan that was created and metadata for the event." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 111,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that triggers when a pricing plan is created.",
            "description":
              [ "The `onPlanCreated()` event handler runs when a pricing plan has been created.",
                " The received `PlanCreatedEvent`",
                " object contains information about the pricing plan that was created.",
                "",
                " > **Note:** Backend events don't work when previewing your site." ],
            "links": [],
            "examples":
              [ { "title": "An event triggered when a pricing plan is created",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanCreated(event) {",
                      "  const planId = event.entity._id;",
                      "  const planDescription = event.entity.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\": {",
                      " *     \"id\": \"3743d382-a4d4-7e15-ada5-340ad4b5d760\",",
                      " *     \"entityId\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"eventTime\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"entity\": {",
                      " *     \"_id\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"name\": \"Full membership\",",
                      " *     \"description\":\"Full membership including weekends\",",
                      " *     \"perks\": [",
                      " *        \"Free parking\",",
                      " *        \"Express line\"",
                      " *     ],",
                      " *     \"pricing\": {",
                      " *        \"singlePaymentUnlimited\": true,",
                      " *        \"price\": {",
                      " *           \"value\": \"40\",",
                      " *           \"currency\": \"USD\"",
                      " *        }",
                      " *     },",
                      " *     \"public\" : true,",
                      " *     \"_createdDate\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"_updatedDate\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"slug\":\"full-membership\",",
                      " *     \"maxPurchasesPerBuyer\": 1,",
                      " *     \"allowFutureStartDate\": false,",
                      " *     \"buyerCanCancel\": true,",
                      " *     \"termsAndConditions\": \"Copyright laws apply.\"",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onPlanPurchased",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-pricing-plans-backend.Events.PlanPurchasedEvent",
              "doc": "The purchase data." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 162,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that triggers when a member purchases a plan.",
            "description":
              [ "The `onPlanPurchased()` event handler runs when a member purchases a pricing plan.",
                " The received `PlanPurchasedEvent`",
                " object contains order information about the plan, such as order ID, ",
                " until when the order is valid, and so on.",
                " > **Note:** Backend events don't work when previewing your site." ],
            "links": [],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      "*",
                      "*   When the purchase is free, the `wixPayOrderId` is blank,",
                      "*   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"THB\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Platinum Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":false,",
                      "*         \"period\":{  ",
                      "*            \"amount\":1,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "*  }",
                      "*",
                      "*",
                      "*  Event object for a purchase that is valid until the user cancels:",
                      "*",
                      "*   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      "*   `validFor.forever.period.amount` is 0.",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"USD\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Gold Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":true,",
                      "*         \"period\":{  ",
                      "*            \"amount\":0,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "* }",
                      "*",
                      "*/" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "extra":
          {  } },
      { "name": "onPlanUpdated",
        "labels": [],
        "nameParams": [],
        "params":
          [ { "name": "event",
              "type": "wix-pricing-plans-backend.Events.PlanUpdatedEvent",
              "doc": "Information about the pricing plan that was updated and metadata for the event." } ],
        "ret":
          { "type": "void" },
        "locations":
          [ { "lineno": 128,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An event that triggers when a pricing plan is changed.",
            "description":
              [ "The `onPlanUpdated()` event handler runs when a pricing plan has changed.",
                " The received `PlanUpdatedEvent`",
                " object contains information about the pricing plan that was updated.",
                "",
                " > **Note:** Backend events don't work when previewing your site." ],
            "links": [],
            "examples":
              [ { "title": "An event triggered when a pricing plan is changed",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanUpdated(event) {",
                      "  const planId = event.entity._id;",
                      "  const planDescription = event.entity.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\": {",
                      " *     \"id\": \"3743d382-a4d4-7e15-ada5-340ad4b5d760\",",
                      " *     \"entityId\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"eventTime\": \"2021-02-03T10:09:23.194Z\",",
                      " *     \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"entity\": {",
                      " *     \"_id\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"name\": \"Full membership\",",
                      " *     \"description\":\"Full membership including weekends and holidays\",",
                      " *     \"perks\": [",
                      " *        \"Free parking\",",
                      " *        \"Express line\"",
                      " *     ],",
                      " *     \"pricing\": {",
                      " *        \"singlePaymentUnlimited\": true,",
                      " *        \"price\": {",
                      " *           \"value\": \"45\",",
                      " *           \"currency\": \"USD\"",
                      " *        }",
                      " *     },",
                      " *     \"public\" : true,",
                      " *     \"_createdDate\": \"2020-01-03T10:13:15.194Z\",",
                      " *     \"_updatedDate\": \"2021-02-03T10:09:23.194Z\",",
                      " *     \"slug\":\"full-membership\",",
                      " *     \"maxPurchasesPerBuyer\": 1,",
                      " *     \"allowFutureStartDate\": false,",
                      " *     \"buyerCanCancel\": true,",
                      " *     \"termsAndConditions\": \"Copyright laws still apply.\"",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "extra":
          {  } } ],
  "callbacks": [],
  "messages":
    [ { "name": "EventData",
        "locations":
          [ { "lineno": 60,
              "filename": "events.js" } ],
        "docs":
          { "summary": "Event data.",
            "links": [],
            "examples":
              [ { "title": "An event triggered when a pricing plan is archived",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanArchived(event) {",
                      "  const planId = event.data.plan._id;",
                      "  const planDescription = event.data.plan.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\":{",
                      " *      \"id\": \"3423a637-d7c9-5e44-acb5-337ef4b5d677\",",
                      " *      \"entityId\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *      \"eventTime\": \"2021-02-03T14:07:13.105207Z\",",
                      " *      \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"data\": {",
                      " *     \"plan\": {",
                      " *       \"_id\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *       \"name\": \"Visitor Membership\",",
                      " *       \"description\": \"Temporary membership for visitors from out-of-town\",",
                      " *       \"perks\": [ ],",
                      " *       \"pricing\": {",
                      " *         \"subscription\": {",
                      " *           \"cycleDuration\": {",
                      " *             \"count\": 1,",
                      " *             \"unit\": \"MONTH\"",
                      " *           },",
                      " *           \"cycleCount\": 3",
                      " *         },",
                      " *         \"price\": {",
                      " *           \"value\": \"20\",",
                      " *           \"currency\": \"USD\"",
                      " *         },",
                      " *         \"freeTrialDays\": 0",
                      " *       },",
                      " *       \"public\": false,",
                      " *       \"archived\": true,",
                      " *       \"primary\": false,",
                      " *       \"hasOrders\": true,",
                      " *       \"_createdDate\": \"2019-06-15T12:53:08.489Z\",",
                      " *       \"_updatedDate\": \"2020-02-03T14:07:13.076Z\",",
                      " *       \"slug\":\"visitor-membership\",",
                      " *       \"maxPurchasesPerBuyer\": 1,",
                      " *       \"allowFutureStartDate\": false,",
                      " *       \"buyerCanCancel\" :true,",
                      " *       \"termsAndConditions\": \"Temporary access for visitors only. Not transferrable.\"",
                      " *     }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "plan",
              "type": "wix-pricing-plans-backend.Plan",
              "doc": "Plan information." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "EventMetadata",
        "locations":
          [ { "lineno": 70,
              "filename": "events.js" } ],
        "docs":
          { "summary": "Event metadata.",
            "links": [],
            "examples":
              [ { "title": "An event triggered when a new pricing plan is created",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanCreated(event) {",
                      "  const planId = event.entity._id;",
                      "  const planDescription = event.entity.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\": {",
                      " *     \"id\": \"3743d382-a4d4-7e15-ada5-340ad4b5d760\",",
                      " *     \"entityId\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"eventTime\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"entity\": {",
                      " *     \"_id\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"name\": \"Full membership\",",
                      " *     \"description\":\"Full membership including weekends\",",
                      " *     \"perks\": [",
                      " *        \"Free parking\",",
                      " *        \"Express line\"",
                      " *     ],",
                      " *     \"pricing\": {",
                      " *        \"singlePaymentUnlimited\": true,",
                      " *        \"price\": {",
                      " *           \"value\": \"40\",",
                      " *           \"currency\": \"USD\"",
                      " *        }",
                      " *     },",
                      " *     \"public\" : true,",
                      " *     \"_createdDate\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"_updatedDate\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"slug\":\"full-membership\",",
                      " *     \"maxPurchasesPerBuyer\": 1,",
                      " *     \"allowFutureStartDate\": false,",
                      " *     \"buyerCanCancel\": true,",
                      " *     \"termsAndConditions\": \"Copyright laws apply.\"",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "An event triggered when a pricing plan is updated",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanUpdated(event) {",
                      "  const planId = event.entity._id;",
                      "  const planDescription = event.entity.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\": {",
                      " *     \"id\": \"3743d382-a4d4-7e15-ada5-340ad4b5d760\",",
                      " *     \"entityId\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"eventTime\": \"2021-02-03T10:09:23.194Z\",",
                      " *     \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"entity\": {",
                      " *     \"_id\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"name\": \"Full membership\",",
                      " *     \"description\":\"Full membership including weekends and holidays\",",
                      " *     \"perks\": [",
                      " *        \"Free parking\",",
                      " *        \"Express line\"",
                      " *     ],",
                      " *     \"pricing\": {",
                      " *        \"singlePaymentUnlimited\": true,",
                      " *        \"price\": {",
                      " *           \"value\": \"45\",",
                      " *           \"currency\": \"USD\"",
                      " *        }",
                      " *     },",
                      " *     \"public\" : true,",
                      " *     \"_createdDate\": \"2020-01-03T10:13:15.194Z\",",
                      " *     \"_updatedDate\": \"2021-02-03T10:09:23.194Z\",",
                      " *     \"slug\":\"full-membership\",",
                      " *     \"maxPurchasesPerBuyer\": 1,",
                      " *     \"allowFutureStartDate\": false,",
                      " *     \"buyerCanCancel\": true,",
                      " *     \"termsAndConditions\": \"Copyright laws still apply.\"",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } },
                { "title": "An event triggered when a pricing plan is archived",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanArchived(event) {",
                      "  const planId = event.data.plan._id;",
                      "  const planDescription = event.data.plan.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\":{",
                      " *      \"id\": \"3423a637-d7c9-5e44-acb5-337ef4b5d677\",",
                      " *      \"entityId\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *      \"eventTime\": \"2021-02-03T14:07:13.105207Z\",",
                      " *      \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"data\": {",
                      " *     \"plan\": {",
                      " *       \"_id\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *       \"name\": \"Visitor Membership\",",
                      " *       \"description\": \"Temporary membership for visitors from out-of-town\",",
                      " *       \"perks\": [ ],",
                      " *       \"pricing\": {",
                      " *         \"subscription\": {",
                      " *           \"cycleDuration\": {",
                      " *             \"count\": 1,",
                      " *             \"unit\": \"MONTH\"",
                      " *           },",
                      " *           \"cycleCount\": 3",
                      " *         },",
                      " *         \"price\": {",
                      " *           \"value\": \"20\",",
                      " *           \"currency\": \"USD\"",
                      " *         },",
                      " *         \"freeTrialDays\": 0",
                      " *       },",
                      " *       \"public\": false,",
                      " *       \"archived\": true,",
                      " *       \"primary\": false,",
                      " *       \"hasOrders\": true,",
                      " *       \"_createdDate\": \"2019-06-15T12:53:08.489Z\",",
                      " *       \"_updatedDate\": \"2020-02-03T14:07:13.076Z\",",
                      " *       \"slug\":\"visitor-membership\",",
                      " *       \"maxPurchasesPerBuyer\": 1,",
                      " *       \"allowFutureStartDate\": false,",
                      " *       \"buyerCanCancel\" :true,",
                      " *       \"termsAndConditions\": \"Temporary access for visitors only. Not transferrable.\"",
                      " *     }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "id",
              "type": "string",
              "doc": "Event ID." },
            { "name": "entityId",
              "type": "string",
              "doc": "Plan ID associated with this event." },
            { "name": "eventTime",
              "type": "string",
              "doc": "Event timestamp." },
            { "name": "triggeredByAnonymizeRequest",
              "type": "boolean",
              "doc": "Whether the event was triggered as a result of a privacy regulation application (for example, [GDPR](https://support.wix.com/en/article/gdpr-frequently-asked-questions)). For advanced users.",
              "optional": true } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PlanArchivedEvent",
        "locations":
          [ { "lineno": 84,
              "filename": "events.js" } ],
        "docs":
          { "summary": "Information about the plan archive event.",
            "links": [],
            "examples":
              [ { "title": "An event triggered when a pricing plan is archived",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanArchived(event) {",
                      "  const planId = event.data.plan._id;",
                      "  const planDescription = event.data.plan.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\":{",
                      " *      \"id\": \"3423a637-d7c9-5e44-acb5-337ef4b5d677\",",
                      " *      \"entityId\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *      \"eventTime\": \"2021-02-03T14:07:13.105207Z\",",
                      " *      \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"data\": {",
                      " *     \"plan\": {",
                      " *       \"_id\": \"3455d382-a4c3-7e14-def5-340ad4b5d421\",",
                      " *       \"name\": \"Visitor Membership\",",
                      " *       \"description\": \"Temporary membership for visitors from out-of-town\",",
                      " *       \"perks\": [ ],",
                      " *       \"pricing\": {",
                      " *         \"subscription\": {",
                      " *           \"cycleDuration\": {",
                      " *             \"count\": 1,",
                      " *             \"unit\": \"MONTH\"",
                      " *           },",
                      " *           \"cycleCount\": 3",
                      " *         },",
                      " *         \"price\": {",
                      " *           \"value\": \"20\",",
                      " *           \"currency\": \"USD\"",
                      " *         },",
                      " *         \"freeTrialDays\": 0",
                      " *       },",
                      " *       \"public\": false,",
                      " *       \"archived\": true,",
                      " *       \"primary\": false,",
                      " *       \"hasOrders\": true,",
                      " *       \"_createdDate\": \"2019-06-15T12:53:08.489Z\",",
                      " *       \"_updatedDate\": \"2020-02-03T14:07:13.076Z\",",
                      " *       \"slug\":\"visitor-membership\",",
                      " *       \"maxPurchasesPerBuyer\": 1,",
                      " *       \"allowFutureStartDate\": false,",
                      " *       \"buyerCanCancel\" :true,",
                      " *       \"termsAndConditions\": \"Temporary access for visitors only. Not transferrable.\"",
                      " *     }",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "metadata",
              "type": "wix-pricing-plans-backend.Events.EventMetadata",
              "doc": "Event metadata." },
            { "name": "data",
              "type": "wix-pricing-plans-backend.Events.EventData",
              "doc": "Event data, including information about the archived plan." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PlanCreatedEvent",
        "locations":
          [ { "lineno": 41,
              "filename": "events.js" } ],
        "docs":
          { "summary": "Information about the create plan event.",
            "links": [],
            "examples":
              [ { "title": "An event when a new pricing plan is created",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanCreated(event) {",
                      "  const planId = event.entity._id;",
                      "  const planDescription = event.entity.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\": {",
                      " *     \"id\": \"3743d382-a4d4-7e15-ada5-340ad4b5d760\",",
                      " *     \"entityId\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"eventTime\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"entity\": {",
                      " *     \"_id\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"name\": \"Full membership\",",
                      " *     \"description\":\"Full membership including weekends\",",
                      " *     \"perks\": [",
                      " *        \"Free parking\",",
                      " *        \"Express line\"",
                      " *     ],",
                      " *     \"pricing\": {",
                      " *        \"singlePaymentUnlimited\": true,",
                      " *        \"price\": {",
                      " *           \"value\": \"40\",",
                      " *           \"currency\": \"USD\"",
                      " *        }",
                      " *     },",
                      " *     \"public\" : true,",
                      " *     \"_createdDate\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"_updatedDate\": \"2020-02-03T10:13:15.194Z\",",
                      " *     \"slug\":\"full-membership\",",
                      " *     \"maxPurchasesPerBuyer\": 1,",
                      " *     \"allowFutureStartDate\": false,",
                      " *     \"buyerCanCancel\": true,",
                      " *     \"termsAndConditions\": \"Copyright laws apply.\"",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "metadata",
              "type": "wix-pricing-plans-backend.Events.EventMetadata",
              "doc": "Event metadata." },
            { "name": "entity",
              "type": "wix-pricing-plans-backend.Plan",
              "doc": "Plan information." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PlanPurchasedEvent",
        "locations":
          [ { "lineno": 95,
              "filename": "events.js" } ],
        "docs":
          { "summary": "An object representing a new pricing plan purchase.",
            "links":
              [ "[onPlanPurchased( )](#onPlanPurchased)" ],
            "examples":
              [ { "title": "An event when a pricing plan is purchased",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "// For inserting data about a plan transaction:",
                      "import wixData from 'wix-data';",
                      "",
                      "export function wixPaidPlans_onPlanPurchased(event) {",
                      "",
                      "  // Insert a title reflecting the type of transaction, and",
                      "  // the event's order object (json) into ",
                      "  // the collection's data field.",
                      "  if (event.order.price.amount === 0) {",
                      "     let orderData = {",
                      "       \"title\": \"Free plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData);",
                      "  } else {",
                      "     let orderData = {",
                      "       \"title\": \"Regular plan purchased\",",
                      "       \"data\": event.order",
                      "     };",
                      "     wixData.insert(\"planEvents\", orderData); ",
                      "  }",
                      "}",
                      "",
                      "",
                      "/*  Event object for a free, one-month purchase, ordered using Thailand baht currency:",
                      "*",
                      "*   When the purchase is free, the `wixPayOrderId` is blank,",
                      "*   the `price.amount` is 0, and the paymentStatus is marked `PAID`. ",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"THB\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Platinum Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":false,",
                      "*         \"period\":{  ",
                      "*            \"amount\":1,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "*  }",
                      "*",
                      "*",
                      "*  Event object for a purchase that is valid until the user cancels:",
                      "*",
                      "*   When the purchase is valid until the user cancels, `validFor.forever` is true, and ",
                      "*   `validFor.forever.period.amount` is 0.",
                      "*",
                      "*   {  ",
                      "*    \"order\":{  ",
                      "*      \"paymentStatus\":\"PAID\",",
                      "*      \"validUntil\":\"2019-09-12T05:43:53.246Z\",",
                      "*      \"price\":{  ",
                      "*         \"currency\":\"USD\",",
                      "*         \"amount\":0",
                      "*      },",
                      "*      \"cancellationReason\":\"CANCELLATION_REASON_UNDEFINED\",",
                      "*      \"validFrom\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"planName\":\"valid 1 week\",",
                      "*      \"wixPayOrderId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"recurring\":false,",
                      "*      \"id\":\"b8401bab-8e5d-4bf6-944b-b2d56698d4c9\",",
                      "*      \"dateCreated\":\"2019-08-12T05:43:53.246Z\",",
                      "*      \"status\":\"ACTIVE\",",
                      "*      \"roleId\":\"\",",
                      "*      \"planDescription\":\"Gold Plan\",",
                      "*      \"memberId\":\"42d90dcb-b9ad-47be-9a36-488be3dec679\",",
                      "*      \"orderType\":\"ONLINE\",",
                      "*      \"planId\":\"a52f41cc-8129-4812-9e1c-fafa2807a25d\",",
                      "*      \"validFor\":{  ",
                      "*         \"forever\":true,",
                      "*         \"period\":{  ",
                      "*            \"amount\":0,",
                      "*            \"unit\":\"MONTH\"",
                      "*         }",
                      "*      }",
                      "*   }",
                      "* }",
                      "*",
                      "*/" ],
                  "extra":
                    { "description": "This example adds purchased plan event data to a manually-created\n planEvents database. The database has a data field.\n\n When a plan is purchased and the onPlanPurchased event is triggered,\n the JSON format of the object is inserted into the data field." } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "order",
              "type": "wix-pricing-plans-backend.Events.Order",
              "doc": "Object containing the details about the plan's order." } ],
        "extra":
          {  },
        "labels": [] },
      { "name": "PlanUpdatedEvent",
        "locations":
          [ { "lineno": 51,
              "filename": "events.js" } ],
        "docs":
          { "summary": "Information about the plan update event.",
            "links": [],
            "examples":
              [ { "title": "An event when a pricing plan is updated",
                  "body":
                    [ "// Place this code in the events.js file",
                      "// of your site's Backend section.",
                      "// Add the file if it doesn't exist.",
                      "",
                      "export function wixPricingPlans_onPlanUpdated(event) {",
                      "  const planId = event.entity._id;",
                      "  const planDescription = event.entity.description;",
                      "  const eventId = event.metadata.id;",
                      "  const eventTime = event.metadata.eventTime;",
                      "}",
                      "",
                      "/* Full event object:",
                      " * {",
                      " *   \"metadata\": {",
                      " *     \"id\": \"3743d382-a4d4-7e15-ada5-340ad4b5d760\",",
                      " *     \"entityId\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"eventTime\": \"2021-02-03T10:09:23.194Z\",",
                      " *     \"triggeredByAnonymizeRequest\": false",
                      " *   },",
                      " *   \"entity\": {",
                      " *     \"_id\": \"c61bbc26-a4d4-7e15-ada5-f99803abce33\",",
                      " *     \"name\": \"Full membership\",",
                      " *     \"description\":\"Full membership including weekends and holidays\",",
                      " *     \"perks\": [",
                      " *        \"Free parking\",",
                      " *        \"Express line\"",
                      " *     ],",
                      " *     \"pricing\": {",
                      " *        \"singlePaymentUnlimited\": true,",
                      " *        \"price\": {",
                      " *           \"value\": \"45\",",
                      " *           \"currency\": \"USD\"",
                      " *        }",
                      " *     },",
                      " *     \"public\" : true,",
                      " *     \"_createdDate\": \"2020-01-03T10:13:15.194Z\",",
                      " *     \"_updatedDate\": \"2021-02-03T10:09:23.194Z\",",
                      " *     \"slug\":\"full-membership\",",
                      " *     \"maxPurchasesPerBuyer\": 1,",
                      " *     \"allowFutureStartDate\": false,",
                      " *     \"buyerCanCancel\": true,",
                      " *     \"termsAndConditions\": \"Copyright laws still apply.\"",
                      " *   }",
                      " * }",
                      " */" ],
                  "extra":
                    {  } } ],
            "extra":
              {  } },
        "members":
          [ { "name": "metadata",
              "type": "wix-pricing-plans-backend.Events.EventMetadata",
              "doc": "Event metadata." },
            { "name": "entity",
              "type": "wix-pricing-plans-backend.Plan",
              "doc": "Plan information." } ],
        "extra":
          {  },
        "labels": [] } ],
  "extra":
    {  } }